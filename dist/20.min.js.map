{"version":3,"file":"20.min.js","sources":["webpack:///./src/pages/stocks-staff-dm/form/index.jsx"],"sourcesContent":["import \"@arco-design/web-react/es/Button/style\";\nimport _Button from \"@arco-design/web-react/es/Button\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport \"@arco-design/web-react/es/DatePicker/style\";\nimport _DatePicker from \"@arco-design/web-react/es/DatePicker\";\nimport \"@arco-design/web-react/es/InputNumber/style\";\nimport _InputNumber from \"@arco-design/web-react/es/InputNumber\";\nimport \"@arco-design/web-react/es/Upload/style\";\nimport _Upload from \"@arco-design/web-react/es/Upload\";\nimport \"@arco-design/web-react/es/Modal/style\";\nimport _Modal from \"@arco-design/web-react/es/Modal\";\nimport \"@arco-design/web-react/es/Input/style\";\nimport _Input from \"@arco-design/web-react/es/Input\";\nimport \"@arco-design/web-react/es/Select/style\";\nimport _Select from \"@arco-design/web-react/es/Select\";\nimport \"@arco-design/web-react/es/Message/style\";\nimport _Message from \"@arco-design/web-react/es/Message\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport \"@arco-design/web-react/es/Form/style\";\nimport _Form from \"@arco-design/web-react/es/Form\";\nvar _jsxFileName = \"/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-staff-dm/form/index.jsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useRef } from 'react';\nimport { bindDm } from '../../../api/drama.js';\nimport PropTypes from 'prop-types';\nvar FormItem = _Form.Item;\n\nfunction Index(_ref) {\n  var UserList = _ref.UserList,\n      closeModalAndReqNewTableData = _ref.closeModalAndReqNewTableData;\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Form, {\n    onSubmit: function onSubmit(v) {\n      console.log(v);\n\n      _Message.success('success');\n    },\n    form: form,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    rules: [{\n      required: true,\n      message: '请选择账号'\n    }],\n    field: \"user_account\",\n    label: \"\\u9009\\u62E9\\u8D26\\u53F7\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Select, {\n    placeholder: \"\\u8BF7\\u9009\\u62E9\\u8D26\\u53F7\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 11\n    }\n  }, UserList === null || UserList === void 0 ? void 0 : UserList.map(function (item) {\n    return /*#__PURE__*/React.createElement(_Select.Option, {\n      key: item.user_account,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 22\n      }\n    }, item.user_account);\n  }))), /*#__PURE__*/React.createElement(FormItem, {\n    rules: [{\n      required: true,\n      message: '请输入昵称'\n    }],\n    field: \"user_nick\",\n    label: \"\\u6635\\u79F0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u6635\\u79F0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    rules: [{\n      required: true,\n      message: '请输入星座'\n    }],\n    field: \"star_sign\",\n    label: \"\\u661F\\u5EA7\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u661F\\u5EA7\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    rules: [{\n      required: true,\n      message: '请输入DM简介'\n    }],\n    field: \"user_brief\",\n    label: \"DM\\u7B80\\u4ECB\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Input.TextArea, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165DM\\u7B80\\u4ECB\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    rules: [{\n      required: true,\n      message: '请输入擅长剧本'\n    }],\n    field: \"skilled_drama\",\n    label: \"\\u64C5\\u957F\\u5267\\u672C\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    allowCreate: true,\n    mode: \"multiple\",\n    placeholder: \"\\u64C5\\u957F\\u5267\\u672C\",\n    allowClear: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(_Form.Item, {\n    rules: [{\n      required: true,\n      message: '请上传DM相片'\n    }],\n    label: \"DM\\u76F8\\u7247\",\n    field: \"user_photo\",\n    triggerPropName: \"fileList\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Upload, {\n    limit: 1,\n    listType: \"picture-card\",\n    name: \"user_photo\",\n    customRequest: function customRequest(option) {\n      var onProgress = option.onProgress,\n          onError = option.onError,\n          onSuccess = option.onSuccess,\n          file = option.file;\n      var xhr = new XMLHttpRequest();\n\n      if (xhr.upload) {\n        xhr.upload.onprogress = function (event) {\n          var percent;\n\n          if (event.total > 0) {\n            percent = event.loaded / event.total * 100;\n          }\n\n          onProgress(parseInt(percent, 10), event);\n        };\n      }\n\n      xhr.onerror = function error(e) {\n        onError(e);\n      };\n\n      xhr.onload = function onload() {\n        if (xhr.status < 200 || xhr.status >= 300) {}\n\n        onSuccess(JSON.parse(xhr.responseText));\n      };\n\n      var formData = new FormData();\n      formData.append('up_file', file);\n      formData.append('module', 'drama');\n      xhr.open('post', 'https://gbs.toptian.com/system/upload/image', true);\n      xhr.setRequestHeader('Authorization', localStorage.getItem('token'));\n      xhr.send(formData);\n    },\n    onPreview: function onPreview(file) {\n      _Modal.info({\n        title: 'Preview',\n        content: /*#__PURE__*/React.createElement(\"img\", {\n          src: file.url || URL.createObjectURL(file.originFile),\n          style: {\n            maxWidth: '100%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 19\n          }\n        })\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    rules: [{\n      required: true,\n      message: '请选择性别'\n    }],\n    field: \"user_gender\",\n    label: \"\\u6027\\u522B\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Select, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(_Select.Option, {\n    value: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, \"\\u672A\\u77E5\"), /*#__PURE__*/React.createElement(_Select.Option, {\n    value: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, \"\\u7537\"), /*#__PURE__*/React.createElement(_Select.Option, {\n    value: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, \"\\u5973\"))), /*#__PURE__*/React.createElement(FormItem, {\n    rules: [{\n      required: true,\n      message: '请输入获赞次数'\n    }],\n    field: \"praise_qty\",\n    label: \"\\u83B7\\u8D5E\\u6B21\\u6570\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_InputNumber, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    rules: [{\n      required: true,\n      message: '请输入带场次数'\n    }],\n    field: \"exp_value\",\n    label: \"\\u5E26\\u573A\\u6B21\\u6570\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_InputNumber, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u52A0\\u5165\\u65F6\\u95F4\",\n    field: \"join_date\",\n    rules: [{\n      required: true,\n      message: 'join_date is required'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_DatePicker, {\n    showTime: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    wrapperCol: {\n      offset: 5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var param, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              param = form.getFields();\n              param.user_photo = param.user_photo[0].url || param.user_photo[0].response.data.file_url;\n              console.log(param);\n              _context.next = 5;\n              return bindDm(param);\n\n            case 5:\n              data = _context.sent;\n              console.log('data: ', data);\n\n              if (data.code === 200) {\n                closeModalAndReqNewTableData();\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })),\n    type: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, \"Submit\"))));\n}\n\nIndex.propTypes = {\n  name: PropTypes.string.isRequired\n};\nexport default Index;"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}