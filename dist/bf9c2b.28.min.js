(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{158:function(e,l,r){"use strict";r.r(l);var a=r(7),u=r.n(a),t=(r(77),r(28)),n=(r(149),r(59)),m=r(78),c=r.n(m),o=(r(589),r(587)),i=(r(605),r(609)),s=(r(293),r(218)),b=(r(217),r(89)),_=(r(606),r(608)),N=(r(574),r(576)),f=(r(148),r(49)),d=r(5),p=r.n(d),g=r(24),E=r.n(g),v=(r(292),r(106)),h=r(50),O=r.n(h),y=r(0),w=r.n(y),j=r(216),q="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/form/index.jsx";function k(e,l){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);l&&(a=a.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),r.push.apply(r,a)}return r}function x(e){for(var l=1;l<arguments.length;l++){var r=null!=arguments[l]?arguments[l]:{};l%2?k(Object(r),!0).forEach((function(l){p()(e,l,r[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(r,l))}))}return e}var S=v.a.Item,P={labelCol:{span:7},wrapperCol:{span:17}},C={wrapperCol:{span:17,offset:7}};l.default=function(e){var l,r,a,m,d=e.labelData;console.log("labelData: ",d);var p=Object(y.useRef)(),g=Object(y.useState)(null),h=E()(g,2),k=(h[0],h[1]),D=Object(y.useState)("default"),F=E()(D,2),R=F[0],z=(F[1],Object(y.useState)([])),T=E()(z,2),I=T[0],J=T[1],H=Object(y.useState)([]),L=E()(H,2),U=L[0],V=L[1],W=Object(y.useState)([]),A=E()(W,2),M=(A[0],A[1]),X=Object(y.useState)([]),B=E()(X,2),G=B[0],K=B[1],Q=Object(y.useState)([]),Y=E()(Q,2),Z=Y[0],$=Y[1];return Object(y.useEffect)((function(){for(var e=0;e<d.length;e++){var l=d[e];"app_gb_type"===l.dict_code&&J(l),"app_gb_level"===l.dict_code&&V(l),"app_gb_people"===l.dict_code&&M(l),"app_gb_text_tag"===l.dict_code&&K(l),"app_gb_status"===l.dict_code&&$(l)}}),[]),w.a.createElement("div",{style:{maxWidth:650},__source:{fileName:q,lineNumber:77,columnNumber:5}},w.a.createElement(v.a,u()({ref:p},P,{size:R,onSubmit:function(e){var l=x(x({},e),{},{gb_cover:e.gb_cover.response.data.file_url});console.log(l)},onValuesChange:function(e,l){console.log("onValuesChange: ",e,l)},scrollToFirstError:!0,__source:{fileName:q,lineNumber:78,columnNumber:7}}),w.a.createElement(S,{label:"剧本名称",field:"gb_title",rules:[{required:!0,message:"请填写剧本名称"}],__source:{fileName:q,lineNumber:92,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写剧本名称...",__source:{fileName:q,lineNumber:97,columnNumber:11}})),w.a.createElement(v.a.Item,{rules:[{required:!0,message:"请上传剧本封面"}],label:"剧本封面",field:"gb_cover",triggerPropName:"gb_cover",__source:{fileName:q,lineNumber:99,columnNumber:9}},w.a.createElement(_.a,{listType:"picture-card",multiple:!0,name:"gb_cover",customRequest:function(e){console.log(e);var l=e.onProgress,r=e.onError,a=e.onSuccess,u=e.file;console.log("file: ",u);var t=new XMLHttpRequest;t.upload&&(t.upload.onprogress=function(e){var r;e.total>0&&(r=e.loaded/e.total*100),l(parseInt(r,10),e)}),t.onerror=function(e){r(e)},t.onload=function(){if(t.status<200||t.status>=300)return r(t.responseText);k(JSON.parse(t.responseText)),a(JSON.parse(t.responseText),t)};var n=new FormData;n.append("up_file",u),n.append("module","drama"),t.open("post","http://120.24.188.169:8000/system/upload/image",!0),t.setRequestHeader("Authorization",localStorage.getItem("token")),t.send(n)},onPreview:function(e){N.a.info({title:"Preview",content:w.a.createElement("img",{src:e.url||URL.createObjectURL(e.originFile),style:{maxWidth:"100%"},__source:{fileName:q,lineNumber:144,columnNumber:19}})})},__source:{fileName:q,lineNumber:105,columnNumber:11}})),w.a.createElement(S,{label:"剧本类型",field:"gb_type",rules:[{required:!0,message:"请填写剧本类型"}],__source:{fileName:q,lineNumber:153,columnNumber:9}},w.a.createElement(b.a,{placeholder:"请选择剧本类型",__source:{fileName:q,lineNumber:158,columnNumber:11}},null==I||null===(l=I.dict_label)||void 0===l?void 0:l.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:q,lineNumber:161,columnNumber:17}},e.label_zh)})))),w.a.createElement(S,{label:"剧本难度",field:"gb_level",rules:[{required:!0,message:"请选中剧本难度"}],__source:{fileName:q,lineNumber:168,columnNumber:9}},w.a.createElement(b.a,{placeholder:"请选择剧本难度",__source:{fileName:q,lineNumber:173,columnNumber:11}},null==U||null===(r=U.dict_label)||void 0===r?void 0:r.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:q,lineNumber:176,columnNumber:17}},e.label_zh)})))),w.a.createElement(S,{label:"玩家人数",field:"gb_people",rules:[{required:!0,message:"请填写玩家说明"}],__source:{fileName:q,lineNumber:184,columnNumber:9}},w.a.createElement(s.a,{placeholder:"请填写玩家说明...",__source:{fileName:q,lineNumber:189,columnNumber:11}})),w.a.createElement(S,{label:"剧本状态",field:"gb_status",rules:[{required:!1,message:"请选择剧本状态"}],__source:{fileName:q,lineNumber:192,columnNumber:9}},w.a.createElement(b.a,{placeholder:"请选择剧本状态",__source:{fileName:q,lineNumber:197,columnNumber:11}},null==Z||null===(a=Z.dict_label)||void 0===a?void 0:a.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:q,lineNumber:200,columnNumber:17}},e.label_zh)})))),w.a.createElement(S,{label:"玩家说明",field:"gb_people_note",rules:[{required:!0,message:"请填写玩家说明"}],__source:{fileName:q,lineNumber:209,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写玩家说明...",__source:{fileName:q,lineNumber:214,columnNumber:11}})),w.a.createElement(S,{label:"剧本标签",field:"gb_text_tag_arr",rules:[{required:!0,message:"请选择剧本标签"}],__source:{fileName:q,lineNumber:216,columnNumber:9}},w.a.createElement(b.a,{mode:"multiple",allowClear:!0,placeholder:"请选择剧本标签",__source:{fileName:q,lineNumber:221,columnNumber:11}},null==G||null===(m=G.dict_label)||void 0===m?void 0:m.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:q,lineNumber:224,columnNumber:17}},e.label_zh)})))),w.a.createElement(S,{label:"剧本时长/小时",field:"gb_hour",rules:[{type:"number",required:!0}],__source:{fileName:q,lineNumber:232,columnNumber:9}},w.a.createElement(s.a,{min:1,placeholder:"请输入参考价格",__source:{fileName:q,lineNumber:237,columnNumber:11}})),w.a.createElement(S,{label:"工作日价格",field:"gb_price",rules:[{type:"number",required:!0}],__source:{fileName:q,lineNumber:239,columnNumber:9}},w.a.createElement(s.a,{min:1,placeholder:"请输入工作日价格",__source:{fileName:q,lineNumber:240,columnNumber:11}})),w.a.createElement(S,{label:"周末价格",field:"gb_price2",rules:[{type:"number",required:!0}],__source:{fileName:q,lineNumber:242,columnNumber:9}},w.a.createElement(s.a,{min:1,placeholder:"请输入工作日价格",__source:{fileName:q,lineNumber:243,columnNumber:11}})),w.a.createElement(S,{label:"推荐星级",field:"gb_star_lev",rules:[{required:!0,type:"number"}],__source:{fileName:q,lineNumber:246,columnNumber:9}},w.a.createElement(i.a,{allowHalf:!0,__source:{fileName:q,lineNumber:256,columnNumber:11}})),w.a.createElement(S,{label:"剧本概要",field:"gb_text_brief",rules:[{required:!0,message:"请填写剧本概要"}],__source:{fileName:q,lineNumber:258,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写剧本概要...",__source:{fileName:q,lineNumber:263,columnNumber:11}})),w.a.createElement(S,{label:"剧本描述",field:"gb_text_content",rules:[{required:!1,message:"请填写剧本描述"}],__source:{fileName:q,lineNumber:265,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写剧本描述...",__source:{fileName:q,lineNumber:270,columnNumber:11}})),w.a.createElement(S,{label:"上架时间",field:"gb_add_time",rules:[{required:!1,message:"gb_add_time is required"}],__source:{fileName:q,lineNumber:273,columnNumber:9}},w.a.createElement(o.a,{showTime:!0,__source:{fileName:q,lineNumber:283,columnNumber:11}})),w.a.createElement(S,{label:"是否新本",field:"is_new",rules:[{required:!1,message:"请填写版权信息"}],__source:{fileName:q,lineNumber:285,columnNumber:9}},w.a.createElement(b.a,{placeholder:"是否新本",__source:{fileName:q,lineNumber:290,columnNumber:11}},w.a.createElement(b.a.Option,{value:1,__source:{fileName:q,lineNumber:291,columnNumber:13}},"是"),w.a.createElement(b.a.Option,{value:0,__source:{fileName:q,lineNumber:292,columnNumber:13}},"否"))),w.a.createElement(S,{label:"是否热门",field:"is_hot",rules:[{required:!1,message:"请填写版权信息"}],__source:{fileName:q,lineNumber:295,columnNumber:9}},w.a.createElement(b.a,{placeholder:"是否热门",__source:{fileName:q,lineNumber:300,columnNumber:11}},w.a.createElement(b.a.Option,{value:1,__source:{fileName:q,lineNumber:301,columnNumber:13}},"是"),w.a.createElement(b.a.Option,{value:0,__source:{fileName:q,lineNumber:302,columnNumber:13}},"否"))),w.a.createElement(S,{label:"版权信息",field:"gb_producer",rules:[{required:!0,message:"请填写版权信息"}],__source:{fileName:q,lineNumber:305,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写版权信息...",__source:{fileName:q,lineNumber:310,columnNumber:11}})),w.a.createElement(S,{label:"备注说明",field:"gb_remarks",rules:[{required:!1,message:"请填写备注说明"}],__source:{fileName:q,lineNumber:313,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写备注说明...",__source:{fileName:q,lineNumber:318,columnNumber:11}})),w.a.createElement(S,u()({},C,{__source:{fileName:q,lineNumber:387,columnNumber:9}}),w.a.createElement(t.a,{onClick:c()(O.a.mark((function e(){var l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.current){e.next=16;break}return e.prev=1,e.next=4,p.current.validate();case 4:return console.log(p.current.getFields()),(l=p.current.getFields()).gb_cover=l.gb_cover[0].response.data.file_url,e.next=9,Object(j.b)(p.current.getFields());case 9:e.sent,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(p.current.getFieldsError()),n.a.error("校验失败，请检查字段！");case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),type:"primary",style:{marginRight:24},__source:{fileName:q,lineNumber:388,columnNumber:11}},"Submit"),w.a.createElement(t.a,{onClick:function(){p.current.resetFields()},__source:{fileName:q,lineNumber:408,columnNumber:11}},"Reset"))))}}}]);