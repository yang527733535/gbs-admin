(window.webpackJsonp=window.webpackJsonp||[]).push([[16,27,76],{157:function(e,r,n){"use strict";n.r(r);var t=n(7),a=n.n(t),l=(n(77),n(28)),c=(n(149),n(59)),u=n(78),o=n.n(u),i=(n(216),n(89)),m=n(24),s=n.n(m),b=(n(290),n(107)),f=n(50),N=n.n(f),_=n(0),d=n.n(_),p=n(215),g="/Users/mrhh/Desktop/gbs-admin/src/pages/role-user/form/index.jsx",h=b.a.Item,E={labelCol:{span:7},wrapperCol:{span:17}},v={wrapperCol:{span:17,offset:7}};r.default=function(e){var r=e.closeModalAndReqTable,n=e.userListData,t=e.clickItem,u=Object(_.useRef)(),m=Object(_.useState)("default"),f=s()(m,2),y=f[0],x=(f[1],Object(_.useState)([])),k=s()(x,2),O=(k[0],k[1]);return console.log(t),Object(_.useEffect)((function(){u.current.setFieldsValue(t)}),[]),console.log(n),Object(_.useEffect)((function(){Object(p.k)().then((function(e){console.log("res: ",e);var r,n=e.data;r=n.map((function(e){return function e(r){var n=Array.isArray(r.region_children)&&r.region_children.length>0;return{key:String(r.region_id),value:String(r.region_id),label:r.region_name,children:n?r.region_children.map((function(r){return e(r)})):[]}}(e)})),console.log(r),O(r)}))}),[]),d.a.createElement("div",{style:{maxWidth:650},__source:{fileName:g,lineNumber:55,columnNumber:5}},d.a.createElement(b.a,a()({ref:u},E,{size:y,onSubmit:function(e){console.log(e)},onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:g,lineNumber:56,columnNumber:7}}),d.a.createElement(h,{field:"user_list",label:"添加用户",__source:{fileName:g,lineNumber:66,columnNumber:9}},d.a.createElement(i.a,{mode:"multiple",__source:{fileName:g,lineNumber:67,columnNumber:11}},n.map((function(e){return d.a.createElement(i.a.Option,{value:e.user_account,__source:{fileName:g,lineNumber:69,columnNumber:22}},e.user_name)})))),d.a.createElement(h,a()({},v,{__source:{fileName:g,lineNumber:73,columnNumber:9}}),d.a.createElement(l.a,{onClick:o()(N.a.mark((function e(){var n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.current){e.next=26;break}return e.prev=1,e.next=4,u.current.validate();case 4:if(null!==t){e.next=11;break}return console.log(u.current.getFields()),e.next=8,Object(p.c)(u.current.getFields());case 8:n=e.sent,e.next=17;break;case 11:return a=u.current.getFields(),console.log("param: ",a),a.store_code=t.store_code,e.next=16,Object(p.n)(a);case 16:n=e.sent;case 17:console.log("data: ",n),200===n.code&&(c.a.success("添加成功"),r()),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0),console.log(u.current.getFieldsError()),c.a.error("校验失败，请检查字段！");case 26:case"end":return e.stop()}}),e,null,[[1,21]])}))),type:"primary",style:{marginRight:24},__source:{fileName:g,lineNumber:74,columnNumber:11}},"提交"),d.a.createElement(l.a,{onClick:function(){u.current.resetFields()},__source:{fileName:g,lineNumber:106,columnNumber:11}},"重置"))))}},174:function(e,r,n){"use strict";n.r(r);n(578);var t=n(577),a=(n(569),n(576)),l=(n(612),n(628)),c=(n(570),n(575)),u=(n(571),n(573)),o=n(78),i=n.n(o),m=n(24),s=n.n(m),b=(n(150),n(79)),f=(n(77),n(28)),N=n(572),_=n.n(N),d=n(50),p=n.n(d),g=n(0),h=n.n(g),E=n(553),v=n.n(E),y=n(112),x=n(157),k="/Users/mrhh/Desktop/gbs-admin/src/pages/role-user/index.tsx";r.default=function(e){_()(e);var r=[{title:"名称",dataIndex:"label_zh"},{title:"字典编码",dataIndex:"dict_code"},{title:"操作",render:function(){return h.a.createElement(b.a,{__source:{fileName:k,lineNumber:21,columnNumber:11}},h.a.createElement(f.a,{size:"small",type:"primary",__source:{fileName:k,lineNumber:22,columnNumber:13}},"修改"),h.a.createElement(f.a,{status:"danger",size:"small",type:"primary",__source:{fileName:k,lineNumber:25,columnNumber:13}},"删除"))}}],n=Object(g.useState)(!1),o=s()(n,2),m=o[0],N=o[1],d=Object(g.useState)(null),E=s()(d,1)[0],O=Object(g.useState)([]),j=s()(O,1)[0],w=Object(g.useState)(""),S=s()(w,1)[0],C=Object(g.useState)([]),F=s()(C,2),I=F[0],A=F[1],R=Object(g.useState)([]),z=s()(R,2),D=z[0],B=z[1];Object(g.useEffect)((function(){V()}),[]),Object(g.useEffect)((function(){T()}),[]);var T=function(){var e=i()(p.a.mark((function e(){var r,n,t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={page:1,page_size:100},e.next=3,Object(y.d)(r);case 3:n=e.sent,t=n.data,console.log("data: ",t),B(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=i()(p.a.mark((function e(){var r,n,t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)();case 2:r=e.sent,n=r.data,t=function e(r){var n=Array.isArray(r.role_child)&&r.role_child.length>0;return{title:String(r.role_name),key:String(r.role_code),children:n?r.role_child.map((function(r){return e(r)})):[]}},[],a=n.map((function(e){return t(e)})),A(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return h.a.createElement("div",{className:v.a.container,__source:{fileName:k,lineNumber:71,columnNumber:5}},h.a.createElement(u.a,{title:null===E?"添加用户":"修改用户",footer:null,onCancel:function(){N(!1)},unmountOnExit:!0,style:{width:900,minWidth:900},visible:m,__source:{fileName:k,lineNumber:72,columnNumber:7}},h.a.createElement(x.default,{userListData:D,selectdict_code:S,clickItem:E,closeModalAndReqTable:function(){N(!1)},__source:{fileName:k,lineNumber:82,columnNumber:9}})),h.a.createElement(c.a,{style:{marginBottom:20},__source:{fileName:k,lineNumber:92,columnNumber:7}},h.a.createElement(c.a.Item,{__source:{fileName:k,lineNumber:93,columnNumber:9}},"权限管理"),h.a.createElement(c.a.Item,{__source:{fileName:k,lineNumber:94,columnNumber:9}},"角色分配")),h.a.createElement("div",{style:{display:"flex",width:"100%"},__source:{fileName:k,lineNumber:97,columnNumber:7}},h.a.createElement("div",{style:{width:200,marginRight:20},__source:{fileName:k,lineNumber:98,columnNumber:9}},h.a.createElement(a.a,{__source:{fileName:k,lineNumber:99,columnNumber:11}},h.a.createElement(l.a,{treeData:I,__source:{fileName:k,lineNumber:100,columnNumber:13}}))),h.a.createElement("div",{style:{flex:1},__source:{fileName:k,lineNumber:106,columnNumber:9}},h.a.createElement(a.a,{style:{height:"75vh",borderRadius:4},__source:{fileName:k,lineNumber:107,columnNumber:11}},h.a.createElement(f.a,{onClick:function(){N(!0)},style:{marginBottom:20},type:"primary",__source:{fileName:k,lineNumber:108,columnNumber:13}},"角色添加用户"),h.a.createElement("div",{__source:{fileName:k,lineNumber:117,columnNumber:13}},""!==S&&h.a.createElement(f.a,{onClick:function(){N(!0)},style:{marginBottom:20},type:"primary",__source:{fileName:k,lineNumber:119,columnNumber:17}},"添加字典")),h.a.createElement(t.a,{showHeader:!0,hover:!0,columns:r,data:j,__source:{fileName:k,lineNumber:130,columnNumber:13}})))))}},553:function(e,r,n){e.exports={container:"container-7edcc8ac54",toolbar:"toolbar-320e6a861f",operations:"operations-aa7ac05071"}}}]);