(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{376:function(e,r,a){"use strict";a.r(r),a.d(r,"default",(function(){return y}));a(65);var n=a(24),t=(a(112),a(36)),o=a(56),l=a.n(o),u=a(5),m=a.n(u),c=(a(698),a(699)),i=(a(335),a(254)),s=(a(113),a(41)),f=a(22),d=a.n(f),b=(a(252),a(73)),N=a(35),p=a.n(N),_=a(0),g=a.n(_),v=a(111),E=a(680),h="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/gameDetail/roomDetail/roomform.jsx",w=b.a.Item,k={labelCol:{span:5},wrapperCol:{span:17}},x={wrapperCol:{span:17,offset:5}};function y(e){var r=e.saveClickItem,a=e.store_code,o=e.modalType,u=e.closeModal,f=Object(_.useRef)(),N=Object(_.useState)(""),y=d()(N,2),C=y[0],j=y[1];Object(_.useEffect)((function(){"edit"===o&&(f.current.setFieldsValue(r),j(r.room_image))}),[]);return g.a.createElement("div",{__source:{fileName:h,lineNumber:47,columnNumber:5}},g.a.createElement(b.a,m()({ref:f},k,{onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:h,lineNumber:48,columnNumber:7}}),g.a.createElement(w,{label:"房间名称",field:"room_name",rules:[{required:!0,message:"请输入房间名称"}],__source:{fileName:h,lineNumber:49,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请输入房间名称",__source:{fileName:h,lineNumber:54,columnNumber:11}})),g.a.createElement(w,{label:"房间风格",field:"room_style",rules:[{required:!0,message:"请选择房间风格"}],__source:{fileName:h,lineNumber:56,columnNumber:9}}),g.a.createElement(w,{label:"房间备注",field:"room_note",rules:[{required:!0,message:"请输入房间备注"}],__source:{fileName:h,lineNumber:68,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请输入房间备注",__source:{fileName:h,lineNumber:73,columnNumber:11}})),g.a.createElement(b.a.Item,{label:"房间照片",field:"room_image",triggerPropName:"fileList",__source:{fileName:h,lineNumber:76,columnNumber:9}},g.a.createElement(c.a,{limit:1,renderUploadList:function(){return null},name:"role_cover",customRequest:function(e){var r=e.onProgress,a=e.onError,n=e.onSuccess,t=e.file,o=new XMLHttpRequest;o.upload&&(o.upload.onprogress=function(e){var a;e.total>0&&(a=e.loaded/e.total*100),r(parseInt(a,10),e)}),o.onerror=function(e){a(e)},o.onload=function(){o.status<200||o.status;var e=JSON.parse(o.responseText);j(e.data.file_url),n(e)};var l=new FormData;l.append("up_file",t),l.append("module","drama"),o.open("post","".concat(E.a,"/system/upload/image"),!0),o.setRequestHeader("Authorization",localStorage.getItem("token")),o.send(l)},onPreview:function(e){i.a.info({title:"Preview",content:g.a.createElement("img",{src:e.url||URL.createObjectURL(e.originFile),style:{maxWidth:"100%"},__source:{fileName:h,lineNumber:114,columnNumber:19}})})},__source:{fileName:h,lineNumber:77,columnNumber:11}})),""===C?null:g.a.createElement(b.a.Item,m()({},x,{__source:{fileName:h,lineNumber:124,columnNumber:11}}),g.a.createElement("img",{style:{width:212,height:300},src:C,alt:"",__source:{fileName:h,lineNumber:125,columnNumber:13}})),g.a.createElement(w,m()({},x,{__source:{fileName:h,lineNumber:129,columnNumber:9}}),g.a.createElement(n.a,{onClick:l()(p.a.mark((function e(){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.current){e.next=25;break}return e.prev=1,e.next=4,f.current.validate();case 4:if((r=f.current.getFields()).room_image=C,r.store_code=a,console.log(r),"add"!==o){e.next=13;break}return e.next=11,Object(v.A)(r);case 11:200===e.sent.code&&(t.a.info("提交成功！"),u());case 13:if("edit"!==o){e.next=18;break}return e.next=16,Object(v.I)(r);case 16:200===e.sent.code&&(t.a.info("修改成功！"),u());case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0),console.log(f.current.getFieldsError()),t.a.error("校验失败，请检查字段！");case 25:case"end":return e.stop()}}),e,null,[[1,20]])}))),type:"primary",style:{marginRight:24},__source:{fileName:h,lineNumber:130,columnNumber:11}},"提交"),g.a.createElement(n.a,{onClick:function(){f.current.resetFields()},__source:{fileName:h,lineNumber:166,columnNumber:11}},"重置"))))}},680:function(e,r,a){"use strict";a.d(r,"a",(function(){return n}));var n="http://dev-service.mengmohmg.com"}}]);