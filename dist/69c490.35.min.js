(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{173:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return z}));n(113);var a=n(40),r=(n(677),n(676)),l=(n(160),n(67)),u=n(4),c=n.n(u),o=(n(333),n(252)),i=(n(250),n(73)),m=(n(334),n(254)),s=(n(673),n(674)),b=(n(112),n(45)),_=(n(156),n(82)),f=(n(362),n(265)),p=(n(65),n(24)),N=n(56),d=n.n(N),g=(n(350),n(262)),v=n(22),O=n.n(v),E=(n(251),n(96)),h=n(35),y=n.n(h),j=n(0),x=n.n(j),w=n(111),S=n(697),I="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/storeDetail/storeDrama/index.tsx";function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=JSON.parse(localStorage.getItem("AllMaP")),T=E.a.Option;function z(e){var t=e.store_code,n=e.getStoreDetail,u=e.storeDetailInfo,c=u.store_drama,N=Object(j.useState)(null),v=O()(N,2),h=v[0],C=v[1],z=Object(j.useState)(!1),V=O()(z,2),D=V[0],F=V[1],B=Object(j.useState)(null),H=O()(B,2),J=H[0],L=H[1],K=Object(j.useState)(null),q=O()(K,2),A=q[0],M=q[1],R=Object(j.useState)(0),U=O()(R,2),W=U[0],G=U[1],Q=Object(j.useState)(0),X=O()(Q,2),Y=X[0],Z=X[1],$=Object(j.useState)(null),ee=O()($,2),te=ee[0],ne=ee[1],ae=Object(j.useState)(null),re=O()(ae,2),le=re[0],ue=re[1],ce=Object(j.useState)(!1),oe=O()(ce,2),ie=oe[0],me=oe[1],se=Object(j.useState)([]),be=O()(se,2),_e=be[0],fe=be[1],pe=Object(j.useState)(!1),Ne=O()(pe,2),de=Ne[0],ge=Ne[1],ve=Object(j.useState)({current:1,pageSize:10,total:1111}),Oe=O()(ve,2),Ee=Oe[0],he=Oe[1],ye=Object(j.useState)(c),je=O()(ye,2),xe=je[0],we=je[1],Se=Object(j.useState)({}),Ie=O()(Se,2),Ce=Ie[0],ke=Ie[1],Pe=Object(j.useState)([]),Te=O()(Pe,2),ze=Te[0],Ve=Te[1],De=Object(j.useState)([]),Fe=O()(De,2),Be=Fe[0],He=Fe[1],Je=Object(j.useState)([]),Le=O()(Je,2),Ke=Le[0],qe=Le[1],Ae=Object(j.useState)([]),Me=O()(Ae,2),Re=Me[0],Ue=Me[1],We=Object(j.useState)(),Ge=O()(We,2),Qe=Ge[0],Xe=Ge[1],Ye=Object(j.useState)(),Ze=O()(Ye,2),$e=Ze[0],et=Ze[1],tt=Object(j.useState)(),nt=O()(tt,2),at=nt[0],rt=nt[1],lt=Object(j.useState)(),ut=O()(lt,2),ct=ut[0],ot=ut[1],it=Object(j.useState)(),mt=O()(it,2),st=mt[0],bt=mt[1],_t=Object(j.useState)(),ft=O()(_t,2),pt=ft[0],Nt=ft[1];Object(j.useEffect)((function(){var e=Object(S.a)("app_gb_type"),t=new Object;e.forEach((function(e){t[e.label_value]=e.label_zh})),ke(t)}),[]),Object(j.useEffect)((function(){JSON.parse(localStorage.getItem("dicts")).forEach((function(e){"app_gb_type"===e.dict_code&&Ve(e.dict_label),"app_gb_text_tag"===e.dict_code&&qe(e.dict_label),"app_gb_status"===e.dict_code&&He(e.dict_label),"app_gb_status"===e.dict_code&&He(e.dict_label),"app_gb_level"===e.dict_code&&Ue(e.dict_label)}))}),[]),Object(j.useEffect)((function(){var e=u.store_drama;we(e)}),[u]);var dt=Object(j.useState)([]),gt=O()(dt,2),vt=gt[0],Ot=gt[1];Object(j.useEffect)((function(){var e=u.store_drama.reduce((function(e,t){return e.push(t.gb_code),e}),[]);Ot(e)}),[n]),Object(j.useEffect)((function(){yt()}),[]);var Et=[{title:"剧本标题",dataIndex:"gb_title"},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return x.a.createElement("span",{__source:{fileName:I,lineNumber:121,columnNumber:16}},Ce[e])}},{title:"工作日价格",dataIndex:"gb_price"},{title:"周末价格",dataIndex:"gb_price2"},{title:"是否启用",dataIndex:"is_enable",render:function(e){return 1===parseInt(e)?x.a.createElement(g.a,{status:"success",text:"启用中",__source:{fileName:I,lineNumber:137,columnNumber:18}}):0===parseInt(e)?x.a.createElement(g.a,{status:"error",text:"未启用",__source:{fileName:I,lineNumber:140,columnNumber:18}}):void 0}},{title:"剧本标签",dataIndex:"gb_custom_tag"},{title:"是否新本",dataIndex:"is_new",render:function(e){return 1===parseInt(e)?"是":"否"}},{title:"是否热门",dataIndex:"is_hot",render:function(e){return 1===parseInt(e)?"是":"否"}},{title:"剧本难度",dataIndex:"gb_level",render:function(e){return P.app_gb_level[e]}},{title:"剧本时长",dataIndex:"gb_hour",render:function(e){return e+"小时"}},{title:"玩家人数",dataIndex:"gb_people"},{title:"上架时间",dataIndex:"gb_add_time"},{title:"操作",render:function(e,n){return x.a.createElement(p.a,{disabled:vt.includes(n.gb_code),onClick:d()(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new Object).store_code=t.store_code,a.drama_array=[{gb_code:n.gb_code,gb_price:J||n.gb_price,gb_price2:A||n.gb_price2,is_hot:null==n?void 0:n.is_hot,is_new:null==n?void 0:n.is_new}],L(n.gb_price),M(n.gb_price2),console.log("item",n),ne(n),me(!0),ue(a);case 9:case"end":return e.stop()}}),e)}))),size:"mini",type:"primary",__source:{fileName:I,lineNumber:196,columnNumber:11}},"添加")}}],ht=[{title:"剧本标题",dataIndex:"gb_title"},{title:"工作日价格",dataIndex:"gb_price"},{title:"周末价格",dataIndex:"gb_price2"},{title:"是否新本",dataIndex:"is_new",render:function(e){return 1===parseInt(e)?"是":0===parseInt(e)?"否":void 0}},{title:"是否热门",dataIndex:"is_hot",render:function(e){return 1===parseInt(e)?"是":0===parseInt(e)?"否":void 0}},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return x.a.createElement("span",{__source:{fileName:I,lineNumber:276,columnNumber:16}},Ce[e])}},{title:"剧本标签",dataIndex:"gb_text_tag",render:function(e){var t=e.split(",");return x.a.createElement(_.a,{__source:{fileName:I,lineNumber:285,columnNumber:11}},t.map((function(e){return x.a.createElement(f.a,{__source:{fileName:I,lineNumber:287,columnNumber:22}},P.app_gb_text_tag[e])})))}},{title:"操作",render:function(e,a){return x.a.createElement(_.a,{__source:{fileName:I,lineNumber:297,columnNumber:11}},x.a.createElement(p.a,{onClick:function(){F(!0),C(a),console.log(a)},size:"mini",type:"primary",__source:{fileName:I,lineNumber:298,columnNumber:13}},"修改"),x.a.createElement(s.a,{title:"确定删除该剧本",onOk:d()(y.a.mark((function e(){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),r={store_code:t.store_code,gb_code:a.gb_code},e.next=4,Object(w.I)(r);case 4:200===e.sent.code&&(n(),b.a.success("删除成功"));case 6:case"end":return e.stop()}}),e)}))),__source:{fileName:I,lineNumber:309,columnNumber:13}},x.a.createElement(p.a,{size:"mini",status:"danger",__source:{fileName:I,lineNumber:324,columnNumber:15}},"删除")))}}];function yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.log("params: ",n);var a=Object(w.q)({page:e,page_size:t,gb_title:Qe,gb_people:$e,gb_type:at,gb_status:pt,gb_text_tag:ct,gb_level:st});ge(!0),a.then((function(e){ge(!1);var t=e.data,n=e.paginator;he({current:n.page,pageSize:n.page_size,total:n.total_count}),fe(t)}))}return x.a.createElement("div",{__source:{fileName:I,lineNumber:364,columnNumber:5}},x.a.createElement(o.a,{title:null==te?void 0:te.gb_title,visible:ie,onOk:d()(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le.drama_array[0].gb_price=J,le.drama_array[0].gb_price2=A,le.drama_array[0].is_new=W,le.drama_array[0].is_hot=Y,e.next=6,Object(w.O)(le);case 6:t=e.sent,console.log("res: ",t),200===t.code&&(n(),b.a.success("添加成功"),me(!1));case 9:case"end":return e.stop()}}),e)}))),unmountOnExit:!0,onCancel:function(){return me(!1)},autoFocus:!1,focusLock:!0,__source:{fileName:I,lineNumber:366,columnNumber:7}},x.a.createElement(i.a,{__source:{fileName:I,lineNumber:387,columnNumber:9}},x.a.createElement(i.a.Item,{label:"工作日价格",__source:{fileName:I,lineNumber:388,columnNumber:11}},x.a.createElement(m.a,{value:J,placeholder:"工作日价格",onChange:function(e){L(e)},__source:{fileName:I,lineNumber:389,columnNumber:13}})),x.a.createElement(i.a.Item,{label:"周末价格",__source:{fileName:I,lineNumber:397,columnNumber:11}},x.a.createElement(m.a,{style:{marginTop:10},value:A,placeholder:"周末价格",onChange:function(e){M(e)},__source:{fileName:I,lineNumber:398,columnNumber:13}})),x.a.createElement(i.a.Item,{label:"是否热门",__source:{fileName:I,lineNumber:407,columnNumber:11}},x.a.createElement(E.a,{style:{marginTop:10},value:Y,placeholder:"请选择是否热门",onChange:function(e){Z(e)},__source:{fileName:I,lineNumber:408,columnNumber:13}},x.a.createElement(E.a.Option,{value:0,__source:{fileName:I,lineNumber:416,columnNumber:15}},"否"),x.a.createElement(E.a.Option,{value:1,__source:{fileName:I,lineNumber:417,columnNumber:15}},"是"))),x.a.createElement(i.a.Item,{label:"是否新本",__source:{fileName:I,lineNumber:420,columnNumber:11}},x.a.createElement(E.a,{style:{marginTop:10},value:W,placeholder:"请选择是否新本",onChange:function(e){console.log(e),G(e)},__source:{fileName:I,lineNumber:421,columnNumber:13}},x.a.createElement(E.a.Option,{value:0,__source:{fileName:I,lineNumber:430,columnNumber:15}},"否"),x.a.createElement(E.a.Option,{value:1,__source:{fileName:I,lineNumber:431,columnNumber:15}},"是"))))),x.a.createElement(o.a,{title:null==te?void 0:te.gb_title,visible:D,unmountOnExit:!0,onCancel:function(){return F(!1)},autoFocus:!1,focusLock:!0,footer:null,__source:{fileName:I,lineNumber:438,columnNumber:7}},x.a.createElement(i.a,{onSubmit:function(){var e=d()(y.a.mark((function e(a){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k(k({},a),{},{gb_code:h.gb_code,store_code:t.store_code}),e.next=3,Object(w.K)(r);case 3:200===e.sent.code&&(F(!1),yt(),n()),console.log("param",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),initialValues:h,__source:{fileName:I,lineNumber:448,columnNumber:9}},x.a.createElement(i.a.Item,{field:"gb_price",label:"工作日价格",__source:{fileName:I,lineNumber:465,columnNumber:11}},x.a.createElement(m.a,{placeholder:"工作日价格",__source:{fileName:I,lineNumber:466,columnNumber:13}})),x.a.createElement(i.a.Item,{field:"gb_price2",label:"周末价格",__source:{fileName:I,lineNumber:468,columnNumber:11}},x.a.createElement(m.a,{style:{marginTop:10},placeholder:"周末价格",__source:{fileName:I,lineNumber:469,columnNumber:13}})),x.a.createElement(i.a.Item,{field:"is_hot",label:"是否热门",__source:{fileName:I,lineNumber:471,columnNumber:11}},x.a.createElement(E.a,{style:{marginTop:10},placeholder:"请选择是否热门",__source:{fileName:I,lineNumber:472,columnNumber:13}},x.a.createElement(E.a.Option,{value:0,__source:{fileName:I,lineNumber:473,columnNumber:15}},"否"),x.a.createElement(E.a.Option,{value:1,__source:{fileName:I,lineNumber:474,columnNumber:15}},"是"))),x.a.createElement(i.a.Item,{field:"is_new",label:"是否新本",__source:{fileName:I,lineNumber:477,columnNumber:11}},x.a.createElement(E.a,{style:{marginTop:10},placeholder:"请选择是否新本",__source:{fileName:I,lineNumber:478,columnNumber:13}},x.a.createElement(E.a.Option,{value:0,__source:{fileName:I,lineNumber:479,columnNumber:15}},"否"),x.a.createElement(E.a.Option,{value:1,__source:{fileName:I,lineNumber:480,columnNumber:15}},"是"))),x.a.createElement(i.a.Item,{__source:{fileName:I,lineNumber:483,columnNumber:11}},x.a.createElement(_.a,{__source:{fileName:I,lineNumber:484,columnNumber:13}},x.a.createElement(p.a,{style:{marginLeft:100},type:"primary",htmlType:"submit",__source:{fileName:I,lineNumber:485,columnNumber:15}},"修改"))))),x.a.createElement("div",{__source:{fileName:I,lineNumber:493,columnNumber:7}},x.a.createElement(l.a.Title,{heading:4,__source:{fileName:I,lineNumber:494,columnNumber:9}},"已添加的剧本"),x.a.createElement(r.a,{size:"small",columns:ht,data:xe,__source:{fileName:I,lineNumber:495,columnNumber:9}})),x.a.createElement("div",{__source:{fileName:I,lineNumber:497,columnNumber:7}},x.a.createElement(l.a.Title,{heading:4,__source:{fileName:I,lineNumber:498,columnNumber:9}},"剧本库"),x.a.createElement("div",{style:{width:"100%",marginBottom:10,display:"flex",justifyContent:"flex-ends"},__source:{fileName:I,lineNumber:499,columnNumber:9}},x.a.createElement(_.a,{style:{flex:1},wrap:!0,__source:{fileName:I,lineNumber:502,columnNumber:11}},x.a.createElement(a.a,{value:Qe,onChange:function(e){Xe(e)},placeholder:"请输入剧本标题",style:{width:200},__source:{fileName:I,lineNumber:503,columnNumber:13}}),x.a.createElement(a.a,{onChange:function(e){et(e)},value:$e,placeholder:"玩家人数",style:{width:200},__source:{fileName:I,lineNumber:511,columnNumber:13}}),x.a.createElement(E.a,{onChange:function(e){rt(e)},value:at,placeholder:"剧本类型",style:{width:200},__source:{fileName:I,lineNumber:519,columnNumber:13}},ze.map((function(e){return x.a.createElement(T,{key:e.label_value,value:e.label_value,__source:{fileName:I,lineNumber:529,columnNumber:19}},e.label_zh)}))),x.a.createElement(E.a,{onChange:function(e){bt(e)},value:st,placeholder:"剧本难度",style:{width:200},__source:{fileName:I,lineNumber:535,columnNumber:13}},Re.map((function(e){return x.a.createElement(T,{key:e.label_value,value:e.label_value,__source:{fileName:I,lineNumber:545,columnNumber:19}},e.label_zh)}))),x.a.createElement(E.a,{onChange:function(e){ot(e)},value:ct,placeholder:"剧本标签",style:{width:200},__source:{fileName:I,lineNumber:551,columnNumber:13}},Ke.map((function(e){return x.a.createElement(T,{key:e.label_value,value:e.label_value,__source:{fileName:I,lineNumber:561,columnNumber:19}},e.label_zh)}))),x.a.createElement(E.a,{onChange:function(e){Nt(e)},value:pt,placeholder:"剧本状态",style:{width:200},__source:{fileName:I,lineNumber:567,columnNumber:13}},Be.map((function(e){return x.a.createElement(T,{key:e.label_value,value:e.label_value,__source:{fileName:I,lineNumber:577,columnNumber:19}},e.label_zh)}))),x.a.createElement(p.a,{onClick:function(){Xe(null),rt(null),ot(null),et(null),Nt(null),bt(null)},__source:{fileName:I,lineNumber:583,columnNumber:13}},"重置"),x.a.createElement(p.a,{onClick:function(){yt()},type:"primary",__source:{fileName:I,lineNumber:595,columnNumber:13}},"搜索"))),x.a.createElement(r.a,{loading:de,onChange:function(e){var t=e.current,n=e.pageSize;he(e),yt(t,n)},rowKey:"store_id",size:"mini",pagination:Ee,data:_e,columns:Et,__source:{fileName:I,lineNumber:605,columnNumber:9}})))}},673:function(e,t,n){"use strict";n(17),n(65),n(115),n(336),n(685)},674:function(e,t,n){"use strict";var a=n(0),r=n.n(a),l=n(117),u=n(33),c=n(24),o=n(41),i=n(3),m=n(16),s=n(10),b=function(){return(b=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},_=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,l=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(a=l.next()).done;)u.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return u},p={position:"top",okType:"primary",icon:r.a.createElement(o.a,null),blurToHide:!0,unmountOnExit:!0,trigger:"click",escToClose:!0};var N=Object(a.forwardRef)((function(e,t){var n,o=Object(a.useContext)(i.a),N=o.getPrefixCls,d=o.locale,g=o.componentConfig,v=Object(s.a)(e,p,null==g?void 0:g.Popconfirm),O=v.style,E=v.className,h=v.children,y=v.position,j=v.getPopupContainer,x=v.blurToHide,w=v.unmountOnExit,S=v.trigger,I=v.escToClose,C=v.onVisibleChange,k=v.triggerProps,P=v.title,T=v.icon,z=v.okText,V=v.cancelText,D=v.okType,F=v.okButtonProps,B=v.cancelButtonProps,H=v.autoFocus,J=v.focusLock,L=_(v,["style","className","children","position","getPopupContainer","blurToHide","unmountOnExit","trigger","escToClose","onVisibleChange","triggerProps","title","icon","okText","cancelText","okType","okButtonProps","cancelButtonProps","autoFocus","focusLock"]),K=f(Object(m.a)(!1,{defaultValue:v.defaultPopupVisible,value:v.popupVisible}),2),q=K[0],A=K[1],M=f(Object(a.useState)(!1),2),R=M[0],U=M[1],W=N("popconfirm"),G=function(e){"popupVisible"in v||A(e),k&&k.onVisibleChange&&k.onVisibleChange(e),C&&C(e)},Q=function(){G(!1)},X=function(){Q(),v.onCancel&&v.onCancel()},Y=function(){var e,t=v.onOk||v.onConfirm;t&&(e=t()),e&&e.then&&(U(!0),e.then((function(){Q()}),(function(e){U(!1),console.error(e)}))),e||Q()};return Object(a.useEffect)((function(){return!q&&R&&U(!1),function(){U(!1)}}),[q]),r.a.createElement(u.a,b({},L,{ref:t,style:b({maxWidth:350},O),className:E,prefixCls:W,getPopupContainer:j,position:y,trigger:S,escToClose:I,popupVisible:q,content:(n=r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,b({onClick:X,size:"mini"},B),V||d.Popconfirm.cancelText),r.a.createElement(c.a,b({loading:R,onClick:Y,size:"mini",type:D},F),z||d.Popconfirm.okText)),r.a.createElement("div",{className:W+"-wrapper"},r.a.createElement("div",{className:W+"-title"},T&&r.a.createElement("span",{className:W+"-title-icon"},T),r.a.createElement("div",{className:W+"-title-text"},P)),r.a.createElement("div",{className:W+"-btn"},J?r.a.createElement(l.a,{disabled:!q,autoFocus:!!H},n):n))),unmountOnExit:w,blurToHide:x,popupHoverStay:!0,triggerProps:k,onVisibleChange:G,childrenPrefix:W}),"string"==typeof h?r.a.createElement("span",null,h):h)}));N.displayName="Popconfirm",t.a=N},685:function(e,t,n){},697:function(e,t,n){"use strict";function a(e){var t=JSON.parse(localStorage.getItem("dicts")),n=null;return t.forEach((function(t){t.dict_code===e&&(n=t.dict_label)})),n}n.d(t,"a",(function(){return a}))}}]);