(window.webpackJsonp=window.webpackJsonp||[]).push([[20,53],{281:function(e,a,r){"use strict";r.r(a);r(76);var l=r(27),m=(r(293),r(216)),t=(r(201),r(91)),n=(r(279),r(212)),u=(r(562),r(568)),c=(r(563),r(566)),o=(r(273),r(106)),i=(r(148),r(48)),s=r(23),b=r.n(s),N=r(0),f=r.n(N),p=r(31),d=r(88),_=r.n(d),E=r(50),h=r(32),F=r(522),v=r.n(F),g="/Users/mrhh/Desktop/gbs-admin/src/pages/step-form/base-info.tsx";a.default=function(){var e=Object(h.a)(),a=Object(p.c)((function(e){return e.stepForm})),r=Object(p.b)(),s=a.data,d=a.activeKeys,F=Object(N.useRef)(),y=Object(N.useState)([]),O=b()(y,2),w=O[0],I=O[1],j=Object(N.useState)([]),A=b()(j,2),z=A[0],k=A[1],C=function(e){_.a.get("/api/lineList",{params:{cluster:e}}).then((function(e){k(e.data||[]),!s.lineName&&e.data.length&&F.current&&F.current.setFieldValue("lineName",e.data[0].value)}))};return Object(N.useEffect)((function(){_.a.get("/api/clusterList").then((function(e){I(e.data||[])}))}),[]),Object(N.useEffect)((function(){F.current.setFieldsValue(s),s.cluster&&C(s.cluster[0])}),[s]),Object(N.useEffect)((function(){return function(){var e,a=(null===(e=F.current)||void 0===e?void 0:e.getFieldsValue())||{};r({type:E.UPDATE_FORM,payload:{data:a}})}}),[]),f.a.createElement(o.a,{className:v.a.form,ref:F,__source:{fileName:g,lineNumber:93,columnNumber:5}},f.a.createElement(u.a,{bordered:!1,activeKey:d,onChange:function(e,a){r({type:E.UPDATE_ACTIVE_KEYS,payload:{activeKeys:a}})},__source:{fileName:g,lineNumber:94,columnNumber:7}},f.a.createElement(u.a.Item,{name:"baseConfig",header:e["stepForm.collapse.title.base"],__source:{fileName:g,lineNumber:95,columnNumber:9}},f.a.createElement("div",{className:v.a["form-content"],__source:{fileName:g,lineNumber:96,columnNumber:11}},f.a.createElement(o.a.Item,{label:e["stepForm.form.label.name"],field:"name",rules:[{required:!0,message:e["stepForm.form.error.name.required"]},{match:/^[a-zA-z0-9][-a-zA-z0-9]{0,62}(\.[a-zA-z0-9][-a-zA-z0-9]{0,62})+$/,message:e["stepForm.form.error.name.pattern"]}],__source:{fileName:g,lineNumber:97,columnNumber:13}},f.a.createElement(i.a,{placeholder:e["stepForm.placeholder.name"],__source:{fileName:g,lineNumber:108,columnNumber:15}})),f.a.createElement(o.a.Item,{label:e["stepForm.form.label.purpose"],field:"purpose",rules:[{required:!0,message:e["stepForm.form.error.purpose.required"]}],__source:{fileName:g,lineNumber:110,columnNumber:13}},f.a.createElement(i.a,{placeholder:e["stepForm.placeholder.purpose"],__source:{fileName:g,lineNumber:115,columnNumber:15}})),f.a.createElement(o.a.Item,{label:e["stepForm.form.label.cluster"],field:"cluster",__source:{fileName:g,lineNumber:117,columnNumber:13}},f.a.createElement(c.a,{placeholder:e["stepForm.placeholder.cluster"],options:w,onChange:function(e){var a=Array.isArray(e)&&e[e.length-1];F.current&&F.current.setFieldValue("lineName",void 0),a?C(a):k([])},__source:{fileName:g,lineNumber:118,columnNumber:15}})))),f.a.createElement(u.a.Item,{name:"advanceConfig",header:e["stepForm.collapse.title.highLevel"],__source:{fileName:g,lineNumber:126,columnNumber:9}},f.a.createElement(n.a,{closable:!0,banner:!0,type:"warning",content:e["stepForm.alert.highLevel"],__source:{fileName:g,lineNumber:127,columnNumber:11}}),f.a.createElement("div",{className:v.a["form-content"],__source:{fileName:g,lineNumber:128,columnNumber:11}},f.a.createElement(o.a.Item,{label:e["stepForm.form.label.type"],field:"type",__source:{fileName:g,lineNumber:129,columnNumber:13}},f.a.createElement(t.a,{placeholder:e["stepForm.placeholder.type"],__source:{fileName:g,lineNumber:130,columnNumber:15}},f.a.createElement(t.a.Option,{value:"web",__source:{fileName:g,lineNumber:131,columnNumber:17}},e["stepForm.label.type.web"]),f.a.createElement(t.a.Option,{value:"api",__source:{fileName:g,lineNumber:132,columnNumber:17}},e["stepForm.label.type.api"]))),f.a.createElement(o.a.Item,{label:e["stepForm.form.label.dns"],field:"dns",triggerPropName:"checked",__source:{fileName:g,lineNumber:135,columnNumber:13}},f.a.createElement(m.a,{__source:{fileName:g,lineNumber:140,columnNumber:15}})),f.a.createElement(o.a.Item,{label:e["stepForm.form.label.subDomain"],field:"subDomain",triggerPropName:"checked",__source:{fileName:g,lineNumber:142,columnNumber:13}},f.a.createElement(m.a,{__source:{fileName:g,lineNumber:147,columnNumber:15}})),f.a.createElement(o.a.Item,{label:e["stepForm.form.label.lineName"],field:"lineName",__source:{fileName:g,lineNumber:149,columnNumber:13}},f.a.createElement(t.a,{placeholder:e["stepForm.placeholder.lineName"],__source:{fileName:g,lineNumber:150,columnNumber:15}},z.map((function(e){return f.a.createElement(t.a.Option,{value:e.value,key:"".concat(e.value),__source:{fileName:g,lineNumber:152,columnNumber:19}},e.label)}))))))),f.a.createElement("div",{className:v.a.actions,__source:{fileName:g,lineNumber:161,columnNumber:7}},f.a.createElement(l.a,{type:"primary",onClick:function(){F.current.validate().then((function(){r({type:E.GO_NEXT})}))},__source:{fileName:g,lineNumber:162,columnNumber:9}},e["stepForm.button.next"])))}},522:function(e,a,r){e.exports={container:"container-6427058b85",wrapper:"wrapper-1eba4af8b8",steps:"steps-79df5ed959",form:"form-2a6f8eda19","form-content":"form-content-96ca552934",actions:"actions-df2cdcf708"}}}]);