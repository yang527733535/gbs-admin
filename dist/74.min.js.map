{"version":3,"file":"74.min.js","sources":["webpack:///./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/icon/react-icon/IconDelete/index.js","webpack:///./src/pages/stocks-store/storeDetail/staffDetail/staffform.jsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext } from 'react';\nimport { IconContext } from '../context';\n\nfunction IconDeleteComponent(iconProps, ref) {\n  var _useContext = useContext(IconContext),\n      prefixCls = _useContext.prefixCls;\n\n  var spin = iconProps.spin,\n      className = iconProps.className;\n\n  var props = _objectSpread(_objectSpread({\n    ref: ref\n  }, iconProps), {}, {\n    className: \"\".concat(className ? className + ' ' : '').concat(prefixCls, \"-icon \").concat(prefixCls, \"-icon-delete\")\n  });\n\n  if (spin) {\n    props.className = \"\".concat(props.className, \" \").concat(prefixCls, \"-icon-loading\");\n  }\n\n  delete props.spin;\n  delete props.isIcon;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"4\",\n    viewBox: \"0 0 48 48\",\n    width: \"1em\",\n    height: \"1em\"\n  }, props), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5 11h5.5m0 0v29a1 1 0 0 0 1 1h25a1 1 0 0 0 1-1V11m-27 0H16m21.5 0H43m-5.5 0H32m-16 0V7h16v4m-16 0h16M20 18v15m8-15v15\"\n  }));\n}\n\nvar IconDelete = /*#__PURE__*/React.forwardRef(IconDeleteComponent);\nIconDelete.defaultProps = {\n  isIcon: true\n};\nIconDelete.displayName = 'IconDelete';\nexport default IconDelete;","import _extends from \"@babel/runtime/helpers/extends\";\nimport \"@arco-design/web-react/es/Message/style\";\nimport _Message from \"@arco-design/web-react/es/Message\";\nimport \"@arco-design/web-react/es/Space/style\";\nimport _Space from \"@arco-design/web-react/es/Space\";\nimport \"@arco-design/web-react/es/Button/style\";\nimport _Button from \"@arco-design/web-react/es/Button\";\nimport _IconDelete from \"@arco-design/web-react/icon/react-icon/IconDelete\";\nimport \"@arco-design/web-react/es/Select/style\";\nimport _Select from \"@arco-design/web-react/es/Select\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport \"@arco-design/web-react/es/Form/style\";\nimport _Form from \"@arco-design/web-react/es/Form\";\nvar _jsxFileName = \"/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/storeDetail/staffDetail/staffform.jsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport { reqBindStaff, getUserList, reqEditRoom } from '../../../../api/drama.js';\nvar FormItem = _Form.Item;\nvar formItemLayout = {\n  labelCol: {\n    span: 5\n  },\n  wrapperCol: {\n    span: 17\n  }\n};\nvar noLabelLayout = {\n  wrapperCol: {\n    span: 17,\n    offset: 5\n  }\n};\nexport default function RoomForm(_ref) {\n  var store_code = _ref.store_code,\n      closeModal = _ref.closeModal;\n  var formRef = useRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      userList = _useState2[0],\n      setuserList = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      roleList = _useState4[0],\n      setroleList = _useState4[1];\n\n  useEffect(function () {\n    getUser();\n  }, []);\n\n  var getUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getUserList();\n\n            case 2:\n              data = _context.sent;\n              setuserList(data.data);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getUser() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // dicts\n\n\n  useEffect(function () {\n    var data = JSON.parse(localStorage.getItem('dicts'));\n    data.forEach(function (element) {\n      if (element.dict_code === 'store_user_role') {\n        setroleList(element.dict_label);\n      }\n    });\n  }, []);\n\n  var onValuesChange = function onValuesChange(changeValue, values) {\n    console.log('onValuesChange: ', changeValue, values);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Form, _extends({\n    ref: formRef\n  }, formItemLayout, {\n    onValuesChange: onValuesChange,\n    scrollToFirstError: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(_Form.List, {\n    field: \"user_array\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, function (fields, _ref3) {\n    var add = _ref3.add,\n        remove = _ref3.remove,\n        move = _ref3.move;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 15\n      }\n    }, fields.map(function (item, index) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: item.key,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: '店员' + (index + 1),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(_Space, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        field: item.field + '.user_account',\n        rules: [{\n          required: true\n        }],\n        noStyle: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u8BF7\\u9009\\u62E9\\u8D26\\u53F7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 29\n        }\n      }, userList === null || userList === void 0 ? void 0 : userList.map(function (_ref4) {\n        var user_account = _ref4.user_account,\n            user_name = _ref4.user_name;\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          value: user_account,\n          key: user_account,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 35\n          }\n        }, user_name);\n      }))), /*#__PURE__*/React.createElement(_Form.Item, {\n        field: item.field + '.user_role',\n        rules: [{\n          required: true\n        }],\n        noStyle: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u8BF7\\u9009\\u62E9\\u89D2\\u8272\\u7F16\\u7801...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 29\n        }\n      }, roleList === null || roleList === void 0 ? void 0 : roleList.map(function (_ref5) {\n        var label_zh = _ref5.label_zh,\n            label_value = _ref5.label_value;\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          value: label_value,\n          key: label_value,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 35\n          }\n        }, label_zh);\n      }))), /*#__PURE__*/React.createElement(_Button, {\n        icon: /*#__PURE__*/React.createElement(_IconDelete, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 35\n          }\n        }),\n        shape: \"circle\",\n        status: \"danger\",\n        onClick: function onClick() {\n          return remove(index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 27\n        }\n      }))));\n    }), /*#__PURE__*/React.createElement(_Form.Item, {\n      wrapperCol: {\n        offset: 5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      onClick: function onClick() {\n        add();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }\n    }, \"\\u6DFB\\u52A0\\u5E97\\u5458\")));\n  }), /*#__PURE__*/React.createElement(FormItem, _extends({}, noLabelLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(_Button, {\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var param, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!formRef.current) {\n                _context2.next = 18;\n                break;\n              }\n\n              _context2.prev = 1;\n              _context2.next = 4;\n              return formRef.current.validate();\n\n            case 4:\n              param = formRef.current.getFields();\n              param.store_code = store_code;\n              console.log(param);\n              _context2.next = 9;\n              return reqBindStaff(param);\n\n            case 9:\n              res = _context2.sent;\n\n              if (res.code === 200) {\n                _Message.info('修改成功！');\n\n                closeModal();\n              }\n\n              _context2.next = 18;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(_context2.t0);\n              console.log(formRef.current.getFieldsError());\n\n              _Message.error('校验失败，请检查字段！');\n\n            case 18:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 13]]);\n    })),\n    type: \"primary\",\n    style: {\n      marginRight: 24\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, \"\\u63D0\\u4EA4\"), /*#__PURE__*/React.createElement(_Button, {\n    onClick: function onClick() {\n      formRef.current.resetFields();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, \"\\u91CD\\u7F6E\"))));\n}"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}