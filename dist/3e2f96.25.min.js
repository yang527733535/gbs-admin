(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{167:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));n(634);var r=n(633),a=(n(155),n(63)),o=(n(625),n(626)),c=(n(77),n(30)),i=(n(148),n(52)),l=n(78),u=n.n(l),s=(n(333),n(243)),m=n(24),d=n.n(m),p=n(51),f=n.n(p),b=n(0),g=n.n(b),_=n(230),N=n(651),v="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/storeDetail/storeDrama/index.tsx";function x(e){var t=e.store_code,n=e.getStoreDetail,l=e.storeDetailInfo,m=l.store_drama,p=Object(b.useState)([]),x=d()(p,2),O=x[0],E=x[1],h=Object(b.useState)(!1),y=d()(h,2),j=y[0],C=y[1],k=Object(b.useState)({current:1,pageSize:10,total:1111}),I=d()(k,2),P=I[0],w=I[1],T=Object(b.useState)(m),S=d()(T,2),z=S[0],V=S[1],D=Object(b.useState)({}),H=d()(D,2),B=H[0],F=H[1];Object(b.useEffect)((function(){var e=Object(N.a)("app_gb_type"),t=new Object;e.forEach((function(e){t[e.label_value]=e.label_zh})),F(t)}),[]),Object(b.useEffect)((function(){var e=l.store_drama;V(e)}),[l]);var J=Object(b.useState)([]),L=d()(J,2),R=L[0],U=L[1];Object(b.useEffect)((function(){var e=l.store_drama.reduce((function(e,t){return e.push(t.gb_code),e}),[]);U(e)}),[n]),Object(b.useEffect)((function(){A()}),[]);var W=[{title:"剧本标题",dataIndex:"gb_title"},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return g.a.createElement("span",{__source:{fileName:v,lineNumber:58,columnNumber:16}},B[e])}},{title:"价格",dataIndex:"gb_price"},{title:"是否启用",dataIndex:"is_enable",render:function(e){return 1===parseInt(e)?g.a.createElement(s.a,{status:"success",text:"启用中",__source:{fileName:v,lineNumber:70,columnNumber:18}}):0===parseInt(e)?g.a.createElement(s.a,{status:"error",text:"未启用",__source:{fileName:v,lineNumber:73,columnNumber:18}}):void 0}},{title:"剧本标签",dataIndex:"gb_custom_tag"},{title:"是否新本",dataIndex:"is_new",render:function(e){return 1===parseInt(e)?"是":"否"}},{title:"是否热门",dataIndex:"is_hot",render:function(e){return 1===parseInt(e)?"是":"否"}},{title:"剧本难度",dataIndex:"gb_level"},{title:"剧本时长",dataIndex:"gb_hour",render:function(e){return e+"小时"}},{title:"玩家人数",dataIndex:"gb_people"},{title:"上架时间",dataIndex:"gb_add_time"},{title:"操作",render:function(e,r){return g.a.createElement(c.a,{disabled:R.includes(r.gb_code),onClick:u()(f.a.mark((function e(){var a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Object).store_code=t.store_code,a.drama_array=[{gb_code:r.gb_code,gb_price:r.gb_price}],e.next=5,Object(_.C)(a);case 5:o=e.sent,console.log("res: ",o),200===o.code&&(n(),i.a.success("添加成功"));case 8:case"end":return e.stop()}}),e)}))),size:"mini",type:"primary",__source:{fileName:v,lineNumber:126,columnNumber:11}},"添加")}}],q=[{title:"剧本标题",dataIndex:"gb_title"},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return g.a.createElement("span",{__source:{fileName:v,lineNumber:165,columnNumber:16}},B[e])}},{title:"剧本标签",dataIndex:"gb_text_tag"},{title:"操作",render:function(e,r){return g.a.createElement(o.a,{title:"确定删除该剧本",onOk:u()(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),a={store_code:t.store_code,gb_code:r.gb_code},e.next=4,Object(_.z)(a);case 4:200===e.sent.code&&(n(),i.a.success("删除成功"));case 6:case"end":return e.stop()}}),e)}))),__source:{fileName:v,lineNumber:176,columnNumber:11}},g.a.createElement(c.a,{size:"mini",status:"danger",__source:{fileName:v,lineNumber:191,columnNumber:13}},"删除"))}}];function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.log("params: ",n);var r=Object(_.l)({page:e,page_size:t});C(!0),r.then((function(e){C(!1);var t=e.data,n=e.paginator;w({current:n.page,pageSize:n.page_size,total:n.total_count}),E(t)}))}return g.a.createElement("div",{__source:{fileName:v,lineNumber:224,columnNumber:5}},g.a.createElement("div",{__source:{fileName:v,lineNumber:225,columnNumber:7}},g.a.createElement(a.a.Title,{heading:4,__source:{fileName:v,lineNumber:226,columnNumber:9}},"已添加的剧本"),g.a.createElement(r.a,{size:"small",columns:q,data:z,__source:{fileName:v,lineNumber:227,columnNumber:9}})),g.a.createElement("div",{__source:{fileName:v,lineNumber:229,columnNumber:7}},g.a.createElement(a.a.Title,{heading:4,__source:{fileName:v,lineNumber:230,columnNumber:9}},"剧本库"),g.a.createElement(r.a,{loading:j,onChange:function(e){var t=e.current,n=e.pageSize;w(e),A(t,n)},key:"store_id",size:"mini",pagination:P,data:O,columns:W,__source:{fileName:v,lineNumber:231,columnNumber:9}})))}},625:function(e,t,n){"use strict";n(17),n(77),n(105),n(315),n(632)},626:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(234),c=n(33),i=n(30),l=n(47),u=n(3),s=n(15),m=n(9),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},b={position:"top",okType:"primary",icon:a.a.createElement(l.a,null),blurToHide:!0,unmountOnExit:!0,trigger:"click",escToClose:!0};var g=Object(r.forwardRef)((function(e,t){var n,l=Object(r.useContext)(u.a),g=l.getPrefixCls,_=l.locale,N=l.componentConfig,v=Object(m.a)(e,b,null==N?void 0:N.Popconfirm),x=v.style,O=v.className,E=v.children,h=v.position,y=v.getPopupContainer,j=v.blurToHide,C=v.unmountOnExit,k=v.trigger,I=v.escToClose,P=v.onVisibleChange,w=v.triggerProps,T=v.title,S=v.icon,z=v.okText,V=v.cancelText,D=v.okType,H=v.okButtonProps,B=v.cancelButtonProps,F=v.autoFocus,J=v.focusLock,L=p(v,["style","className","children","position","getPopupContainer","blurToHide","unmountOnExit","trigger","escToClose","onVisibleChange","triggerProps","title","icon","okText","cancelText","okType","okButtonProps","cancelButtonProps","autoFocus","focusLock"]),R=f(Object(s.a)(!1,{defaultValue:v.defaultPopupVisible,value:v.popupVisible}),2),U=R[0],W=R[1],q=f(Object(r.useState)(!1),2),A=q[0],G=q[1],K=g("popconfirm"),M=function(e){"popupVisible"in v||W(e),w&&w.onVisibleChange&&w.onVisibleChange(e),P&&P(e)},Q=function(){M(!1)},X=function(){Q(),v.onCancel&&v.onCancel()},Y=function(){var e,t=v.onOk||v.onConfirm;t&&(e=t()),e&&e.then&&(G(!0),e.then((function(){Q()}),(function(e){G(!1),console.error(e)}))),e||Q()};return Object(r.useEffect)((function(){return!U&&A&&G(!1),function(){G(!1)}}),[U]),a.a.createElement(c.a,d({},L,{ref:t,style:d({maxWidth:350},x),className:O,prefixCls:K,getPopupContainer:y,position:h,trigger:k,escToClose:I,popupVisible:U,content:(n=a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,d({onClick:X,size:"mini"},B),V||_.Popconfirm.cancelText),a.a.createElement(i.a,d({loading:A,onClick:Y,size:"mini",type:D},H),z||_.Popconfirm.okText)),a.a.createElement("div",{className:K+"-wrapper"},a.a.createElement("div",{className:K+"-title"},S&&a.a.createElement("span",{className:K+"-title-icon"},S),a.a.createElement("div",{className:K+"-title-text"},T)),a.a.createElement("div",{className:K+"-btn"},J?a.a.createElement(o.a,{disabled:!U,autoFocus:!!F},n):n))),unmountOnExit:C,blurToHide:j,popupHoverStay:!0,triggerProps:w,onVisibleChange:M,childrenPrefix:K}),"string"==typeof E?a.a.createElement("span",null,E):E)}));g.displayName="Popconfirm",t.a=g},632:function(e,t,n){},651:function(e,t,n){"use strict";function r(e){var t=JSON.parse(localStorage.getItem("dicts")),n=null;return t.forEach((function(t){t.dict_code===e&&(n=t.dict_label)})),n}n.d(t,"a",(function(){return r}))}}]);