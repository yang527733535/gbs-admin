(window.webpackJsonp=window.webpackJsonp||[]).push([[39,150],{172:function(e,r,l){"use strict";l.r(r),l.d(r,"default",(function(){return w}));l(65);var a=l(24),n=(l(112),l(45)),u=(l(675),l(674)),m=(l(693),l(694)),t=(l(250),l(159)),c=(l(113),l(40)),o=l(56),i=l.n(o),s=l(22),N=l.n(s),b=(l(247),l(73)),_=l(35),f=l.n(_),d=l(0),p=l.n(d),g=l(635),E=l.n(g),h=l(111),x="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/storeDetail/baseDetail/index.tsx";function w(e){var r=e.storeDetailInfo,l=e.closeDrawer,o=e.modalType,s=b.a.Item,_=Object(d.useRef)(),g=Object(d.useState)([]),w=N()(g,2),v=w[0],y=w[1];Object(d.useEffect)((function(){k()}),[]);var k=function(){var e=i()(f.a.mark((function e(){var r,l,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null!==localStorage.getItem("regions")){e.next=9;break}return e.next=4,Object(h.x)();case 4:l=e.sent,r=l.data,localStorage.setItem("regions",JSON.stringify(r)),e.next=10;break;case 9:r=JSON.parse(localStorage.getItem("regions"));case 10:a=function e(r){var l=Array.isArray(r.region_children)&&r.region_children.length>0;return{key:String(r.region_id),value:String(r.region_id),label:r.region_name,children:l?r.region_children.map((function(r){return e(r)})):[]}},[],n=r.map((function(e){return a(e)})),y(n);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){"edit"===o&&_.current.setFieldsValue(r)}),[r]),p.a.createElement("div",{__source:{fileName:x,lineNumber:46,columnNumber:5}},p.a.createElement(b.a,{layout:"vertical",ref:_,className:E.a["form-group"],__source:{fileName:x,lineNumber:47,columnNumber:7}},p.a.createElement(t.a.Row,{gutter:80,__source:{fileName:x,lineNumber:48,columnNumber:9}},p.a.createElement(t.a.Col,{span:6,__source:{fileName:x,lineNumber:49,columnNumber:11}},p.a.createElement(s,{label:"店铺名称",field:"store_name",rules:[{required:!0,message:"请填写店铺名称"}],__source:{fileName:x,lineNumber:50,columnNumber:13}},p.a.createElement(c.a,{placeholder:"请填写店铺名称...",__source:{fileName:x,lineNumber:55,columnNumber:15}}))),p.a.createElement(t.a.Col,{span:6,__source:{fileName:x,lineNumber:58,columnNumber:11}},p.a.createElement(s,{rules:[{required:!0,message:"请填写店铺地区"}],field:"position_index",label:"店铺地区",__source:{fileName:x,lineNumber:59,columnNumber:13}},p.a.createElement(m.a,{showSearch:!0,placeholder:"请选择店铺地区",allowClear:!0,options:v,__source:{fileName:x,lineNumber:64,columnNumber:15}}))),p.a.createElement(t.a.Col,{span:6,__source:{fileName:x,lineNumber:73,columnNumber:11}},p.a.createElement(s,{label:"详细地址",field:"position_address",rules:[{required:!0,message:"请填写详细地址"}],__source:{fileName:x,lineNumber:74,columnNumber:13}},p.a.createElement(c.a,{placeholder:"请填写详细地址...",__source:{fileName:x,lineNumber:79,columnNumber:15}}))),p.a.createElement(t.a.Col,{span:6,__source:{fileName:x,lineNumber:82,columnNumber:11}},p.a.createElement(s,{label:"手机号码",field:"store_mobile",rules:[{required:!0,message:"请填写店铺手机号码"}],__source:{fileName:x,lineNumber:83,columnNumber:13}},p.a.createElement(c.a,{placeholder:"请填写店铺手机号码...",__source:{fileName:x,lineNumber:88,columnNumber:15}}))),p.a.createElement(t.a.Col,{span:6,__source:{fileName:x,lineNumber:91,columnNumber:11}},p.a.createElement(s,{label:"电话号码",field:"store_phone",rules:[{required:!1,message:"请填写店铺电话号码"}],__source:{fileName:x,lineNumber:92,columnNumber:13}},p.a.createElement(c.a,{placeholder:"请填写店铺电话号码...",__source:{fileName:x,lineNumber:97,columnNumber:15}}))),p.a.createElement(t.a.Col,{span:6,__source:{fileName:x,lineNumber:100,columnNumber:11}},p.a.createElement(s,{label:"门店级别",field:"store_level",rules:[{required:!1,message:"请填写门店级别"}],__source:{fileName:x,lineNumber:101,columnNumber:13}},p.a.createElement(c.a,{placeholder:"请填写门店级别...",__source:{fileName:x,lineNumber:106,columnNumber:15}}))),p.a.createElement(t.a.Col,{span:6,__source:{fileName:x,lineNumber:109,columnNumber:11}},p.a.createElement(s,{label:"开业日期",field:"open_date",rules:[{required:!0,message:"请填写开业日期"}],__source:{fileName:x,lineNumber:110,columnNumber:13}},p.a.createElement(u.a,{showTime:!0,__source:{fileName:x,lineNumber:120,columnNumber:15}}))),p.a.createElement(t.a.Col,{span:6,__source:{fileName:x,lineNumber:123,columnNumber:11}},p.a.createElement(s,{label:"门店类型",field:"store_type",rules:[{required:!1,message:"请填写门店类型"}],__source:{fileName:x,lineNumber:124,columnNumber:13}},p.a.createElement(c.a,{placeholder:"请填写门店类型...",__source:{fileName:x,lineNumber:129,columnNumber:15}})))),p.a.createElement(t.a.Row,{gutter:80,__source:{fileName:x,lineNumber:133,columnNumber:9}},p.a.createElement(t.a.Col,{span:6,__source:{fileName:x,lineNumber:134,columnNumber:11}},p.a.createElement(s,{label:"经度坐标",field:"position_x",rules:[{required:!0,message:"请填写经度坐标"}],__source:{fileName:x,lineNumber:135,columnNumber:13}},p.a.createElement(c.a,{placeholder:"请填写经度坐标...",__source:{fileName:x,lineNumber:140,columnNumber:15}}))),p.a.createElement(t.a.Col,{span:6,__source:{fileName:x,lineNumber:143,columnNumber:11}},p.a.createElement(s,{label:"纬度坐标",field:"position_y",rules:[{required:!0,message:"请填写纬度坐标"}],__source:{fileName:x,lineNumber:144,columnNumber:13}},p.a.createElement(c.a,{placeholder:"请填写纬度坐标...",__source:{fileName:x,lineNumber:149,columnNumber:15}})))),p.a.createElement(t.a.Row,{justify:"end",__source:{fileName:x,lineNumber:153,columnNumber:9}},p.a.createElement(s,{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},__source:{fileName:x,lineNumber:154,columnNumber:11}},p.a.createElement(a.a,{onClick:i()(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.current){e.next=26;break}return e.prev=1,e.next=4,_.current.validate();case 4:if("add"!==o){e.next=12;break}return console.log(_.current.getFields()),e.next=8,Object(h.l)(_.current.getFields());case 8:200===e.sent.code&&(n.a.success("添加成功"),l()),e.next=19;break;case 12:return a=_.current.getFields(),console.log("param: ",a),a.store_code=r.store_code,e.next=17,Object(h.P)(a);case 17:200===e.sent.code&&(n.a.success("修改成功"),l());case 19:e.next=26;break;case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0),console.log(_.current.getFieldsError()),n.a.error("校验失败，请检查字段！");case 26:case"end":return e.stop()}}),e,null,[[1,21]])}))),type:"primary",style:{marginRight:24},__source:{fileName:x,lineNumber:162,columnNumber:13}},"提交"),p.a.createElement(a.a,{onClick:function(){_.current.resetFields()},__source:{fileName:x,lineNumber:196,columnNumber:13}},"重置")))))}},635:function(e,r,l){}}]);