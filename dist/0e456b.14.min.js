(window.webpackJsonp=window.webpackJsonp||[]).push([[14,28,53,78],{158:function(e,r,l){"use strict";l.r(r);var a=l(7),t=l.n(a),n=(l(77),l(28)),u=(l(149),l(59)),m=l(78),c=l.n(m),o=(l(589),l(587)),i=(l(605),l(609)),s=(l(293),l(218)),b=(l(217),l(89)),_=(l(606),l(608)),N=(l(574),l(576)),f=(l(148),l(49)),d=l(5),p=l.n(d),g=l(24),E=l.n(g),h=(l(292),l(106)),v=l(50),y=l.n(v),O=l(0),j=l.n(O),w=l(216),x="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/form/index.jsx";function P(e,r){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),l.push.apply(l,a)}return l}function T(e){for(var r=1;r<arguments.length;r++){var l=null!=arguments[r]?arguments[r]:{};r%2?P(Object(l),!0).forEach((function(r){p()(e,r,l[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):P(Object(l)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(l,r))}))}return e}var D=h.a.Item,S={labelCol:{span:7},wrapperCol:{span:17}},k={wrapperCol:{span:17,offset:7}};r.default=function(e){var r,l,a,m,d=e.labelData;console.log("labelData: ",d);var p=Object(O.useRef)(),g=Object(O.useState)(null),v=E()(g,2),P=(v[0],v[1]),q=Object(O.useState)("default"),I=E()(q,2),A=I[0],C=(I[1],Object(O.useState)([])),z=E()(C,2),R=z[0],U=z[1],F=Object(O.useState)([]),L=E()(F,2),M=L[0],G=L[1],J=Object(O.useState)([]),H=E()(J,2),W=(H[0],H[1]),B=Object(O.useState)([]),V=E()(B,2),K=V[0],X=V[1],Q=Object(O.useState)([]),Y=E()(Q,2),Z=Y[0],$=Y[1];return Object(O.useEffect)((function(){for(var e=0;e<d.length;e++){var r=d[e];"app_gb_type"===r.dict_code&&U(r),"app_gb_level"===r.dict_code&&G(r),"app_gb_people"===r.dict_code&&W(r),"app_gb_text_tag"===r.dict_code&&X(r),"app_gb_status"===r.dict_code&&$(r)}}),[]),j.a.createElement("div",{style:{maxWidth:650},__source:{fileName:x,lineNumber:77,columnNumber:5}},j.a.createElement(h.a,t()({ref:p},S,{size:A,onSubmit:function(e){var r=T(T({},e),{},{gb_cover:e.gb_cover.response.data.file_url});console.log(r)},onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:x,lineNumber:78,columnNumber:7}}),j.a.createElement(D,{label:"剧本名称",field:"gb_title",rules:[{required:!0,message:"请填写剧本名称"}],__source:{fileName:x,lineNumber:92,columnNumber:9}},j.a.createElement(f.a,{placeholder:"请填写剧本名称...",__source:{fileName:x,lineNumber:97,columnNumber:11}})),j.a.createElement(h.a.Item,{rules:[{required:!0,message:"请上传剧本封面"}],label:"剧本封面",field:"gb_cover",triggerPropName:"gb_cover",__source:{fileName:x,lineNumber:99,columnNumber:9}},j.a.createElement(_.a,{listType:"picture-card",multiple:!0,name:"gb_cover",customRequest:function(e){console.log(e);var r=e.onProgress,l=e.onError,a=e.onSuccess,t=e.file;console.log("file: ",t);var n=new XMLHttpRequest;n.upload&&(n.upload.onprogress=function(e){var l;e.total>0&&(l=e.loaded/e.total*100),r(parseInt(l,10),e)}),n.onerror=function(e){l(e)},n.onload=function(){if(n.status<200||n.status>=300)return l(n.responseText);P(JSON.parse(n.responseText)),a(JSON.parse(n.responseText),n)};var u=new FormData;u.append("up_file",t),u.append("module","drama"),n.open("post","http://120.24.188.169:8000/system/upload/image",!0),n.setRequestHeader("Authorization",localStorage.getItem("token")),n.send(u)},onPreview:function(e){N.a.info({title:"Preview",content:j.a.createElement("img",{src:e.url||URL.createObjectURL(e.originFile),style:{maxWidth:"100%"},__source:{fileName:x,lineNumber:144,columnNumber:19}})})},__source:{fileName:x,lineNumber:105,columnNumber:11}})),j.a.createElement(D,{label:"剧本类型",field:"gb_type",rules:[{required:!0,message:"请填写剧本类型"}],__source:{fileName:x,lineNumber:153,columnNumber:9}},j.a.createElement(b.a,{placeholder:"请选择剧本类型",__source:{fileName:x,lineNumber:158,columnNumber:11}},null==R||null===(r=R.dict_label)||void 0===r?void 0:r.map((function(e){return j.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:x,lineNumber:161,columnNumber:17}},e.label_zh)})))),j.a.createElement(D,{label:"剧本难度",field:"gb_level",rules:[{required:!0,message:"请选中剧本难度"}],__source:{fileName:x,lineNumber:168,columnNumber:9}},j.a.createElement(b.a,{placeholder:"请选择剧本难度",__source:{fileName:x,lineNumber:173,columnNumber:11}},null==M||null===(l=M.dict_label)||void 0===l?void 0:l.map((function(e){return j.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:x,lineNumber:176,columnNumber:17}},e.label_zh)})))),j.a.createElement(D,{label:"玩家人数",field:"gb_people",rules:[{required:!0,message:"请填写玩家说明"}],__source:{fileName:x,lineNumber:184,columnNumber:9}},j.a.createElement(s.a,{placeholder:"请填写玩家说明...",__source:{fileName:x,lineNumber:189,columnNumber:11}})),j.a.createElement(D,{label:"剧本状态",field:"gb_status",rules:[{required:!1,message:"请选择剧本状态"}],__source:{fileName:x,lineNumber:192,columnNumber:9}},j.a.createElement(b.a,{placeholder:"请选择剧本状态",__source:{fileName:x,lineNumber:197,columnNumber:11}},null==Z||null===(a=Z.dict_label)||void 0===a?void 0:a.map((function(e){return j.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:x,lineNumber:200,columnNumber:17}},e.label_zh)})))),j.a.createElement(D,{label:"玩家说明",field:"gb_people_note",rules:[{required:!0,message:"请填写玩家说明"}],__source:{fileName:x,lineNumber:209,columnNumber:9}},j.a.createElement(f.a,{placeholder:"请填写玩家说明...",__source:{fileName:x,lineNumber:214,columnNumber:11}})),j.a.createElement(D,{label:"剧本标签",field:"gb_text_tag_arr",rules:[{required:!0,message:"请选择剧本标签"}],__source:{fileName:x,lineNumber:216,columnNumber:9}},j.a.createElement(b.a,{mode:"multiple",allowClear:!0,placeholder:"请选择剧本标签",__source:{fileName:x,lineNumber:221,columnNumber:11}},null==K||null===(m=K.dict_label)||void 0===m?void 0:m.map((function(e){return j.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:x,lineNumber:224,columnNumber:17}},e.label_zh)})))),j.a.createElement(D,{label:"剧本时长/小时",field:"gb_hour",rules:[{type:"number",required:!0}],__source:{fileName:x,lineNumber:232,columnNumber:9}},j.a.createElement(s.a,{min:1,placeholder:"请输入参考价格",__source:{fileName:x,lineNumber:237,columnNumber:11}})),j.a.createElement(D,{label:"工作日价格",field:"gb_price",rules:[{type:"number",required:!0}],__source:{fileName:x,lineNumber:239,columnNumber:9}},j.a.createElement(s.a,{min:1,placeholder:"请输入工作日价格",__source:{fileName:x,lineNumber:240,columnNumber:11}})),j.a.createElement(D,{label:"周末价格",field:"gb_price2",rules:[{type:"number",required:!0}],__source:{fileName:x,lineNumber:242,columnNumber:9}},j.a.createElement(s.a,{min:1,placeholder:"请输入工作日价格",__source:{fileName:x,lineNumber:243,columnNumber:11}})),j.a.createElement(D,{label:"推荐星级",field:"gb_star_lev",rules:[{required:!0,type:"number"}],__source:{fileName:x,lineNumber:246,columnNumber:9}},j.a.createElement(i.a,{allowHalf:!0,__source:{fileName:x,lineNumber:256,columnNumber:11}})),j.a.createElement(D,{label:"剧本概要",field:"gb_text_brief",rules:[{required:!0,message:"请填写剧本概要"}],__source:{fileName:x,lineNumber:258,columnNumber:9}},j.a.createElement(f.a,{placeholder:"请填写剧本概要...",__source:{fileName:x,lineNumber:263,columnNumber:11}})),j.a.createElement(D,{label:"剧本描述",field:"gb_text_content",rules:[{required:!1,message:"请填写剧本描述"}],__source:{fileName:x,lineNumber:265,columnNumber:9}},j.a.createElement(f.a,{placeholder:"请填写剧本描述...",__source:{fileName:x,lineNumber:270,columnNumber:11}})),j.a.createElement(D,{label:"上架时间",field:"gb_add_time",rules:[{required:!1,message:"gb_add_time is required"}],__source:{fileName:x,lineNumber:273,columnNumber:9}},j.a.createElement(o.a,{showTime:!0,__source:{fileName:x,lineNumber:283,columnNumber:11}})),j.a.createElement(D,{label:"是否新本",field:"is_new",rules:[{required:!1,message:"请填写版权信息"}],__source:{fileName:x,lineNumber:285,columnNumber:9}},j.a.createElement(b.a,{placeholder:"是否新本",__source:{fileName:x,lineNumber:290,columnNumber:11}},j.a.createElement(b.a.Option,{value:1,__source:{fileName:x,lineNumber:291,columnNumber:13}},"是"),j.a.createElement(b.a.Option,{value:0,__source:{fileName:x,lineNumber:292,columnNumber:13}},"否"))),j.a.createElement(D,{label:"是否热门",field:"is_hot",rules:[{required:!1,message:"请填写版权信息"}],__source:{fileName:x,lineNumber:295,columnNumber:9}},j.a.createElement(b.a,{placeholder:"是否热门",__source:{fileName:x,lineNumber:300,columnNumber:11}},j.a.createElement(b.a.Option,{value:1,__source:{fileName:x,lineNumber:301,columnNumber:13}},"是"),j.a.createElement(b.a.Option,{value:0,__source:{fileName:x,lineNumber:302,columnNumber:13}},"否"))),j.a.createElement(D,{label:"版权信息",field:"gb_producer",rules:[{required:!0,message:"请填写版权信息"}],__source:{fileName:x,lineNumber:305,columnNumber:9}},j.a.createElement(f.a,{placeholder:"请填写版权信息...",__source:{fileName:x,lineNumber:310,columnNumber:11}})),j.a.createElement(D,{label:"备注说明",field:"gb_remarks",rules:[{required:!1,message:"请填写备注说明"}],__source:{fileName:x,lineNumber:313,columnNumber:9}},j.a.createElement(f.a,{placeholder:"请填写备注说明...",__source:{fileName:x,lineNumber:318,columnNumber:11}})),j.a.createElement(D,t()({},k,{__source:{fileName:x,lineNumber:387,columnNumber:9}}),j.a.createElement(n.a,{onClick:c()(y.a.mark((function e(){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.current){e.next=16;break}return e.prev=1,e.next=4,p.current.validate();case 4:return console.log(p.current.getFields()),(r=p.current.getFields()).gb_cover=r.gb_cover[0].response.data.file_url,e.next=9,Object(w.b)(p.current.getFields());case 9:e.sent,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(p.current.getFieldsError()),u.a.error("校验失败，请检查字段！");case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),type:"primary",style:{marginRight:24},__source:{fileName:x,lineNumber:388,columnNumber:11}},"Submit"),j.a.createElement(n.a,{onClick:function(){p.current.resetFields()},__source:{fileName:x,lineNumber:408,columnNumber:11}},"Reset"))))}},176:function(e,r,l){"use strict";l.r(r);l(581);var a=l(580),t=(l(572),l(579)),n=(l(150),l(79)),u=(l(148),l(49)),m=(l(573),l(578)),c=(l(574),l(576)),o=l(5),i=l.n(o),s=l(78),b=l.n(s),_=(l(77),l(28)),N=(l(151),l(60)),f=l(24),d=l.n(f),p=l(50),g=l.n(p),E=l(0),h=l.n(E),v=l(29),y=l(216),O=l(294),j=l(33),w=l(557),x=l.n(w),P=l(158),T="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/index.tsx";function D(e,r){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),l.push.apply(l,a)}return l}function S(e){for(var r=1;r<arguments.length;r++){var l=null!=arguments[r]?arguments[r]:{};r%2?D(Object(l),!0).forEach((function(r){i()(e,r,l[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):D(Object(l)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(l,r))}))}return e}r.default=function(){var e=Object(j.a)(),r=Object(E.useState)(!1),l=d()(r,2),o=l[0],i=l[1],s=Object(E.useState)([]),f=d()(s,2),p=f[0],w=f[1],D=[{title:"剧本ID",dataIndex:"gb_id"},{title:"剧本标题",dataIndex:"gb_title"},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return h.a.createElement(N.a.Text,{copyable:!0,__source:{fileName:T,lineNumber:41,columnNumber:26}},e)}},{title:"剧本区域",dataIndex:"gb_area"},{title:"剧本封面",dataIndex:"gb_cover",render:function(e,r,l){return console.log(e,l),h.a.createElement("img",{style:{width:60,height:90},src:r.gb_cover,__source:{fileName:T,lineNumber:52,columnNumber:16}})}},{title:e["searchTable.columns.createdTime"],dataIndex:"created_time"},{title:"更新时间",dataIndex:"updated_time"},{title:e["searchTable.columns.operations"],dataIndex:"operations",render:function(){return h.a.createElement("div",{className:x.a.operations,__source:{fileName:T,lineNumber:67,columnNumber:9}},h.a.createElement(_.a,{type:"text",size:"small",__source:{fileName:T,lineNumber:68,columnNumber:11}},e["searchTable.columns.operations.view"]),h.a.createElement(_.a,{type:"text",size:"small",__source:{fileName:T,lineNumber:71,columnNumber:11}},e["searchTable.columns.operations.update"]),h.a.createElement(_.a,{type:"text",status:"danger",size:"small",__source:{fileName:T,lineNumber:74,columnNumber:11}},e["searchTable.columns.operations.delete"]))}}],k=Object(v.c)((function(e){return e.searchTable})),q=k.data,I=k.pagination,A=k.loading,C=k.formParams,z=Object(v.b)();Object(E.useEffect)((function(){U()}),[]),Object(E.useEffect)((function(){R()}),[]);var R=function(){var e=b()(g.a.mark((function e(){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.i)();case 2:r=e.sent,w(r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(y.h)({page:e,page_size:r});a.then((function(e){console.log(e);var r=e.data,a=e.paginator;z({type:O.UPDATE_LIST,payload:{data:r}}),z({type:O.UPDATE_PAGINATION,payload:{pagination:S(S({},I),{},{current:a.page,pageSize:a.page_size,total:a.total_count})}}),z({type:O.UPDATE_LOADING,payload:{loading:!1}}),z({type:O.UPDATE_FORM_PARAMS,payload:{params:l}})}))}return h.a.createElement("div",{className:x.a.container,__source:{fileName:T,lineNumber:128,columnNumber:5}},h.a.createElement(c.a,{title:"添加剧本",footer:null,onCancel:function(){i(!1)},unmountOnExit:!0,style:{width:900,minWidth:900},visible:o,__source:{fileName:T,lineNumber:129,columnNumber:7}},h.a.createElement(P.default,{labelData:p,__source:{fileName:T,lineNumber:139,columnNumber:9}})),h.a.createElement(m.a,{style:{marginBottom:20},__source:{fileName:T,lineNumber:141,columnNumber:7}},h.a.createElement(m.a.Item,{__source:{fileName:T,lineNumber:142,columnNumber:9}},"运营管理"),h.a.createElement(m.a.Item,{__source:{fileName:T,lineNumber:143,columnNumber:9}},"剧本管理")),h.a.createElement("div",{__source:{fileName:T,lineNumber:145,columnNumber:7}},h.a.createElement(t.a,{style:{marginBottom:20},__source:{fileName:T,lineNumber:146,columnNumber:9}},h.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},__source:{fileName:T,lineNumber:147,columnNumber:11}},h.a.createElement(_.a,{style:{marginRight:20},onClick:function(){i(!0)},type:"primary",__source:{fileName:T,lineNumber:148,columnNumber:13}},"添加剧本"),h.a.createElement("div",{__source:{fileName:T,lineNumber:157,columnNumber:13}},h.a.createElement(n.a,{style:{flex:1},wrap:!0,__source:{fileName:T,lineNumber:158,columnNumber:15}},h.a.createElement(u.a,{onChange:function(){},placeholder:"请输入剧本标题",style:{width:200},__source:{fileName:T,lineNumber:159,columnNumber:17}}),h.a.createElement(u.a,{onChange:function(){},placeholder:"剧本类型",style:{width:200},__source:{fileName:T,lineNumber:164,columnNumber:17}}),h.a.createElement(u.a,{onChange:function(){},placeholder:"剧本区域",style:{width:200},__source:{fileName:T,lineNumber:165,columnNumber:17}}),h.a.createElement(u.a,{onChange:function(){},placeholder:"玩家人数",style:{width:200},__source:{fileName:T,lineNumber:166,columnNumber:17}}),h.a.createElement(u.a,{onChange:function(){},placeholder:"剧本状态",style:{width:200},__source:{fileName:T,lineNumber:167,columnNumber:17}}),h.a.createElement(_.a,{onClick:function(){},__source:{fileName:T,lineNumber:168,columnNumber:17}},"重置"),h.a.createElement(_.a,{onClick:function(){U()},type:"primary",__source:{fileName:T,lineNumber:169,columnNumber:17}},"搜索")))))),h.a.createElement(t.a,{bordered:!1,__source:{fileName:T,lineNumber:182,columnNumber:7}},h.a.createElement(a.a,{rowKey:"user_account",loading:A,onChange:function(e){U(e.current,e.pageSize,C)},pagination:I,columns:D,data:q,__source:{fileName:T,lineNumber:183,columnNumber:9}})))}},294:function(e,r,l){"use strict";l.r(r),l.d(r,"UPDATE_LIST",(function(){return a})),l.d(r,"UPDATE_LOADING",(function(){return t})),l.d(r,"UPDATE_PAGINATION",(function(){return n})),l.d(r,"UPDATE_FORM_PARAMS",(function(){return u}));var a="searchTable_update_list",t="searchTable_update_loading",n="searchTable_update_pagination",u="searchTable_update_formParams"},557:function(e,r,l){e.exports={container:"container-50d7a459ef",toolbar:"toolbar-603124241c",operations:"operations-1e37fde15b"}}}]);