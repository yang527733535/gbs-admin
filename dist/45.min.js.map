{"version":3,"file":"45.min.js","sources":["webpack:///./src/pages/role-user/style/index.module.less","webpack:///./src/pages/role-user/form/index.jsx","webpack:///./src/pages/role-user/index.tsx","webpack:///./src/pages/role-user/style/index.module.less?f5a3"],"sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/_css-loader@3.6.0@css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".container-7edcc8ac54 {\\n  padding: 20px;\\n}\\n.toolbar-320e6a861f {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-bottom: 24px;\\n}\\n.operations-aa7ac05071 {\\n  display: flex;\\n}\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"container\": \"container-7edcc8ac54\",\n\t\"toolbar\": \"toolbar-320e6a861f\",\n\t\"operations\": \"operations-aa7ac05071\"\n};\nmodule.exports = exports;\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport \"@arco-design/web-react/es/Button/style\";\nimport _Button from \"@arco-design/web-react/es/Button\";\nimport \"@arco-design/web-react/es/Message/style\";\nimport _Message from \"@arco-design/web-react/es/Message\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport \"@arco-design/web-react/es/Select/style\";\nimport _Select from \"@arco-design/web-react/es/Select\";\nimport \"@arco-design/web-react/es/Form/style\";\nimport _Form from \"@arco-design/web-react/es/Form\";\nvar _jsxFileName = \"/Users/mrhh/Desktop/gbs-admin/src/pages/role-user/form/index.jsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport { addGame, updateShop, regionsList } from '../../../api/drama.js';\nvar FormItem = _Form.Item;\nvar formItemLayout = {\n  labelCol: {\n    span: 7\n  },\n  wrapperCol: {\n    span: 17\n  }\n};\nvar noLabelLayout = {\n  wrapperCol: {\n    span: 17,\n    offset: 7\n  }\n};\n\nfunction FormDom(_ref) {\n  var closeModalAndReqTable = _ref.closeModalAndReqTable,\n      userListData = _ref.userListData,\n      clickItem = _ref.clickItem;\n  var formRef = useRef();\n  var size = 'default';\n  useEffect(function () {\n    formRef.current.setFieldsValue(clickItem);\n  }, []);\n\n  var onValuesChange = function onValuesChange(changeValue, values) {\n    console.log('onValuesChange: ', changeValue, values);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: 650\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Form, _extends({\n    ref: formRef\n  }, formItemLayout, {\n    size: size,\n    onSubmit: function onSubmit(e) {\n      console.log(e);\n    },\n    onValuesChange: onValuesChange,\n    scrollToFirstError: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FormItem, {\n    field: \"user_list\",\n    label: \"\\u6DFB\\u52A0\\u7528\\u6237\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Select, {\n    filterOption: function filterOption(inputValue, option) {\n      return option.props.value.toLowerCase().indexOf(inputValue.toLowerCase()) >= 0 || option.props.children.toLowerCase().indexOf(inputValue.toLowerCase()) >= 0;\n    },\n    showSearch: true,\n    allowClear: true,\n    mode: \"multiple\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, userListData.map(function (item) {\n    return /*#__PURE__*/React.createElement(_Select.Option, {\n      key: item.user_account,\n      value: item.user_account,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, item.user_name);\n  }))), /*#__PURE__*/React.createElement(FormItem, _extends({}, noLabelLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(_Button, {\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var data, param;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!formRef.current) {\n                _context.next = 27;\n                break;\n              }\n\n              _context.prev = 1;\n              _context.next = 4;\n              return formRef.current.validate();\n\n            case 4:\n              if (!(clickItem === null)) {\n                _context.next = 12;\n                break;\n              }\n\n              console.log(formRef.current.getFields());\n              return _context.abrupt(\"return\");\n\n            case 9:\n              data = _context.sent;\n              _context.next = 19;\n              break;\n\n            case 12:\n              param = formRef.current.getFields();\n              console.log('param: ', param);\n              return _context.abrupt(\"return\");\n\n            case 18:\n              data = _context.sent;\n\n            case 19:\n              if (data.code === 200) {\n                _Message.success('添加成功');\n\n                closeModalAndReqTable();\n              }\n\n              _context.next = 27;\n              break;\n\n            case 22:\n              _context.prev = 22;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n              console.log(formRef.current.getFieldsError());\n\n              _Message.error('校验失败，请检查字段！');\n\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 22]]);\n    })),\n    type: \"primary\",\n    style: {\n      marginRight: 24\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, \"\\u63D0\\u4EA4\"), /*#__PURE__*/React.createElement(_Button, {\n    onClick: function onClick() {\n      formRef.current.resetFields();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, \"\\u91CD\\u7F6E\"))));\n}\n\nexport default FormDom;","import \"@arco-design/web-react/es/Table/style\";\nimport _Table from \"@arco-design/web-react/es/Table\";\nimport \"@arco-design/web-react/es/Card/style\";\nimport _Card from \"@arco-design/web-react/es/Card\";\nimport \"@arco-design/web-react/es/Tree/style\";\nimport _Tree from \"@arco-design/web-react/es/Tree\";\nimport \"@arco-design/web-react/es/Breadcrumb/style\";\nimport _Breadcrumb from \"@arco-design/web-react/es/Breadcrumb\";\nimport \"@arco-design/web-react/es/Modal/style\";\nimport _Modal from \"@arco-design/web-react/es/Modal\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport \"@arco-design/web-react/es/Space/style\";\nimport _Space from \"@arco-design/web-react/es/Space\";\nimport \"@arco-design/web-react/es/Button/style\";\nimport _Button from \"@arco-design/web-react/es/Button\";\nimport _objectDestructuringEmpty from \"@babel/runtime/helpers/objectDestructuringEmpty\";\nvar _jsxFileName = \"/Users/mrhh/Desktop/gbs-admin/src/pages/role-user/index.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport styles from './style/index.module.less';\nimport { RoleTreeApi, userList } from '../../api/user.js';\nimport AddForm from './form/index.jsx';\n\nfunction RoleTree(_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  var columns = [{\n    title: '名称',\n    dataIndex: 'label_zh'\n  }, {\n    title: '字典编码',\n    dataIndex: 'dict_code'\n  }, {\n    title: '操作',\n    render: function render() {\n      return /*#__PURE__*/React.createElement(_Space, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        size: \"small\",\n        type: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 13\n        }\n      }, \"\\u4FEE\\u6539\"), /*#__PURE__*/React.createElement(_Button, {\n        status: \"danger\",\n        size: \"small\",\n        type: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 13\n        }\n      }, \"\\u5220\\u9664\"));\n    }\n  }];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      visitModal = _useState2[0],\n      setvisitModal = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 1),\n      clickItem = _useState4[0];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 1),\n      tabledata = _useState6[0];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 1),\n      selectdict_code = _useState8[0];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      treeData = _useState10[0],\n      settreeData = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      userListData = _useState12[0],\n      setuserListData = _useState12[1];\n\n  useEffect(function () {\n    reqRoleTree();\n  }, []);\n  useEffect(function () {\n    reqUserList();\n  }, []);\n\n  var reqUserList = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var parma, _yield$userList, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              parma = {\n                page: 1,\n                page_size: 100\n              };\n              _context.next = 3;\n              return userList(parma);\n\n            case 3:\n              _yield$userList = _context.sent;\n              data = _yield$userList.data;\n              setuserListData(data);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function reqUserList() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var reqRoleTree = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var resdata, data, mapTree, arr;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return RoleTreeApi();\n\n            case 2:\n              resdata = _context2.sent;\n              data = resdata.data;\n\n              mapTree = function mapTree(org) {\n                var haveChildren = Array.isArray(org.role_child) && org.role_child.length > 0;\n                return {\n                  title: String(org.role_name),\n                  key: String(org.role_code),\n                  children: haveChildren ? org.role_child.map(function (i) {\n                    return mapTree(i);\n                  }) : []\n                };\n              };\n\n              arr = [];\n              arr = data.map(function (org) {\n                return mapTree(org);\n              });\n              settreeData(arr);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function reqRoleTree() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Modal, {\n    title: clickItem === null ? '添加用户' : '修改用户',\n    footer: null,\n    onCancel: function onCancel() {\n      setvisitModal(false);\n    },\n    unmountOnExit: true,\n    style: {\n      width: 900,\n      minWidth: 900\n    },\n    visible: visitModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AddForm, {\n    userListData: userListData,\n    selectdict_code: selectdict_code,\n    clickItem: clickItem,\n    closeModalAndReqTable: function closeModalAndReqTable() {\n      setvisitModal(false); // fetchData();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(_Breadcrumb, {\n    style: {\n      marginBottom: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Breadcrumb.Item, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, \"\\u6743\\u9650\\u7BA1\\u7406\"), /*#__PURE__*/React.createElement(_Breadcrumb.Item, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, \"\\u89D2\\u8272\\u5206\\u914D\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      width: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: 200,\n      marginRight: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Card, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(_Tree, {\n    // defaultSelectedKeys={['0-0-1']}\n    treeData: treeData,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Card, {\n    style: {\n      height: '75vh',\n      borderRadius: 4\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    onClick: function onClick() {\n      setvisitModal(true);\n    },\n    style: {\n      marginBottom: 20\n    },\n    type: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, \"\\u89D2\\u8272\\u6DFB\\u52A0\\u7528\\u6237\"), /*#__PURE__*/React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, selectdict_code !== '' && /*#__PURE__*/React.createElement(_Button, {\n    onClick: function onClick() {\n      setvisitModal(true);\n    },\n    style: {\n      marginBottom: 20\n    },\n    type: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, \"\\u6DFB\\u52A0\\u5B57\\u5178\")), /*#__PURE__*/React.createElement(_Table, {\n    showHeader: true // stripe={true}\n    ,\n    hover: true,\n    columns: columns,\n    data: tabledata,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  })))));\n}\n\nexport default RoleTree;","var api = require(\"!../../../../node_modules/_style-loader@1.3.0@style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--11-1!../../../../node_modules/_postcss-loader@4.3.0@postcss-loader/dist/cjs.js??ref--11-2!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--11-3!./index.module.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3LA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC1UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}