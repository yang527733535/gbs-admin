(window.webpackJsonp=window.webpackJsonp||[]).push([[33,39,43,57,113,152,153],{174:function(e,r,t){"use strict";t.r(r),t.d(r,"default",(function(){return x}));t(155);var n=t(74),a=(t(677),t(676)),l=(t(253),t(157)),u=(t(333),t(252)),c=(t(65),t(24)),o=(t(251),t(96)),m=t(4),i=t.n(m),s=t(56),b=t.n(s),_=t(22),f=t.n(_),N=(t(250),t(73)),d=t(35),p=t.n(d),g=t(0),E=t.n(g),y=t(639),h=t.n(y),v=t(111),O="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/gameDetail/baseDetail/index.tsx";function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach((function(r){i()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var w=[{title:"游戏编码",dataIndex:"game_code"},{title:"剧本编码",dataIndex:"gb_code"},{title:"是否支付",dataIndex:"is_pay",render:function(e){return JSON.parse(localStorage.getItem("AllMaP")).sys_pay_status[e]}},{title:"订单编号",dataIndex:"order_code"},{title:"玩家id",dataIndex:"player_id"},{title:"玩家名称",dataIndex:"player_name"},{title:"玩家备注",dataIndex:"player_note"},{title:"玩家类型",dataIndex:"player_type"},{title:"玩家帐号",dataIndex:"player_user"},{title:"更新时间",dataIndex:"updated_time"},{title:"创建时间",dataIndex:"created_time"}];function x(e){var r=e.clickItem,t=N.a.Item,m=Object(g.useRef)(),i=Object(g.useState)(),s=f()(i,2),_=s[0],d=s[1],y=Object(g.useState)(null),j=f()(y,2),x=j[0],k=j[1],I=Object(g.useState)([]),C=f()(I,2),P=C[0],D=C[1],A=Object(g.useState)(!1),T=f()(A,2),q=T[0],R=T[1],F=Object(g.useState)(!1),L=f()(F,2),M=L[0],z=L[1];Object(g.useEffect)((function(){U()}),[]);var U=function(){var e=b()(p.a.mark((function e(){var t,n,a,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.store_code,n=r.room_code,a=r.game_code,l={store_code:t,room_code:n,game_code:a},R(!0),e.next=5,Object(v.L)(l);case 5:u=e.sent,R(!1),k(u.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return E.a.createElement("div",{__source:{fileName:O,lineNumber:81,columnNumber:5}},E.a.createElement(u.a,{onCancel:function(){z(!1)},footer:null,visible:M,__source:{fileName:O,lineNumber:82,columnNumber:7}},E.a.createElement(N.a,{onSubmit:function(){var e=b()(p.a.mark((function e(r){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),t=S(S({},r),{},{game_code:x.game_code,store_code:x.store_code,order_arr:P}),console.log("param,",t),e.next=5,Object(v.M)(t);case 5:n=e.sent,a=n.data,console.log("data: ",a);case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),__source:{fileName:O,lineNumber:89,columnNumber:9}},E.a.createElement(t,{field:"member_account",label:"付款账户",__source:{fileName:O,lineNumber:103,columnNumber:11}},E.a.createElement(o.a,{style:{width:150},__source:{fileName:O,lineNumber:104,columnNumber:13}},P.map((function(e){var r=e.player_user;return E.a.createElement(o.a.Option,{value:r,key:r,__source:{fileName:O,lineNumber:107,columnNumber:19}},r)})))),E.a.createElement(t,{__source:{fileName:O,lineNumber:114,columnNumber:11}},E.a.createElement(c.a,{style:{display:"flex",justifyContent:"center",marginLeft:100},type:"primary",htmlType:"submit",__source:{fileName:O,lineNumber:115,columnNumber:13}},"提交")))),E.a.createElement(n.a,{loading:q,__source:{fileName:O,lineNumber:125,columnNumber:7}},E.a.createElement("h3",{__source:{fileName:O,lineNumber:126,columnNumber:9}},"游戏详情"),E.a.createElement(N.a,{layout:"vertical",ref:m,className:h.a["form-group"],__source:{fileName:O,lineNumber:127,columnNumber:9}},E.a.createElement(l.a.Row,{gutter:80,__source:{fileName:O,lineNumber:128,columnNumber:11}},E.a.createElement(l.a.Col,{span:6,__source:{fileName:O,lineNumber:129,columnNumber:13}},E.a.createElement(t,{label:"游戏编码",field:"game_code",rules:[{required:!1,message:"请填写店铺名称"}],__source:{fileName:O,lineNumber:130,columnNumber:15}},E.a.createElement("span",{__source:{fileName:O,lineNumber:135,columnNumber:17}},null==x?void 0:x.game_code))),E.a.createElement(l.a.Col,{span:6,__source:{fileName:O,lineNumber:138,columnNumber:13}},E.a.createElement(t,{rules:[{required:!1,message:"请填写店铺地区"}],field:"gb_title",label:"剧本名称",__source:{fileName:O,lineNumber:139,columnNumber:15}},E.a.createElement("span",{__source:{fileName:O,lineNumber:144,columnNumber:17}},null==x?void 0:x.gb_title))),E.a.createElement(l.a.Col,{span:6,__source:{fileName:O,lineNumber:148,columnNumber:13}},E.a.createElement(t,{label:"剧本价格",field:"gb_price",rules:[{required:!1,message:"请填写详细地址"}],__source:{fileName:O,lineNumber:149,columnNumber:15}},E.a.createElement("span",{__source:{fileName:O,lineNumber:154,columnNumber:17}},"¥",null==x?void 0:x.gb_price))),E.a.createElement(l.a.Col,{span:6,__source:{fileName:O,lineNumber:157,columnNumber:13}},E.a.createElement(t,{label:"游戏状态",field:"game_status",rules:[{required:!1,message:"请填写店铺手机号码"}],__source:{fileName:O,lineNumber:158,columnNumber:15}},E.a.createElement("span",{__source:{fileName:O,lineNumber:163,columnNumber:17}},JSON.parse(localStorage.getItem("AllMaP")).sys_game_status[null==x?void 0:x.game_status]||(null==x?void 0:x.game_status)))),E.a.createElement(l.a.Col,{span:6,__source:{fileName:O,lineNumber:170,columnNumber:13}},E.a.createElement(t,{label:"店铺",field:"store_code",rules:[{required:!1,message:"请填写店铺电话号码"}],__source:{fileName:O,lineNumber:171,columnNumber:15}},E.a.createElement("span",{__source:{fileName:O,lineNumber:177,columnNumber:17}},JSON.parse(localStorage.getItem("SMap"))[null==x?void 0:x.store_code]))),E.a.createElement(l.a.Col,{span:6,__source:{fileName:O,lineNumber:180,columnNumber:13}},E.a.createElement(t,{label:"房间",field:"room_code",rules:[{required:!1,message:"请填写门店级别"}],__source:{fileName:O,lineNumber:181,columnNumber:15}},E.a.createElement("span",{__source:{fileName:O,lineNumber:186,columnNumber:17}},JSON.parse(localStorage.getItem("SMap"))[null==x?void 0:x.room_code])))),E.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},__source:{fileName:O,lineNumber:243,columnNumber:11}},E.a.createElement("h3",{__source:{fileName:O,lineNumber:249,columnNumber:13}},"玩家订单"),E.a.createElement(c.a,{onClick:function(){z(!0),console.log("s123",P)},type:"primary",__source:{fileName:O,lineNumber:250,columnNumber:13}},"批量支付")),E.a.createElement(a.a,{rowKey:"player_user",columns:w,rowSelection:{type:"checkbox",selectedRowKeys:_,onChange:function(e,r){console.log("selectedRows: ",r),console.log("selectedRows: ",e),D(r),d(e)}},data:(null==x?void 0:x.game_players)||[],__source:{fileName:O,lineNumber:261,columnNumber:11}}))))}},189:function(e,r,t){"use strict";t.r(r);t(112);var n=t(45),a=t(5),l=t.n(a),u=(t(156),t(82)),c=(t(65),t(24)),o=t(687),m=(t(113),t(40)),i=(t(334),t(254)),s=(t(155),t(74)),b=(t(251),t(96)),_=(t(175),t(85)),f=t(56),N=t.n(f),d=t(22),p=t.n(d),g=(t(250),t(73)),E=t(35),y=t.n(E),h=t(0),v=t.n(h),O=t(167),j=t.n(O),S=t(111),w=t(83),x="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/form/index.jsx",k=g.a.Item,I={labelCol:{span:7},wrapperCol:{span:17}},C={wrapperCol:{span:17,offset:7}};r.default=function(e){var r=e.closeModalAndReqTable,t=e.clickItem,a=Object(h.useRef)(),f=Object(h.useState)([]),d=p()(f,2),E=d[0],O=d[1],P=Object(h.useState)(!0),D=p()(P,2),A=D[0],T=D[1],q=Object(h.useState)([]),R=p()(q,2),F=(R[0],R[1]),L=Object(h.useState)([]),M=p()(L,2),z=M[0],U=M[1],J=Object(h.useState)(localStorage.getItem("nowshop")),V=p()(J,2),G=V[0],W=V[1],B=Object(h.useState)([]),K=p()(B,2),Q=K[0],H=K[1],X=Object(h.useState)(!1),Y=p()(X,2),Z=Y[0],$=Y[1],ee=Object(h.useState)([]),re=p()(ee,2),te=re[0],ne=re[1],ae=Object(h.useState)(!1),le=p()(ae,2),ue=le[0],ce=le[1],oe=Object(h.useState)(""),me=p()(oe,2),ie=me[0],se=me[1],be=Object(h.useState)(""),_e=p()(be,2),fe=_e[0],Ne=_e[1],de=Object(h.useState)([]),pe=p()(de,2),ge=pe[0],Ee=pe[1],ye=Object(h.useState)(!1),he=p()(ye,2),ve=he[0],Oe=he[1],je=Object(h.useRef)(null);Object(h.useEffect)((function(){Object(S.y)().then((function(e){var r,t=e.data;r=t.map((function(e){return function e(r){var t=Array.isArray(r.region_children)&&r.region_children.length>0;return{key:String(r.region_id),value:String(r.region_id),label:r.region_name,children:t?r.region_children.map((function(r){return e(r)})):[]}}(e)})),F(r)}))}),[]);var Se=function(){var e=N()(y.a.mark((function e(){var r,t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.S)();case 2:r=e.sent,t=r.data,T(!1),O(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(h.useEffect)((function(){Se()}),[]),Object(h.useEffect)((function(){a.current.setFieldsValue({store_code:localStorage.getItem("nowshop")})}),[]);var we=Object(h.useCallback)(j()((function(e){je.current=Date.now(),$(!0),H([]);var r={gb_title:e};Object(S.q)(r).then((function(e){var r=e.data.map((function(e){return{label:v.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:x,lineNumber:117,columnNumber:13}},v.a.createElement(_.a,{shape:"square",size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:x,lineNumber:118,columnNumber:15}},v.a.createElement("img",{alt:"avatar",src:e.gb_cover,__source:{fileName:x,lineNumber:119,columnNumber:17}})),"".concat(e.gb_title)),value:e.gb_code}}));$(!1),H(r)}))}),500),[]),xe=Object(h.useCallback)(j()((function(e){je.current=Date.now(),ce(!0),H([]);var r={user_nick:e};Object(w.d)(r).then((function(e){var r=e.data.map((function(e){return{label:v.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:x,lineNumber:142,columnNumber:13}},v.a.createElement(_.a,{size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:x,lineNumber:143,columnNumber:15}},v.a.createElement("img",{alt:"avatar",src:e.user_photo,__source:{fileName:x,lineNumber:144,columnNumber:17}})),"".concat(e.user_nick)),value:e.user_account}}));ce(!1),ne(r)}))}),500),[]),ke=Object(h.useCallback)(j()((function(e){je.current=Date.now(),$(!0),H([]);var r={member_name:e};Object(w.g)(r).then((function(e){console.log("data: ",e);var r=e.data.map((function(e){return{label:v.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:x,lineNumber:168,columnNumber:13}},v.a.createElement(_.a,{size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:x,lineNumber:169,columnNumber:15}},v.a.createElement("img",{alt:"avatar",src:e.member_face,__source:{fileName:x,lineNumber:170,columnNumber:17}})),"".concat(e.member_name)),value:e.member_account}}));Oe(!1),console.log("options",r),Ee(r)}))}),500),[]);Object(h.useEffect)((function(){we(),ke(),xe()}),[]);var Ie=function(){var e=N()(y.a.mark((function e(){var r,t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={store_code:G},e.next=3,Object(S.g)(r);case 3:t=e.sent,n=t.data.store_room,U(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.useEffect)((function(){Ie()}),[G]),v.a.createElement("div",{style:{maxWidth:650},__source:{fileName:x,lineNumber:205,columnNumber:5}},v.a.createElement(g.a,l()({ref:a},I,{size:"default",onSubmit:function(e){console.log(e)},onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:x,lineNumber:206,columnNumber:7}}),v.a.createElement(k,{label:"选择店铺",field:"store_code",rules:[{required:!0,message:"请填写店铺编码"}],__source:{fileName:x,lineNumber:216,columnNumber:9}},v.a.createElement(b.a,{onChange:function(){var e=N()(y.a.mark((function e(r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(r);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),loading:A,placeholder:"请选择店铺",__source:{fileName:x,lineNumber:221,columnNumber:11}},null==E?void 0:E.map((function(e){return v.a.createElement(b.a.Option,{key:e.store_code,value:e.store_code,__source:{fileName:x,lineNumber:230,columnNumber:17}},e.store_name)})))),v.a.createElement(k,{label:"选择房间",field:"room_code",rules:[{required:!0,message:"请填写店铺编码"}],__source:{fileName:x,lineNumber:237,columnNumber:9}},v.a.createElement(b.a,{placeholder:"请选择房间",__source:{fileName:x,lineNumber:242,columnNumber:11}},z.map((function(e){return v.a.createElement(b.a.Option,{key:e.room_code,value:e.room_code,__source:{fileName:x,lineNumber:245,columnNumber:17}},e.room_name)})))),v.a.createElement(k,{label:"剧本",field:"gb_code",rules:[{required:!0,message:"请选择剧本"}],__source:{fileName:x,lineNumber:253,columnNumber:9}},v.a.createElement(b.a,{onChange:function(){var e=N()(y.a.mark((function e(r){var t,n,l,u,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={gb_code:r,store_code:G},e.next=3,Object(S.u)(t);case 3:n=e.sent,l=n.data,u=l.gb_price,c=l.gb_price2,se(u),Ne(c),a.current.setFieldsValue({gb_price:0===l.is_leisure?l.gb_price:l.gb_price2}),console.log("data: ",l);case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),style:{width:345},options:Q,placeholder:"请输入要搜索的剧本",filterOption:!1,renderFormat:function(e){return e.children.props.children[1]},notFoundContent:Z?v.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},__source:{fileName:x,lineNumber:283,columnNumber:17}},v.a.createElement(s.a,{style:{margin:12},__source:{fileName:x,lineNumber:284,columnNumber:19}})):null,showSearch:!0,onSearch:we,__source:{fileName:x,lineNumber:254,columnNumber:11}})),ie&&v.a.createElement(k,{label:"参考价格",__source:{fileName:x,lineNumber:293,columnNumber:11}},v.a.createElement("span",{__source:{fileName:x,lineNumber:294,columnNumber:13}},"工作日:¥",ie),"    ",v.a.createElement("span",{__source:{fileName:x,lineNumber:295,columnNumber:13}},"周末:¥",fe)),v.a.createElement(k,{label:"剧本价格",field:"gb_price",rules:[{required:!0,message:"请填写剧本价格"}],__source:{fileName:x,lineNumber:299,columnNumber:9}},v.a.createElement(i.a,{min:0,placeholder:"请填写剧本价格...",__source:{fileName:x,lineNumber:304,columnNumber:11}})),v.a.createElement(k,{label:"玩家人数",field:"game_people",rules:[{required:!0,message:"请填写玩家人数"}],__source:{fileName:x,lineNumber:307,columnNumber:9}},v.a.createElement(i.a,{min:1,placeholder:"请填写玩家人数...",__source:{fileName:x,lineNumber:312,columnNumber:11}})),v.a.createElement(k,{label:"主持人",field:"dm_user",rules:[{required:!0,message:"请填写主持人"}],__source:{fileName:x,lineNumber:314,columnNumber:9}},v.a.createElement(b.a,{style:{width:345},options:te,placeholder:"请选择主持人",filterOption:!1,renderFormat:function(e){return e.children.props.children[1]},notFoundContent:ue?v.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},__source:{fileName:x,lineNumber:329,columnNumber:17}},v.a.createElement(s.a,{style:{margin:12},__source:{fileName:x,lineNumber:330,columnNumber:19}})):null,showSearch:!0,onSearch:xe,__source:{fileName:x,lineNumber:319,columnNumber:11}})),v.a.createElement(g.a.List,{field:"game_player",__source:{fileName:x,lineNumber:339,columnNumber:9}},(function(e,r){var t=r.add,n=r.remove;r.move;return v.a.createElement("div",{__source:{fileName:x,lineNumber:342,columnNumber:15}},e.map((function(e,r){return v.a.createElement("div",{key:e.key,__source:{fileName:x,lineNumber:345,columnNumber:21}},v.a.createElement(g.a.Item,{label:"玩家".concat(1+r),__source:{fileName:x,lineNumber:346,columnNumber:23}},v.a.createElement(u.a,{__source:{fileName:x,lineNumber:347,columnNumber:25}},v.a.createElement(g.a.Item,{field:"".concat(e.field,".player_user"),rules:[{required:!0}],noStyle:!0,__source:{fileName:x,lineNumber:348,columnNumber:27}},v.a.createElement(b.a,{style:{width:145},options:ge,placeholder:"请选择玩家",filterOption:!1,renderFormat:function(e){return e.children.props.children[1]},notFoundContent:ve?v.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},__source:{fileName:x,lineNumber:363,columnNumber:35}},v.a.createElement(s.a,{style:{margin:12},__source:{fileName:x,lineNumber:370,columnNumber:37}})):null,showSearch:!0,onSearch:ke,__source:{fileName:x,lineNumber:353,columnNumber:29}})),v.a.createElement(g.a.Item,{field:"".concat(e.field,".player_type"),rules:[{required:!0}],noStyle:!0,__source:{fileName:x,lineNumber:378,columnNumber:27}},v.a.createElement(b.a,{placeholder:"玩家类型",__source:{fileName:x,lineNumber:383,columnNumber:29}},v.a.createElement(b.a.Option,{value:"player",__source:{fileName:x,lineNumber:384,columnNumber:31}},"player"),v.a.createElement(b.a.Option,{value:"worker",__source:{fileName:x,lineNumber:385,columnNumber:31}},"worker"))),v.a.createElement(g.a.Item,{field:"".concat(e.field,".player_name"),rules:[{required:!0}],noStyle:!0,__source:{fileName:x,lineNumber:389,columnNumber:27}},v.a.createElement(m.a,{placeholder:"玩家名称",__source:{fileName:x,lineNumber:394,columnNumber:29}})),v.a.createElement(g.a.Item,{field:"".concat(e.field,".player_note"),rules:[{required:!0}],noStyle:!0,__source:{fileName:x,lineNumber:396,columnNumber:27}},v.a.createElement(m.a,{placeholder:"玩家备注",__source:{fileName:x,lineNumber:401,columnNumber:29}})),v.a.createElement(c.a,{icon:v.a.createElement(o.a,{__source:{fileName:x,lineNumber:404,columnNumber:35}}),shape:"circle",status:"danger",onClick:function(){return n(r)},__source:{fileName:x,lineNumber:403,columnNumber:27}}))))})),v.a.createElement(g.a.Item,l()({},C,{__source:{fileName:x,lineNumber:414,columnNumber:17}}),v.a.createElement(c.a,{onClick:function(){t()},__source:{fileName:x,lineNumber:415,columnNumber:19}},"添加玩家")))})),v.a.createElement(k,l()({},C,{__source:{fileName:x,lineNumber:441,columnNumber:9}}),v.a.createElement(c.a,{onClick:N()(y.a.mark((function e(){var l,u,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.current){e.next=26;break}return e.prev=1,e.next=4,a.current.validate();case 4:if(null!==t){e.next=12;break}return null!==(l=a.current.getFields()).game_player&&void 0!==l.game_player||(l.game_player=[]),e.next=9,Object(S.i)(l);case 9:u=e.sent,e.next=18;break;case 12:return c=a.current.getFields(),console.log("param: ",c),c.store_code=t.store_code,e.next=17,Object(S.U)(c);case 17:u=e.sent;case 18:200===u.code&&(n.a.success("添加成功"),r()),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0),console.log(a.current.getFieldsError()),n.a.error("校验失败，请检查字段！");case 26:case"end":return e.stop()}}),e,null,[[1,21]])}))),type:"primary",style:{marginRight:24},__source:{fileName:x,lineNumber:442,columnNumber:11}},"提交"),v.a.createElement(c.a,{onClick:function(){a.current.resetFields()},__source:{fileName:x,lineNumber:476,columnNumber:11}},"重置"))))}},190:function(e,r,t){"use strict";t.r(r),t.d(r,"default",(function(){return c}));var n=t(0),a=t.n(n),l=t(174),u="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/gameDetail/index.tsx";function c(e){var r=e.clickItem;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{__source:{fileName:u,lineNumber:6,columnNumber:7}},a.a.createElement(l.default,{clickItem:r,__source:{fileName:u,lineNumber:7,columnNumber:9}})))}},191:function(e,r,t){"use strict";t.r(r);var n=t(5),a=t.n(n),l=(t(65),t(24)),u=(t(112),t(45)),c=(t(155),t(74)),o=(t(251),t(96)),m=(t(175),t(85)),i=t(56),s=t.n(i),b=t(22),_=t.n(b),f=(t(250),t(73)),N=t(35),d=t.n(N),p=t(0),g=t.n(p),E=t(111),y=t(83),h=t(167),v=t.n(h),O="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/stargameform/index.jsx",j=f.a.Item,S={labelCol:{span:7},wrapperCol:{span:17}},w={wrapperCol:{span:17,offset:7}};r.default=function(e){var r=e.closeModalAndReqTable,t=e.clickItem,n=Object(p.useRef)(),i=Object(p.useState)(!1),b=_()(i,2),N=b[0],h=b[1],x=Object(p.useState)([]),k=_()(x,2),I=k[0],C=k[1],P=Object(p.useState)(!0),D=_()(P,2),A=D[0],T=D[1],q=Object(p.useState)([]),R=_()(q,2),F=(R[0],R[1]),L=Object(p.useState)([]),M=_()(L,2),z=M[0],U=M[1],J=Object(p.useState)([]),V=_()(J,2),G=(V[0],V[1]),W=Object(p.useState)(!1),B=_()(W,2),K=(B[0],B[1]),Q=Object(p.useState)([]),H=_()(Q,2),X=H[0],Y=H[1],Z=Object(p.useState)(!1),$=_()(Z,2),ee=$[0],re=$[1],te=Object(p.useState)([]),ne=_()(te,2),ae=(ne[0],ne[1]),le=Object(p.useState)(!1),ue=_()(le,2),ce=(ue[0],ue[1]),oe=Object(p.useRef)(null);Object(p.useEffect)((function(){console.log("clickItem2222",t),fe(t.store_code),n.current.setFieldsValue({store_code:t.store_code,room_code:t.room_code,dm_user:"demo"})}),[]),Object(p.useEffect)((function(){Object(E.y)().then((function(e){var r,t=e.data;r=t.map((function(e){return function e(r){var t=Array.isArray(r.region_children)&&r.region_children.length>0;return{key:String(r.region_id),value:String(r.region_id),label:r.region_name,children:t?r.region_children.map((function(r){return e(r)})):[]}}(e)})),F(r)}))}),[]);var me=function(){var e=s()(d.a.mark((function e(){var r,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.S)();case 2:r=e.sent,t=r.data,T(!1),C(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){me()}),[]);var ie=function(){var e=s()(d.a.mark((function e(){var r,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={store_code:t.store_code,room_code:t.room_code,game_code:t.game_code},e.next=3,Object(y.j)(r);case 3:n=e.sent,a=n.data,h(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){ie()}),[]);var se=Object(p.useCallback)(v()((function(e){oe.current=Date.now(),K(!0),G([]);var r={gb_title:e};Object(E.q)(r).then((function(e){var r=e.data.map((function(e){return{label:g.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:O,lineNumber:140,columnNumber:13}},g.a.createElement(m.a,{shape:"square",size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:O,lineNumber:141,columnNumber:15}},g.a.createElement("img",{alt:"avatar",src:e.gb_cover,__source:{fileName:O,lineNumber:142,columnNumber:17}})),"".concat(e.gb_title)),value:e.gb_code}}));K(!1),G(r)}))}),500),[]),be=Object(p.useCallback)(v()((function(e){oe.current=Date.now(),re(!0),G([]);var r={user_nick:e};Object(y.d)(r).then((function(e){var r=e.data.map((function(e){return{label:g.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:O,lineNumber:165,columnNumber:13}},g.a.createElement(m.a,{size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:O,lineNumber:166,columnNumber:15}},g.a.createElement("img",{alt:"avatar",src:e.user_photo,__source:{fileName:O,lineNumber:167,columnNumber:17}})),"".concat(e.user_nick)),value:e.user_account}}));re(!1),Y(r)}))}),500),[]),_e=Object(p.useCallback)(v()((function(e){oe.current=Date.now(),K(!0),G([]);var r={member_name:e};Object(y.g)(r).then((function(e){console.log("data: ",e);var r=e.data.map((function(e){return{label:g.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:O,lineNumber:191,columnNumber:13}},g.a.createElement(m.a,{size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:O,lineNumber:192,columnNumber:15}},g.a.createElement("img",{alt:"avatar",src:e.member_face,__source:{fileName:O,lineNumber:193,columnNumber:17}})),"".concat(e.member_name)),value:e.member_account}}));ce(!1),console.log("options",r),ae(r)}))}),500),[]);Object(p.useEffect)((function(){se(),_e(),be()}),[]);var fe=function(){var e=s()(d.a.mark((function e(r){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={store_code:r},e.next=3,Object(E.g)(t);case 3:n=e.sent,a=n.data.store_room,U(a);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return g.a.createElement("div",{style:{maxWidth:650},__source:{fileName:O,lineNumber:224,columnNumber:5}},g.a.createElement(f.a,a()({ref:n},S,{size:"default",onSubmit:function(e){console.log(e)},onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:O,lineNumber:225,columnNumber:7}}),g.a.createElement(j,{label:"当前店铺",field:"store_code",rules:[{required:!1,message:"请填写店铺编码"}],__source:{fileName:O,lineNumber:235,columnNumber:9}},g.a.createElement(o.a,{disabled:!0,onChange:function(){var e=s()(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fe(r);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),loading:A,placeholder:"请选择店铺",__source:{fileName:O,lineNumber:240,columnNumber:11}},null==I?void 0:I.map((function(e){return g.a.createElement(o.a.Option,{key:e.store_code,value:e.store_code,__source:{fileName:O,lineNumber:250,columnNumber:17}},e.store_name)})))),g.a.createElement(j,{label:"房间",field:"room_code",rules:[{required:!1,message:"请填写店铺编码"}],__source:{fileName:O,lineNumber:257,columnNumber:9}},g.a.createElement(o.a,{disabled:!0,placeholder:"请选择房间",__source:{fileName:O,lineNumber:262,columnNumber:11}},z.map((function(e){return g.a.createElement(o.a.Option,{key:e.room_code,value:e.room_code,__source:{fileName:O,lineNumber:265,columnNumber:17}},e.room_name)})))),g.a.createElement(j,{label:"剧本",field:"gb_code",rules:[{required:!1,message:"请选择剧本"}],__source:{fileName:O,lineNumber:273,columnNumber:9}},g.a.createElement("span",{__source:{fileName:O,lineNumber:274,columnNumber:11}},N.gb_title)),g.a.createElement(j,{label:"主持人",field:"dm_user",rules:[{required:!0,message:"请填写主持人"}],__source:{fileName:O,lineNumber:284,columnNumber:9}},g.a.createElement(o.a,{style:{width:345},options:X,placeholder:"请选择主持人",filterOption:!1,renderFormat:function(e){return null===e?null:e.children.props.children[1]},notFoundContent:ee?g.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},__source:{fileName:O,lineNumber:302,columnNumber:17}},g.a.createElement(c.a,{style:{margin:12},__source:{fileName:O,lineNumber:303,columnNumber:19}})):null,showSearch:!0,onSearch:be,__source:{fileName:O,lineNumber:289,columnNumber:11}})),g.a.createElement(j,a()({},w,{__source:{fileName:O,lineNumber:312,columnNumber:9}}),g.a.createElement(l.a,{onClick:s()(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=19;break}return e.prev=1,e.next=4,n.current.validate();case 4:return a=e.sent,console.log("param: ",a),a.gb_code=t.gb_code,a.dm_user=a.gb_code,a.game_code=N.game_code,e.next=11,Object(E.T)(a);case 11:200===e.sent.code&&(u.a.success("添加成功"),r()),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(n.current.getFieldsError()),u.a.error("校验失败，请检查字段！");case 19:case"end":return e.stop()}}),e,null,[[1,15]])}))),type:"primary",style:{marginRight:24},__source:{fileName:O,lineNumber:313,columnNumber:11}},"开始游戏"))))}},212:function(e,r,t){"use strict";t.r(r);t(677);var n=t(676),a=(t(665),t(666)),l=(t(334),t(254)),u=(t(251),t(96)),c=(t(670),t(671)),o=(t(363),t(266)),m=(t(333),t(252)),i=(t(250),t(73)),s=(t(113),t(40)),b=t(4),_=t.n(b),f=(t(673),t(674)),N=(t(112),t(45)),d=t(56),p=t.n(d),g=(t(65),t(24)),E=(t(156),t(82)),y=(t(350),t(262)),h=t(22),v=t.n(h),O=t(686),j=t.n(O),S=t(35),w=t.n(S),x=t(0),k=t.n(x),I=t(32),C=t(111),P=t(190),D=t(356),A=t(36),T=t(652),q=t.n(T),R=t(189),F=t(191),L="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/index.tsx";function M(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?M(Object(t),!0).forEach((function(r){_()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.default=function(e){j()(e);var r=Object(A.a)(),t=Object(x.useState)(!1),b=v()(t,2),_=b[0],d=b[1],h=Object(x.useState)(!1),O=v()(h,2),S=O[0],T=O[1],M=Object(x.useState)(!1),U=v()(M,2),J=U[0],V=U[1],G=Object(x.useState)(!1),W=v()(G,2),B=W[0],K=W[1],Q=Object(x.useState)(null),H=v()(Q,2),X=H[0],Y=H[1],Z=Object(x.useState)(null),$=v()(Z,2),ee=$[0],re=$[1],te=Object(x.useState)(null),ne=v()(te,2),ae=ne[0],le=ne[1],ue=Object(x.useState)(null),ce=v()(ue,2),oe=ce[0],me=ce[1],ie=Object(x.useState)([]),se=v()(ie,2),be=se[0],_e=se[1],fe=Object(x.useState)(!1),Ne=v()(fe,2),de=Ne[0],pe=Ne[1];Object(x.useEffect)((function(){_e(JSON.parse(localStorage.getItem("Allshop")).store_code)}),[]);var ge=[{title:"剧本名称",dataIndex:"gb_title"},{title:"店铺",dataIndex:"store_code",render:function(e){return JSON.parse(localStorage.getItem("SMap"))[e]}},{title:"房间",dataIndex:"room_code",render:function(e){return JSON.parse(localStorage.getItem("SMap"))[e]}},{title:"玩家人数",dataIndex:"game_people"},{title:"状态",dataIndex:"game_status",render:function(e){return k.a.createElement(E.a,{__source:{fileName:L,lineNumber:78,columnNumber:11}},k.a.createElement(y.a,{status:"default",__source:{fileName:L,lineNumber:79,columnNumber:13}}),JSON.parse(localStorage.getItem("AllMaP")).sys_game_status[e]||e)}},{title:"主持人",dataIndex:"dm_user"},{title:"开局时间",dataIndex:"start_time"},{title:r["searchTable.columns.createdTime"],dataIndex:"created_time"},{title:"更新时间",dataIndex:"updated_time"},{title:r["searchTable.columns.operations"],fixed:"right",width:230,render:function(e,r){return k.a.createElement(E.a,{__source:{fileName:L,lineNumber:107,columnNumber:9}},"1"===r.game_status&&k.a.createElement(g.a,{onClick:function(){Y(r),K(!0)},size:"mini",type:"primary",__source:{fileName:L,lineNumber:119,columnNumber:13}},"开始游戏"),"2"===r.game_status&&k.a.createElement(f.a,{title:"确定结束游戏?",onOk:p()(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),onCancel:function(){N.a.error({content:"取消"})},__source:{fileName:L,lineNumber:132,columnNumber:13}},k.a.createElement(g.a,{onClick:function(){Y(r),T(!0)},size:"mini",type:"primary",status:"warning",__source:{fileName:L,lineNumber:139,columnNumber:15}},"结束游戏")),k.a.createElement(g.a,{size:"mini",onClick:p()(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y(r),d(!0);case 2:case"end":return e.stop()}}),e)}))),__source:{fileName:L,lineNumber:152,columnNumber:11}},"游戏详情"))}}];Object(x.useEffect)((function(){Ee()}),[]);var Ee=function(){var e=p()(w.a.mark((function e(){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.S)();case 2:r=e.sent,console.log("data: ",r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=Object(I.c)((function(e){return e.searchTable})),he=ye.data,ve=ye.pagination,Oe=ye.formParams,je=Object(I.b)();function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object(C.c)({page:e,page_size:r,store_code:ee,gb_code:ae,game_people:oe});pe(!0),n.then((function(e){pe(!1);var r=e.data,n=e.paginator;je({type:D.UPDATE_LIST,payload:{data:r}}),je({type:D.UPDATE_PAGINATION,payload:{pagination:z(z({},ve),{},{current:n.page,pageSize:n.page_size,total:n.total_count})}}),je({type:D.UPDATE_LOADING,payload:{loading:!1}}),je({type:D.UPDATE_FORM_PARAMS,payload:{params:t}})}))}return Object(x.useEffect)((function(){return Se(),function(){je({type:D.UPDATE_LIST,payload:{data:[]}})}}),[ee]),Object(x.useEffect)((function(){re(localStorage.getItem("nowshop"))}),[]),k.a.createElement("div",{className:q.a.container,__source:{fileName:L,lineNumber:224,columnNumber:5}},k.a.createElement(m.a,{onCancel:function(){T(!1)},footer:null,visible:S,__source:{fileName:L,lineNumber:225,columnNumber:7}},k.a.createElement(i.a,{onSubmit:function(){var e=p()(w.a.mark((function e(r){var t,n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X.game_code,n=X.store_code,a={game_code:t,store_code:n,extra_amount:r.extra_amount},console.log(a),e.next=5,Object(C.Q)(a);case 5:200===e.sent.code&&(N.a.info({content:"ok"}),T(!1),Se());case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),initialValues:{extra_amount:0},__source:{fileName:L,lineNumber:232,columnNumber:9}},k.a.createElement(i.a.Item,{field:"extra_amount",label:"附加费",__source:{fileName:L,lineNumber:252,columnNumber:11}},k.a.createElement(s.a,{style:{width:200},__source:{fileName:L,lineNumber:253,columnNumber:13}})),k.a.createElement(i.a.Item,{style:{width:"100%",display:"flex",justifyContent:"center"},__source:{fileName:L,lineNumber:255,columnNumber:11}},k.a.createElement(g.a,{style:{marginLeft:120},type:"primary",htmlType:"submit",__source:{fileName:L,lineNumber:256,columnNumber:13}},"结束游戏")))),k.a.createElement(o.a,{onCancel:function(){d(!1)},footer:null,visible:_,title:"游戏详情",unmountOnExit:!0,width:"90vw",__source:{fileName:L,lineNumber:262,columnNumber:7}},k.a.createElement(P.default,{clickItem:X,__source:{fileName:L,lineNumber:272,columnNumber:9}})),k.a.createElement(m.a,{title:null===X?"添加组局":"修改组局",footer:null,onCancel:function(){V(!1)},unmountOnExit:!0,style:{width:900,minWidth:900},visible:J,__source:{fileName:L,lineNumber:274,columnNumber:7}},k.a.createElement(R.default,{clickItem:X,closeModalAndReqTable:function(){V(!1),Se()},__source:{fileName:L,lineNumber:284,columnNumber:9}})),k.a.createElement(m.a,{title:"开始游戏",footer:null,onCancel:function(){K(!1)},unmountOnExit:!0,style:{width:900,minWidth:900},visible:B,__source:{fileName:L,lineNumber:292,columnNumber:7}},k.a.createElement(F.default,{clickItem:X,closeModalAndReqTable:function(){K(!1),Se()},__source:{fileName:L,lineNumber:303,columnNumber:9}})),k.a.createElement(c.a,{style:{marginBottom:20},__source:{fileName:L,lineNumber:312,columnNumber:7}},k.a.createElement(c.a.Item,{__source:{fileName:L,lineNumber:313,columnNumber:9}},"店铺运营"),k.a.createElement(c.a.Item,{__source:{fileName:L,lineNumber:314,columnNumber:9}},"店铺组局")),k.a.createElement("div",{__source:{fileName:L,lineNumber:316,columnNumber:7}},k.a.createElement(a.a,{style:{marginBottom:20},__source:{fileName:L,lineNumber:317,columnNumber:9}},k.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},__source:{fileName:L,lineNumber:318,columnNumber:11}},k.a.createElement(g.a,{onClick:function(){V(!0),Y(null)},type:"primary",__source:{fileName:L,lineNumber:319,columnNumber:13}},"添加组局"),k.a.createElement("div",{__source:{fileName:L,lineNumber:328,columnNumber:13}},k.a.createElement(E.a,{style:{marginLeft:20},wrap:!0,__source:{fileName:L,lineNumber:329,columnNumber:15}},k.a.createElement(u.a,{value:ee,onChange:function(e){re(e)},style:{width:200},placeholder:"请选择店铺",__source:{fileName:L,lineNumber:330,columnNumber:17}},be.map((function(e){return k.a.createElement(u.a.Option,{key:e.code,value:e.code,__source:{fileName:L,lineNumber:340,columnNumber:23}},e.name)}))),k.a.createElement(s.a,{value:ae,onChange:function(e){le(e)},placeholder:"请输入剧本编码",style:{width:200},__source:{fileName:L,lineNumber:347,columnNumber:17}}),k.a.createElement(l.a,{min:1,value:oe,onChange:function(e){me(e)},placeholder:"请输入玩家人数",style:{width:200},__source:{fileName:L,lineNumber:355,columnNumber:17}}),k.a.createElement(g.a,{onClick:function(){},__source:{fileName:L,lineNumber:365,columnNumber:17}},"重置"),k.a.createElement(g.a,{onClick:function(){Se()},type:"primary",__source:{fileName:L,lineNumber:366,columnNumber:17}},"搜索")))))),k.a.createElement(a.a,{bordered:!1,__source:{fileName:L,lineNumber:379,columnNumber:7}},k.a.createElement(n.a,{loading:de,onChange:function(e){Se(e.current,e.pageSize,Oe)},pagination:ve,columns:ge,scroll:{x:2e3},data:he,__source:{fileName:L,lineNumber:380,columnNumber:9}})))}},356:function(e,r,t){"use strict";t.r(r),t.d(r,"UPDATE_LIST",(function(){return n})),t.d(r,"UPDATE_LOADING",(function(){return a})),t.d(r,"UPDATE_PAGINATION",(function(){return l})),t.d(r,"UPDATE_FORM_PARAMS",(function(){return u}));var n="searchTable_update_list",a="searchTable_update_loading",l="searchTable_update_pagination",u="searchTable_update_formParams"},639:function(e,r,t){},652:function(e,r,t){e.exports={container:"container-a393421ccd",toolbar:"toolbar-a31128d7de",operations:"operations-807e4a3204"}}}]);