(window.webpackJsonp=window.webpackJsonp||[]).push([[6,11,12,21,26],{160:function(e,r,t){"use strict";t.r(r);t(147);var a=t(70),l=(t(528),t(539)),m=(t(501),t(503)),n=t(0),u=t.n(n),c=t(28),o=t(87),i=t.n(o),s=t(265),b=t(266),N=t(267),p=t(48),f=t(32),_=t(492),d=t.n(_),E="/Users/mrhh/Desktop/gbs-admin/src/pages/step-form/index.tsx";r.default=function(){var e=Object(f.a)(),r=Object(c.c)((function(e){return e.stepForm})),t=Object(c.b)(),o=r.loading,_=r.step;return Object(n.useEffect)((function(){i.a.get("/api/stepForm").then((function(e){t({type:p.UPDATE_FORM,payload:{data:e.data||{}}})})).finally((function(){t({type:p.UPDATE_LOADING,payload:{loading:!1}})}))}),[]),u.a.createElement("div",{className:d.a.container,__source:{fileName:E,lineNumber:36,columnNumber:5}},u.a.createElement(m.a,{style:{marginBottom:20},__source:{fileName:E,lineNumber:37,columnNumber:7}},u.a.createElement(m.a.Item,{__source:{fileName:E,lineNumber:38,columnNumber:9}},e["menu.form.step"])),u.a.createElement(a.a,{loading:o,style:{width:"100%"},__source:{fileName:E,lineNumber:40,columnNumber:7}},u.a.createElement("div",{className:d.a.wrapper,__source:{fileName:E,lineNumber:41,columnNumber:9}},u.a.createElement(l.a,{labelPlacement:"vertical",className:d.a.steps,current:_,__source:{fileName:E,lineNumber:42,columnNumber:11}},u.a.createElement(l.a.Step,{title:e["stepForm.step.title.baseInfo"],description:e["stepForm.step.subTitle.baseInfo"],__source:{fileName:E,lineNumber:43,columnNumber:13}}),u.a.createElement(l.a.Step,{title:e["stepForm.step.title.target"],description:e["stepForm.step.subTitle.target"],__source:{fileName:E,lineNumber:47,columnNumber:13}}),u.a.createElement(l.a.Step,{title:e["stepForm.step.title.finish"],description:e["stepForm.step.subTitle.finish"],__source:{fileName:E,lineNumber:51,columnNumber:13}})),1===_&&u.a.createElement(s.default,{__source:{fileName:E,lineNumber:56,columnNumber:26}}),2===_&&u.a.createElement(b.default,{__source:{fileName:E,lineNumber:57,columnNumber:26}}),3===_&&u.a.createElement(N.default,{__source:{fileName:E,lineNumber:58,columnNumber:26}}))))}},265:function(e,r,t){"use strict";t.r(r);t(75);var a=t(27),l=(t(276),t(204)),m=(t(191),t(89)),n=(t(263),t(196)),u=(t(507),t(511)),c=(t(508),t(510)),o=(t(260),t(108)),i=(t(145),t(50)),s=t(24),b=t.n(s),N=t(0),p=t.n(N),f=t(28),_=t(87),d=t.n(_),E=t(48),y=t(32),g=t(492),F=t.n(g),O="/Users/mrhh/Desktop/gbs-admin/src/pages/step-form/base-info.tsx";r.default=function(){var e=Object(y.a)(),r=Object(f.c)((function(e){return e.stepForm})),t=Object(f.b)(),s=r.data,_=r.activeKeys,g=Object(N.useRef)(),h=Object(N.useState)([]),v=b()(h,2),j=v[0],w=v[1],P=Object(N.useState)([]),k=b()(P,2),D=k[0],I=k[1],A=function(e){d.a.get("/api/lineList",{params:{cluster:e}}).then((function(e){I(e.data||[]),!s.lineName&&e.data.length&&g.current&&g.current.setFieldValue("lineName",e.data[0].value)}))};return Object(N.useEffect)((function(){d.a.get("/api/clusterList").then((function(e){w(e.data||[])}))}),[]),Object(N.useEffect)((function(){g.current.setFieldsValue(s),s.cluster&&A(s.cluster[0])}),[s]),Object(N.useEffect)((function(){return function(){var e,r=(null===(e=g.current)||void 0===e?void 0:e.getFieldsValue())||{};t({type:E.UPDATE_FORM,payload:{data:r}})}}),[]),p.a.createElement(o.a,{className:F.a.form,ref:g,__source:{fileName:O,lineNumber:93,columnNumber:5}},p.a.createElement(u.a,{bordered:!1,activeKey:_,onChange:function(e,r){t({type:E.UPDATE_ACTIVE_KEYS,payload:{activeKeys:r}})},__source:{fileName:O,lineNumber:94,columnNumber:7}},p.a.createElement(u.a.Item,{name:"baseConfig",header:e["stepForm.collapse.title.base"],__source:{fileName:O,lineNumber:95,columnNumber:9}},p.a.createElement("div",{className:F.a["form-content"],__source:{fileName:O,lineNumber:96,columnNumber:11}},p.a.createElement(o.a.Item,{label:e["stepForm.form.label.name"],field:"name",rules:[{required:!0,message:e["stepForm.form.error.name.required"]},{match:/^[a-zA-z0-9][-a-zA-z0-9]{0,62}(\.[a-zA-z0-9][-a-zA-z0-9]{0,62})+$/,message:e["stepForm.form.error.name.pattern"]}],__source:{fileName:O,lineNumber:97,columnNumber:13}},p.a.createElement(i.a,{placeholder:e["stepForm.placeholder.name"],__source:{fileName:O,lineNumber:108,columnNumber:15}})),p.a.createElement(o.a.Item,{label:e["stepForm.form.label.purpose"],field:"purpose",rules:[{required:!0,message:e["stepForm.form.error.purpose.required"]}],__source:{fileName:O,lineNumber:110,columnNumber:13}},p.a.createElement(i.a,{placeholder:e["stepForm.placeholder.purpose"],__source:{fileName:O,lineNumber:115,columnNumber:15}})),p.a.createElement(o.a.Item,{label:e["stepForm.form.label.cluster"],field:"cluster",__source:{fileName:O,lineNumber:117,columnNumber:13}},p.a.createElement(c.a,{placeholder:e["stepForm.placeholder.cluster"],options:j,onChange:function(e){var r=Array.isArray(e)&&e[e.length-1];g.current&&g.current.setFieldValue("lineName",void 0),r?A(r):I([])},__source:{fileName:O,lineNumber:118,columnNumber:15}})))),p.a.createElement(u.a.Item,{name:"advanceConfig",header:e["stepForm.collapse.title.highLevel"],__source:{fileName:O,lineNumber:126,columnNumber:9}},p.a.createElement(n.a,{closable:!0,banner:!0,type:"warning",content:e["stepForm.alert.highLevel"],__source:{fileName:O,lineNumber:127,columnNumber:11}}),p.a.createElement("div",{className:F.a["form-content"],__source:{fileName:O,lineNumber:128,columnNumber:11}},p.a.createElement(o.a.Item,{label:e["stepForm.form.label.type"],field:"type",__source:{fileName:O,lineNumber:129,columnNumber:13}},p.a.createElement(m.a,{placeholder:e["stepForm.placeholder.type"],__source:{fileName:O,lineNumber:130,columnNumber:15}},p.a.createElement(m.a.Option,{value:"web",__source:{fileName:O,lineNumber:131,columnNumber:17}},e["stepForm.label.type.web"]),p.a.createElement(m.a.Option,{value:"api",__source:{fileName:O,lineNumber:132,columnNumber:17}},e["stepForm.label.type.api"]))),p.a.createElement(o.a.Item,{label:e["stepForm.form.label.dns"],field:"dns",triggerPropName:"checked",__source:{fileName:O,lineNumber:135,columnNumber:13}},p.a.createElement(l.a,{__source:{fileName:O,lineNumber:140,columnNumber:15}})),p.a.createElement(o.a.Item,{label:e["stepForm.form.label.subDomain"],field:"subDomain",triggerPropName:"checked",__source:{fileName:O,lineNumber:142,columnNumber:13}},p.a.createElement(l.a,{__source:{fileName:O,lineNumber:147,columnNumber:15}})),p.a.createElement(o.a.Item,{label:e["stepForm.form.label.lineName"],field:"lineName",__source:{fileName:O,lineNumber:149,columnNumber:13}},p.a.createElement(m.a,{placeholder:e["stepForm.placeholder.lineName"],__source:{fileName:O,lineNumber:150,columnNumber:15}},D.map((function(e){return p.a.createElement(m.a.Option,{value:e.value,key:"".concat(e.value),__source:{fileName:O,lineNumber:152,columnNumber:19}},e.label)}))))))),p.a.createElement("div",{className:F.a.actions,__source:{fileName:O,lineNumber:161,columnNumber:7}},p.a.createElement(a.a,{type:"primary",onClick:function(){g.current.validate().then((function(){t({type:E.GO_NEXT})}))},__source:{fileName:O,lineNumber:162,columnNumber:9}},e["stepForm.button.next"])))}},266:function(e,r,t){"use strict";t.r(r);t(75);var a=t(27),l=(t(191),t(89)),m=(t(264),t(197)),n=(t(195),t(185)),u=(t(260),t(108)),c=(t(145),t(50)),o=(t(146),t(58)),i=(t(148),t(57)),s=t(6),b=t.n(s),N=t(24),p=t.n(N),f=t(0),_=t.n(f),d=t(28),E=t(87),y=t.n(E),g=t(48),F=t(32),O=t(492),h=t.n(O),v="/Users/mrhh/Desktop/gbs-admin/src/pages/step-form/service.tsx";function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach((function(r){b()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.default=function(){var e=Object(F.a)(),r=Object(d.c)((function(e){return e.stepForm})),t=Object(d.b)(),s=r.data,b=Object(f.useRef)(),N=Object(f.useState)(!1),E=p()(N,2),O=E[0],j=E[1];return Object(f.useEffect)((function(){b.current.setFieldsValue(s)}),[s]),Object(f.useEffect)((function(){return function(){var e,r=(null===(e=b.current)||void 0===e?void 0:e.getFieldsValue())||{};t({type:g.UPDATE_FORM,payload:{data:r}})}}),[]),_.a.createElement(u.a,{ref:b,className:h.a.form,labelCol:{span:5},wrapperCol:{span:19},__source:{fileName:v,lineNumber:71,columnNumber:5}},_.a.createElement(o.a.Title,{style:{marginTop:0,marginBottom:16},heading:6,__source:{fileName:v,lineNumber:72,columnNumber:7}},e["stepForm.form.title.upstream"]),_.a.createElement(u.a.Item,{label:"P.S.M",extra:e["stepForm.form.extra.psm"],required:!0,__source:{fileName:v,lineNumber:75,columnNumber:7}},_.a.createElement(n.a.Row,{align:"center",justify:"space-around",gutter:8,__source:{fileName:v,lineNumber:76,columnNumber:9}},_.a.createElement(n.a.Col,{span:16,__source:{fileName:v,lineNumber:77,columnNumber:11}},_.a.createElement(u.a.Item,{field:"psm",rules:[{required:!0,message:e["stepForm.form.error.psm.required"]}],style:{marginBottom:0},__source:{fileName:v,lineNumber:78,columnNumber:13}},_.a.createElement(c.a,{placeholder:"Product.Subsystem.Module",__source:{fileName:v,lineNumber:83,columnNumber:15}}))),_.a.createElement(n.a.Col,{span:8,__source:{fileName:v,lineNumber:86,columnNumber:11}},_.a.createElement(m.a,{__source:{fileName:v,lineNumber:87,columnNumber:13}},e["stepForm.link.psmDefine"])))),_.a.createElement(u.a.Item,{label:e["stepForm.form.label.strategy"],__source:{fileName:v,lineNumber:91,columnNumber:7}},_.a.createElement(n.a.Row,{align:"center",justify:"space-around",gutter:8,__source:{fileName:v,lineNumber:92,columnNumber:9}},_.a.createElement(n.a.Col,{span:16,__source:{fileName:v,lineNumber:93,columnNumber:11}},_.a.createElement(u.a.Item,{field:"strategy",style:{marginBottom:0},__source:{fileName:v,lineNumber:94,columnNumber:13}},_.a.createElement(l.a,{placeholder:e["stepForm.placeholder.strategy"],__source:{fileName:v,lineNumber:95,columnNumber:15}},_.a.createElement(l.a.Option,{value:"local",__source:{fileName:v,lineNumber:96,columnNumber:17}},"LOCAL"),_.a.createElement(l.a.Option,{value:"all",__source:{fileName:v,lineNumber:97,columnNumber:17}},"ALL")))),_.a.createElement(n.a.Col,{span:8,__source:{fileName:v,lineNumber:101,columnNumber:11}},_.a.createElement(m.a,{__source:{fileName:v,lineNumber:102,columnNumber:13}},e["stepForm.link.selectStrategy"])))),_.a.createElement("div",{className:h.a.actions,__source:{fileName:v,lineNumber:106,columnNumber:7}},_.a.createElement(a.a,{type:"secondary",onClick:function(){t({type:g.GO_PREV})},__source:{fileName:v,lineNumber:107,columnNumber:9}},e["stepForm.button.prev"]),_.a.createElement(a.a,{loading:O,type:"primary",onClick:function(){b.current.validate().then((function(){!function(){j(!0);var e=b.current.getFieldsValue();console.log("formData: ",e),console.log(s),y.a.post("/api/domainApply",{data:w(w({},s),e)}).finally((function(){j(!1)})).then((function(){t({type:g.GO_NEXT})})).catch((function(e){i.a.error(e.message)}))}()}))},__source:{fileName:v,lineNumber:115,columnNumber:9}},e["stepForm.button.submit"])))}},267:function(e,r,t){"use strict";t.r(r);t(509);var a=t(512),l=(t(75),t(27)),m=t(0),n=t.n(m),u=t(28),c=t(48),o=t(32),i="/Users/mrhh/Desktop/gbs-admin/src/pages/step-form/success.tsx";r.default=function(){var e=Object(o.a)(),r=Object(u.b)();return n.a.createElement(a.a,{status:"success",title:e["stepForm.success.title"],subTitle:e["stepForm.success.subTitle"],extra:[n.a.createElement(l.a,{key:"again",type:"secondary",style:{marginRight:16},onClick:function(){r({type:c.GO,payload:{step:1}})},__source:{fileName:i,lineNumber:19,columnNumber:9}},e["stepForm.button.again"]),n.a.createElement(l.a,{key:"view",type:"primary",__source:{fileName:i,lineNumber:29,columnNumber:9}},e["stepForm.button.view"])],__source:{fileName:i,lineNumber:14,columnNumber:5}})}},492:function(e,r,t){e.exports={container:"container-6427058b85",wrapper:"wrapper-1eba4af8b8",steps:"steps-79df5ed959",form:"form-2a6f8eda19","form-content":"form-content-96ca552934",actions:"actions-df2cdcf708"}}}]);