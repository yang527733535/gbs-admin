(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{186:function(e,r,n){"use strict";n.r(r);var t=n(5),a=n.n(t),c=(n(64),n(24)),l=(n(111),n(45)),u=(n(155),n(74)),o=(n(245),n(96)),m=(n(173),n(85)),i=n(65),s=n.n(i),b=n(22),f=n.n(b),_=(n(244),n(73)),N=n(44),d=n.n(N),p=n(0),g=n.n(p),v=n(243),h=n(83),E=n(166),O=n.n(E),j="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/stargameform/index.jsx",y=_.a.Item,w={labelCol:{span:7},wrapperCol:{span:17}},k={wrapperCol:{span:17,offset:7}};r.default=function(e){e.closeModalAndReqTable;var r=e.clickItem,n=Object(p.useRef)(),t=Object(p.useState)([]),i=f()(t,2),b=i[0],N=i[1],E=Object(p.useState)(!0),x=f()(E,2),S=x[0],C=x[1],I=Object(p.useState)([]),q=f()(I,2),R=(q[0],q[1]),F=Object(p.useState)([]),z=f()(F,2),D=z[0],A=z[1],L=Object(p.useState)([]),V=f()(L,2),J=(V[0],V[1]),T=Object(p.useState)(!1),M=f()(T,2),U=(M[0],M[1]),W=Object(p.useState)([]),B=f()(W,2),G=B[0],H=B[1],K=Object(p.useState)(!1),P=f()(K,2),Q=P[0],X=P[1],Y=Object(p.useState)([]),Z=f()(Y,2),$=(Z[0],Z[1]),ee=Object(p.useState)(!1),re=f()(ee,2),ne=(re[0],re[1]),te=Object(p.useRef)(null);Object(p.useEffect)((function(){console.log("clickItem2222",r),oe(r.store_code),n.current.setFieldsValue({store_code:r.store_code,room_code:r.room_code})}),[]),Object(p.useEffect)((function(){Object(v.u)().then((function(e){var r,n=e.data;r=n.map((function(e){return function e(r){var n=Array.isArray(r.region_children)&&r.region_children.length>0;return{key:String(r.region_id),value:String(r.region_id),label:r.region_name,children:n?r.region_children.map((function(r){return e(r)})):[]}}(e)})),R(r)}))}),[]);var ae=function(){var e=s()(d.a.mark((function e(){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.I)();case 2:r=e.sent,n=r.data,C(!1),N(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){ae()}),[]);var ce=Object(p.useCallback)(O()((function(e){te.current=Date.now(),U(!0),J([]);var r={gb_title:e};Object(v.n)(r).then((function(e){var r=e.data.map((function(e){return{label:g.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:j,lineNumber:121,columnNumber:13}},g.a.createElement(m.a,{shape:"square",size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:j,lineNumber:122,columnNumber:15}},g.a.createElement("img",{alt:"avatar",src:e.gb_cover,__source:{fileName:j,lineNumber:123,columnNumber:17}})),"".concat(e.gb_title)),value:e.gb_code}}));U(!1),J(r)}))}),500),[]),le=Object(p.useCallback)(O()((function(e){te.current=Date.now(),X(!0),J([]);var r={user_nick:e};Object(h.b)(r).then((function(e){var r=e.data.map((function(e){return{label:g.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:j,lineNumber:146,columnNumber:13}},g.a.createElement(m.a,{size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:j,lineNumber:147,columnNumber:15}},g.a.createElement("img",{alt:"avatar",src:e.user_photo,__source:{fileName:j,lineNumber:148,columnNumber:17}})),"".concat(e.user_nick)),value:e.user_account}}));X(!1),H(r)}))}),500),[]),ue=Object(p.useCallback)(O()((function(e){te.current=Date.now(),U(!0),J([]);var r={member_name:e};Object(h.e)(r).then((function(e){console.log("data: ",e);var r=e.data.map((function(e){return{label:g.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:j,lineNumber:172,columnNumber:13}},g.a.createElement(m.a,{size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:j,lineNumber:173,columnNumber:15}},g.a.createElement("img",{alt:"avatar",src:e.member_face,__source:{fileName:j,lineNumber:174,columnNumber:17}})),"".concat(e.member_name)),value:e.member_account}}));ne(!1),console.log("options",r),$(r)}))}),500),[]);Object(p.useEffect)((function(){ce(),ue(),le()}),[]);var oe=function(){var e=s()(d.a.mark((function e(r){var n,t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={store_code:r},e.next=3,Object(v.e)(n);case 3:t=e.sent,a=t.data.store_room,A(a);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return g.a.createElement("div",{style:{maxWidth:650},__source:{fileName:j,lineNumber:205,columnNumber:5}},g.a.createElement(_.a,a()({ref:n},w,{size:"default",onSubmit:function(e){console.log(e)},onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:j,lineNumber:206,columnNumber:7}}),g.a.createElement(y,{label:"当前店铺",field:"store_code",rules:[{required:!1,message:"请填写店铺编码"}],__source:{fileName:j,lineNumber:216,columnNumber:9}},g.a.createElement(o.a,{disabled:!0,onChange:function(){var e=s()(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe(r);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),loading:S,placeholder:"请选择店铺",__source:{fileName:j,lineNumber:221,columnNumber:11}},null==b?void 0:b.map((function(e){return g.a.createElement(o.a.Option,{key:e.store_code,value:e.store_code,__source:{fileName:j,lineNumber:231,columnNumber:17}},e.store_name)})))),g.a.createElement(y,{label:"选择房间",field:"room_code",rules:[{required:!1,message:"请填写店铺编码"}],__source:{fileName:j,lineNumber:238,columnNumber:9}},g.a.createElement(o.a,{disabled:!0,placeholder:"请选择房间",__source:{fileName:j,lineNumber:243,columnNumber:11}},D.map((function(e){return g.a.createElement(o.a.Option,{key:e.room_code,value:e.room_code,__source:{fileName:j,lineNumber:246,columnNumber:17}},e.room_name)})))),g.a.createElement(y,{label:"剧本",field:"gb_code",rules:[{required:!1,message:"请选择剧本"}],__source:{fileName:j,lineNumber:254,columnNumber:9}},g.a.createElement("span",{__source:{fileName:j,lineNumber:255,columnNumber:11}},r.gb_code)),g.a.createElement(y,{label:"游戏编码",field:"game_code",rules:[{required:!1,message:"请选择剧本"}],__source:{fileName:j,lineNumber:257,columnNumber:9}},g.a.createElement("span",{__source:{fileName:j,lineNumber:262,columnNumber:11}},r.game_code)),g.a.createElement(y,{label:"主持人",field:"dm_user",rules:[{required:!0,message:"请填写主持人"}],__source:{fileName:j,lineNumber:265,columnNumber:9}},g.a.createElement(o.a,{style:{width:345},options:G,placeholder:"请选择主持人",filterOption:!1,renderFormat:function(e){return e.children.props.children[1]},notFoundContent:Q?g.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},__source:{fileName:j,lineNumber:280,columnNumber:17}},g.a.createElement(u.a,{style:{margin:12},__source:{fileName:j,lineNumber:281,columnNumber:19}})):null,showSearch:!0,onSearch:le,__source:{fileName:j,lineNumber:270,columnNumber:11}})),g.a.createElement(y,a()({},k,{__source:{fileName:j,lineNumber:290,columnNumber:9}}),g.a.createElement(c.a,{onClick:s()(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=15;break}return e.prev=1,e.next=4,n.current.validate();case 4:return r=e.sent,console.log("param: ",r),e.abrupt("return");case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),console.log(n.current.getFieldsError()),l.a.error("校验失败，请检查字段！");case 15:case"end":return e.stop()}}),e,null,[[1,10]])}))),type:"primary",style:{marginRight:24},__source:{fileName:j,lineNumber:291,columnNumber:11}},"开始游戏"))))}}}]);