(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{186:function(e,r,t){"use strict";t.r(r);var n=t(5),a=t.n(n),c=(t(64),t(24)),u=(t(111),t(45)),o=(t(155),t(74)),l=(t(245),t(96)),m=(t(173),t(85)),i=t(65),s=t.n(i),b=t(22),f=t.n(b),_=(t(244),t(73)),d=t(44),N=t.n(d),p=t(0),g=t.n(p),v=t(243),h=t(83),E=t(166),O=t.n(E),j="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/stargameform/index.jsx",y=_.a.Item,w={labelCol:{span:7},wrapperCol:{span:17}},k={wrapperCol:{span:17,offset:7}};r.default=function(e){var r=e.closeModalAndReqTable,t=e.clickItem,n=Object(p.useRef)(),i=Object(p.useState)(!1),b=f()(i,2),d=b[0],E=b[1],x=Object(p.useState)([]),S=f()(x,2),C=S[0],I=S[1],R=Object(p.useState)(!0),q=f()(R,2),F=q[0],z=q[1],D=Object(p.useState)([]),A=f()(D,2),J=(A[0],A[1]),L=Object(p.useState)([]),V=f()(L,2),T=V[0],K=V[1],M=Object(p.useState)([]),U=f()(M,2),W=(U[0],U[1]),B=Object(p.useState)(!1),G=f()(B,2),H=(G[0],G[1]),P=Object(p.useState)([]),Q=f()(P,2),X=Q[0],Y=Q[1],Z=Object(p.useState)(!1),$=f()(Z,2),ee=$[0],re=$[1],te=Object(p.useState)([]),ne=f()(te,2),ae=(ne[0],ne[1]),ce=Object(p.useState)(!1),ue=f()(ce,2),oe=(ue[0],ue[1]),le=Object(p.useRef)(null);Object(p.useEffect)((function(){console.log("clickItem2222",t),_e(t.store_code),n.current.setFieldsValue({store_code:t.store_code,room_code:t.room_code,dm_user:"demo"})}),[]),Object(p.useEffect)((function(){Object(v.u)().then((function(e){var r,t=e.data;r=t.map((function(e){return function e(r){var t=Array.isArray(r.region_children)&&r.region_children.length>0;return{key:String(r.region_id),value:String(r.region_id),label:r.region_name,children:t?r.region_children.map((function(r){return e(r)})):[]}}(e)})),J(r)}))}),[]);var me=function(){var e=s()(N.a.mark((function e(){var r,t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.J)();case 2:r=e.sent,t=r.data,z(!1),I(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){me()}),[]);var ie=function(){var e=s()(N.a.mark((function e(){var r,n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={store_code:t.store_code,room_code:t.room_code,game_code:t.game_code},e.next=3,Object(h.h)(r);case 3:n=e.sent,a=n.data,E(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){ie()}),[]);var se=Object(p.useCallback)(O()((function(e){le.current=Date.now(),H(!0),W([]);var r={gb_title:e};Object(v.n)(r).then((function(e){var r=e.data.map((function(e){return{label:g.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:j,lineNumber:140,columnNumber:13}},g.a.createElement(m.a,{shape:"square",size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:j,lineNumber:141,columnNumber:15}},g.a.createElement("img",{alt:"avatar",src:e.gb_cover,__source:{fileName:j,lineNumber:142,columnNumber:17}})),"".concat(e.gb_title)),value:e.gb_code}}));H(!1),W(r)}))}),500),[]),be=Object(p.useCallback)(O()((function(e){le.current=Date.now(),re(!0),W([]);var r={user_nick:e};Object(h.b)(r).then((function(e){var r=e.data.map((function(e){return{label:g.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:j,lineNumber:165,columnNumber:13}},g.a.createElement(m.a,{size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:j,lineNumber:166,columnNumber:15}},g.a.createElement("img",{alt:"avatar",src:e.user_photo,__source:{fileName:j,lineNumber:167,columnNumber:17}})),"".concat(e.user_nick)),value:e.user_account}}));re(!1),Y(r)}))}),500),[]),fe=Object(p.useCallback)(O()((function(e){le.current=Date.now(),H(!0),W([]);var r={member_name:e};Object(h.e)(r).then((function(e){console.log("data: ",e);var r=e.data.map((function(e){return{label:g.a.createElement("div",{style:{display:"flex",alignItems:"center"},__source:{fileName:j,lineNumber:191,columnNumber:13}},g.a.createElement(m.a,{size:24,style:{marginLeft:6,marginRight:12},__source:{fileName:j,lineNumber:192,columnNumber:15}},g.a.createElement("img",{alt:"avatar",src:e.member_face,__source:{fileName:j,lineNumber:193,columnNumber:17}})),"".concat(e.member_name)),value:e.member_account}}));oe(!1),console.log("options",r),ae(r)}))}),500),[]);Object(p.useEffect)((function(){se(),fe(),be()}),[]);var _e=function(){var e=s()(N.a.mark((function e(r){var t,n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={store_code:r},e.next=3,Object(v.e)(t);case 3:n=e.sent,a=n.data.store_room,K(a);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return g.a.createElement("div",{style:{maxWidth:650},__source:{fileName:j,lineNumber:224,columnNumber:5}},g.a.createElement(_.a,a()({ref:n},w,{size:"default",onSubmit:function(e){console.log(e)},onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:j,lineNumber:225,columnNumber:7}}),g.a.createElement(y,{label:"当前店铺",field:"store_code",rules:[{required:!1,message:"请填写店铺编码"}],__source:{fileName:j,lineNumber:235,columnNumber:9}},g.a.createElement(l.a,{disabled:!0,onChange:function(){var e=s()(N.a.mark((function e(r){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_e(r);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),loading:F,placeholder:"请选择店铺",__source:{fileName:j,lineNumber:240,columnNumber:11}},null==C?void 0:C.map((function(e){return g.a.createElement(l.a.Option,{key:e.store_code,value:e.store_code,__source:{fileName:j,lineNumber:250,columnNumber:17}},e.store_name)})))),g.a.createElement(y,{label:"房间",field:"room_code",rules:[{required:!1,message:"请填写店铺编码"}],__source:{fileName:j,lineNumber:257,columnNumber:9}},g.a.createElement(l.a,{disabled:!0,placeholder:"请选择房间",__source:{fileName:j,lineNumber:262,columnNumber:11}},T.map((function(e){return g.a.createElement(l.a.Option,{key:e.room_code,value:e.room_code,__source:{fileName:j,lineNumber:265,columnNumber:17}},e.room_name)})))),g.a.createElement(y,{label:"剧本",field:"gb_code",rules:[{required:!1,message:"请选择剧本"}],__source:{fileName:j,lineNumber:273,columnNumber:9}},g.a.createElement("span",{__source:{fileName:j,lineNumber:274,columnNumber:11}},d.gb_title)),g.a.createElement(y,{label:"主持人",field:"dm_user",rules:[{required:!0,message:"请填写主持人"}],__source:{fileName:j,lineNumber:284,columnNumber:9}},g.a.createElement(l.a,{style:{width:345},options:X,placeholder:"请选择主持人",filterOption:!1,renderFormat:function(e){return null===e?null:e.children.props.children[1]},notFoundContent:ee?g.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},__source:{fileName:j,lineNumber:302,columnNumber:17}},g.a.createElement(o.a,{style:{margin:12},__source:{fileName:j,lineNumber:303,columnNumber:19}})):null,showSearch:!0,onSearch:be,__source:{fileName:j,lineNumber:289,columnNumber:11}})),g.a.createElement(y,a()({},k,{__source:{fileName:j,lineNumber:312,columnNumber:9}}),g.a.createElement(c.a,{onClick:s()(N.a.mark((function e(){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=19;break}return e.prev=1,e.next=4,n.current.validate();case 4:return a=e.sent,console.log("param: ",a),a.gb_code=t.gb_code,a.dm_user=a.gb_code,a.game_code=d.game_code,e.next=11,Object(v.K)(a);case 11:200===e.sent.code&&(u.a.success("添加成功"),r()),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(n.current.getFieldsError()),u.a.error("校验失败，请检查字段！");case 19:case"end":return e.stop()}}),e,null,[[1,15]])}))),type:"primary",style:{marginRight:24},__source:{fileName:j,lineNumber:313,columnNumber:11}},"开始游戏"))))}}}]);