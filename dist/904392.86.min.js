(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{321:function(e,r,a){"use strict";a.r(r),a.d(r,"default",(function(){return x}));a(77);var t=a(30),n=(a(148),a(52)),l=a(78),o=a.n(l),u=a(5),m=a.n(u),c=(a(634),a(636)),s=(a(614),a(615)),i=(a(149),a(53)),f=a(24),b=a.n(f),N=(a(311),a(104)),d=a(51),p=a.n(d),_=a(0),g=a.n(_),E=a(229),v="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/storeDetail/roomDetail/roomform.jsx",h=N.a.Item,w={labelCol:{span:5},wrapperCol:{span:17}},k={wrapperCol:{span:17,offset:5}};function x(e){var r=e.saveClickItem,a=e.store_code,l=e.modalType,u=e.closeModal;console.log("saveClickItem: ",r);var f=Object(_.useRef)(),d=Object(_.useState)(""),x=b()(d,2),y=x[0],C=x[1];Object(_.useEffect)((function(){"edit"===l&&(f.current.setFieldsValue(r),C(r.room_image))}),[]);return g.a.createElement("div",{__source:{fileName:v,lineNumber:38,columnNumber:5}},g.a.createElement(N.a,m()({ref:f},w,{onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:v,lineNumber:39,columnNumber:7}}),g.a.createElement(h,{label:"房间名称",field:"room_name",rules:[{required:!0,message:"请输入房间名称"}],__source:{fileName:v,lineNumber:40,columnNumber:9}},g.a.createElement(i.a,{placeholder:"please enter...",__source:{fileName:v,lineNumber:45,columnNumber:11}})),g.a.createElement(h,{label:"房间风格",field:"room_style",rules:[{required:!0,message:"请输入房间风格"}],__source:{fileName:v,lineNumber:47,columnNumber:9}},g.a.createElement(i.a,{placeholder:"please enter...",__source:{fileName:v,lineNumber:52,columnNumber:11}})),g.a.createElement(h,{label:"房间备注",field:"room_note",rules:[{required:!0,message:"请输入房间备注"}],__source:{fileName:v,lineNumber:55,columnNumber:9}},g.a.createElement(i.a,{placeholder:"please enter...",__source:{fileName:v,lineNumber:60,columnNumber:11}})),g.a.createElement(N.a.Item,{label:"房间照片",field:"room_image",triggerPropName:"fileList",__source:{fileName:v,lineNumber:63,columnNumber:9}},g.a.createElement(c.a,{limit:1,renderUploadList:function(){return null},name:"role_cover",customRequest:function(e){var r=e.onProgress,a=e.onError,t=e.onSuccess,n=e.file,l=new XMLHttpRequest;l.upload&&(l.upload.onprogress=function(e){var a;e.total>0&&(a=e.loaded/e.total*100),r(parseInt(a,10),e)}),l.onerror=function(e){a(e)},l.onload=function(){l.status<200||l.status;var e=JSON.parse(l.responseText);C(e.data.file_url),t(e)};var o=new FormData;o.append("up_file",n),o.append("module","drama"),l.open("post","https://gbs.toptian.com/system/upload/image",!0),l.setRequestHeader("Authorization",localStorage.getItem("token")),l.send(o)},onPreview:function(e){s.a.info({title:"Preview",content:g.a.createElement("img",{src:e.url||URL.createObjectURL(e.originFile),style:{maxWidth:"100%"},__source:{fileName:v,lineNumber:113,columnNumber:19}})})},__source:{fileName:v,lineNumber:76,columnNumber:11}})),""===y?null:g.a.createElement(N.a.Item,m()({},k,{__source:{fileName:v,lineNumber:123,columnNumber:11}}),g.a.createElement("img",{style:{width:212,height:300},src:y,alt:"",__source:{fileName:v,lineNumber:124,columnNumber:13}})),g.a.createElement(h,m()({},k,{__source:{fileName:v,lineNumber:128,columnNumber:9}}),g.a.createElement(t.a,{onClick:o()(p.a.mark((function e(){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.current){e.next=25;break}return e.prev=1,e.next=4,f.current.validate();case 4:if((r=f.current.getFields()).room_image=y,r.store_code=a,console.log(r),"add"!==l){e.next=13;break}return e.next=11,Object(E.u)(r);case 11:200===e.sent.code&&(n.a.info("提交成功！"),u());case 13:if("edit"!==l){e.next=18;break}return e.next=16,Object(E.y)(r);case 16:200===e.sent.code&&(n.a.info("修改成功！"),u());case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0),console.log(f.current.getFieldsError()),n.a.error("校验失败，请检查字段！");case 25:case"end":return e.stop()}}),e,null,[[1,20]])}))),type:"primary",style:{marginRight:24},__source:{fileName:v,lineNumber:129,columnNumber:11}},"提交"),g.a.createElement(t.a,{onClick:function(){f.current.resetFields()},__source:{fileName:v,lineNumber:164,columnNumber:11}},"重置"))))}}}]);