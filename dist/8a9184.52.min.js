(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{314:function(e,r,n){"use strict";n.r(r),n.d(r,"default",(function(){return w}));var t=n(5),a=n.n(t),c=(n(148),n(52)),o=(n(150),n(79)),l=(n(77),n(30)),u=n(612),m=(n(229),n(89)),i=n(78),s=n.n(i),f=n(24),b=n.n(f),N=(n(310),n(104)),p=n(51),d=n.n(p),_=n(0),v=n.n(_),E=n(228),O="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/storeDetail/staffDetail/roomform.jsx",h=N.a.Item,g={labelCol:{span:5},wrapperCol:{span:17}},y={wrapperCol:{span:17,offset:5}};function w(e){var r=e.store_code,n=e.modalType,t=e.closeModal,i=Object(_.useRef)(),f=Object(_.useState)([]),p=b()(f,2),w=p[0],j=p[1],k=Object(_.useState)([]),x=b()(k,2),C=x[0],I=x[1];Object(_.useEffect)((function(){P()}),[]);var P=function(){var e=s()(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.o)();case 2:r=e.sent,j(r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(_.useEffect)((function(){JSON.parse(localStorage.getItem("dicts")).forEach((function(e){"store_user_role"===e.dict_code&&I(e.dict_label)}))}),[]);return v.a.createElement("div",{__source:{fileName:O,lineNumber:48,columnNumber:5}},v.a.createElement(N.a,a()({ref:i},g,{onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:O,lineNumber:49,columnNumber:7}}),v.a.createElement(N.a.List,{field:"user_array",__source:{fileName:O,lineNumber:50,columnNumber:9}},(function(e,r){var n=r.add,t=r.remove;r.move;return v.a.createElement("div",{__source:{fileName:O,lineNumber:53,columnNumber:15}},e.map((function(e,r){return v.a.createElement("div",{key:e.key,__source:{fileName:O,lineNumber:56,columnNumber:21}},v.a.createElement(N.a.Item,{label:"店员"+(r+1),__source:{fileName:O,lineNumber:57,columnNumber:23}},v.a.createElement(o.a,{__source:{fileName:O,lineNumber:58,columnNumber:25}},v.a.createElement(N.a.Item,{field:e.field+".user_account",rules:[{required:!0}],noStyle:!0,__source:{fileName:O,lineNumber:59,columnNumber:27}},v.a.createElement(m.a,{placeholder:"请选择账号",__source:{fileName:O,lineNumber:64,columnNumber:29}},null==w?void 0:w.map((function(e){var r=e.user_account,n=e.user_name;return v.a.createElement(m.a.Option,{key:r,__source:{fileName:O,lineNumber:67,columnNumber:35}},n)})))),v.a.createElement(N.a.Item,{field:e.field+".user_role",rules:[{required:!0}],noStyle:!0,__source:{fileName:O,lineNumber:72,columnNumber:27}},v.a.createElement(m.a,{placeholder:"请选择角色编码...",__source:{fileName:O,lineNumber:77,columnNumber:29}},null==C?void 0:C.map((function(e){var r=e.label_en,n=e.label_value;return v.a.createElement(m.a.Option,{key:n,__source:{fileName:O,lineNumber:79,columnNumber:40}},r)})))),v.a.createElement(l.a,{icon:v.a.createElement(u.a,{__source:{fileName:O,lineNumber:84,columnNumber:35}}),shape:"circle",status:"danger",onClick:function(){return t(r)},__source:{fileName:O,lineNumber:83,columnNumber:27}}))))})),v.a.createElement(N.a.Item,{wrapperCol:{offset:5},__source:{fileName:O,lineNumber:94,columnNumber:17}},v.a.createElement(l.a,{onClick:function(){n()},__source:{fileName:O,lineNumber:95,columnNumber:19}},"Add User")))})),v.a.createElement(h,a()({},y,{__source:{fileName:O,lineNumber:155,columnNumber:9}}),v.a.createElement(l.a,{onClick:s()(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.current){e.next=24;break}return e.prev=1,e.next=4,i.current.validate();case 4:if((a=i.current.getFields()).store_code=r,console.log(a),"add"!==n){e.next=12;break}return e.next=10,Object(E.u)(a);case 10:200===e.sent.code&&(c.a.info("提交成功！"),t());case 12:if("edit"!==n){e.next=17;break}return e.next=15,Object(E.x)(a);case 15:200===e.sent.code&&(c.a.info("修改成功！"),t());case 17:e.next=24;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),console.log(i.current.getFieldsError()),c.a.error("校验失败，请检查字段！");case 24:case"end":return e.stop()}}),e,null,[[1,19]])}))),type:"primary",style:{marginRight:24},__source:{fileName:O,lineNumber:156,columnNumber:11}},"提交"),v.a.createElement(l.a,{onClick:function(){i.current.resetFields()},__source:{fileName:O,lineNumber:190,columnNumber:11}},"重置"))))}},612:function(e,r,n){"use strict";var t=n(5),a=n.n(t),c=n(4),o=n.n(c),l=n(0),u=n.n(l),m=n(6);function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){o()(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function f(e,r){var n=Object(l.useContext)(m.a).prefixCls,t=e.spin,c=e.className,o=s(s({ref:r},e),{},{className:"".concat(c?c+" ":"").concat(n,"-icon ").concat(n,"-icon-delete")});return t&&(o.className="".concat(o.className," ").concat(n,"-icon-loading")),delete o.spin,delete o.isIcon,u.a.createElement("svg",a()({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",width:"1em",height:"1em"},o),u.a.createElement("path",{d:"M5 11h5.5m0 0v29a1 1 0 0 0 1 1h25a1 1 0 0 0 1-1V11m-27 0H16m21.5 0H43m-5.5 0H32m-16 0V7h16v4m-16 0h16M20 18v15m8-15v15"}))}var b=u.a.forwardRef(f);b.defaultProps={isIcon:!0},b.displayName="IconDelete",r.a=b}}]);