(window.webpackJsonp=window.webpackJsonp||[]).push([[14,28,53,78],{158:function(e,r,l){"use strict";l.r(r);var a=l(7),t=l.n(a),n=(l(77),l(28)),u=(l(149),l(59)),m=l(78),c=l.n(m),o=(l(589),l(587)),i=(l(605),l(609)),s=(l(293),l(218)),b=(l(217),l(89)),_=(l(606),l(608)),N=(l(574),l(576)),f=(l(148),l(49)),d=l(5),p=l.n(d),g=l(24),E=l.n(g),h=(l(292),l(106)),v=l(50),y=l.n(v),O=l(0),w=l.n(O),j=l(216),x="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/form/index.jsx";function P(e,r){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),l.push.apply(l,a)}return l}function T(e){for(var r=1;r<arguments.length;r++){var l=null!=arguments[r]?arguments[r]:{};r%2?P(Object(l),!0).forEach((function(r){p()(e,r,l[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):P(Object(l)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(l,r))}))}return e}var S=h.a.Item,k={labelCol:{span:7},wrapperCol:{span:17}},q={wrapperCol:{span:17,offset:7}};r.default=function(e){var r,l,a,m,d=e.labelData,p=e.closeModalAndRequest;console.log("labelData: ",d);var g=Object(O.useRef)(),v=Object(O.useState)(null),P=E()(v,2),D=(P[0],P[1]),I=Object(O.useState)("default"),A=E()(I,2),C=A[0],z=(A[1],Object(O.useState)([])),R=E()(z,2),U=R[0],F=R[1],L=Object(O.useState)([]),M=E()(L,2),G=M[0],J=M[1],H=Object(O.useState)([]),V=E()(H,2),W=(V[0],V[1]),B=Object(O.useState)([]),K=E()(B,2),X=K[0],Q=K[1],Y=Object(O.useState)([]),Z=E()(Y,2),$=Z[0],ee=Z[1];return Object(O.useEffect)((function(){for(var e=0;e<d.length;e++){var r=d[e];"app_gb_type"===r.dict_code&&F(r),"app_gb_level"===r.dict_code&&J(r),"app_gb_people"===r.dict_code&&W(r),"app_gb_text_tag"===r.dict_code&&Q(r),"app_gb_status"===r.dict_code&&ee(r)}}),[]),w.a.createElement("div",{style:{maxWidth:650},__source:{fileName:x,lineNumber:77,columnNumber:5}},w.a.createElement(h.a,t()({ref:g},k,{size:C,onSubmit:function(e){var r=T(T({},e),{},{gb_cover:e.gb_cover.response.data.file_url});console.log(r)},onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:x,lineNumber:78,columnNumber:7}}),w.a.createElement(S,{label:"剧本名称",field:"gb_title",rules:[{required:!0,message:"请填写剧本名称"}],__source:{fileName:x,lineNumber:92,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写剧本名称...",__source:{fileName:x,lineNumber:97,columnNumber:11}})),w.a.createElement(h.a.Item,{rules:[{required:!0,message:"请上传剧本封面"}],label:"剧本封面",field:"gb_cover",triggerPropName:"fileList",initialValue:[{uid:"1",url:"//p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/e278888093bef8910e829486fb45dd69.png~tplv-uwbnlip3yd-webp.webp",name:"20200717"}],__source:{fileName:x,lineNumber:99,columnNumber:9}},w.a.createElement(_.a,{limit:1,listType:"picture-card",multiple:!0,name:"gb_cover",customRequest:function(e){var r=e.onProgress,l=e.onError,a=e.onSuccess,t=e.file,n=new XMLHttpRequest;n.upload&&(n.upload.onprogress=function(e){var l;e.total>0&&(l=e.loaded/e.total*100),r(parseInt(l,10),e)}),n.onerror=function(e){l(e)},n.onload=function(){if(n.status<200||n.status>=300)return l(n.responseText);D(JSON.parse(n.responseText)),a(JSON.parse(n.responseText),n)};var u=new FormData;u.append("up_file",t),u.append("module","drama"),n.open("post","https://gbs.toptian.com/system/upload/image",!0),n.setRequestHeader("Authorization",localStorage.getItem("token")),n.send(u)},onPreview:function(e){N.a.info({title:"Preview",content:w.a.createElement("img",{src:e.url||URL.createObjectURL(e.originFile),style:{maxWidth:"100%"},__source:{fileName:x,lineNumber:151,columnNumber:19}})})},__source:{fileName:x,lineNumber:113,columnNumber:11}})),w.a.createElement(S,{label:"剧本类型",field:"gb_type",rules:[{required:!0,message:"请填写剧本类型"}],__source:{fileName:x,lineNumber:160,columnNumber:9}},w.a.createElement(b.a,{placeholder:"请选择剧本类型",__source:{fileName:x,lineNumber:165,columnNumber:11}},null==U||null===(r=U.dict_label)||void 0===r?void 0:r.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:x,lineNumber:168,columnNumber:17}},e.label_zh)})))),w.a.createElement(S,{label:"剧本难度",field:"gb_level",rules:[{required:!0,message:"请选中剧本难度"}],__source:{fileName:x,lineNumber:175,columnNumber:9}},w.a.createElement(b.a,{placeholder:"请选择剧本难度",__source:{fileName:x,lineNumber:180,columnNumber:11}},null==G||null===(l=G.dict_label)||void 0===l?void 0:l.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:x,lineNumber:183,columnNumber:17}},e.label_zh)})))),w.a.createElement(S,{label:"玩家人数",field:"gb_people",rules:[{required:!0,message:"请填写玩家说明"}],__source:{fileName:x,lineNumber:191,columnNumber:9}},w.a.createElement(s.a,{placeholder:"请填写玩家说明...",__source:{fileName:x,lineNumber:196,columnNumber:11}})),w.a.createElement(S,{label:"剧本状态",field:"gb_status",rules:[{required:!1,message:"请选择剧本状态"}],__source:{fileName:x,lineNumber:199,columnNumber:9}},w.a.createElement(b.a,{placeholder:"请选择剧本状态",__source:{fileName:x,lineNumber:204,columnNumber:11}},null==$||null===(a=$.dict_label)||void 0===a?void 0:a.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:x,lineNumber:207,columnNumber:17}},e.label_zh)})))),w.a.createElement(S,{label:"玩家说明",field:"gb_people_note",rules:[{required:!0,message:"请填写玩家说明"}],__source:{fileName:x,lineNumber:216,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写玩家说明...",__source:{fileName:x,lineNumber:221,columnNumber:11}})),w.a.createElement(S,{label:"剧本标签",field:"gb_text_tag_arr",rules:[{required:!0,message:"请选择剧本标签"}],__source:{fileName:x,lineNumber:223,columnNumber:9}},w.a.createElement(b.a,{mode:"multiple",allowClear:!0,placeholder:"请选择剧本标签",__source:{fileName:x,lineNumber:228,columnNumber:11}},null==X||null===(m=X.dict_label)||void 0===m?void 0:m.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:x,lineNumber:231,columnNumber:17}},e.label_zh)})))),w.a.createElement(S,{label:"剧本时长/小时",field:"gb_hour",rules:[{type:"number",required:!0}],__source:{fileName:x,lineNumber:239,columnNumber:9}},w.a.createElement(s.a,{min:1,placeholder:"请输入参考价格",__source:{fileName:x,lineNumber:244,columnNumber:11}})),w.a.createElement(S,{label:"工作日价格",field:"gb_price",rules:[{type:"number",required:!0}],__source:{fileName:x,lineNumber:246,columnNumber:9}},w.a.createElement(s.a,{min:1,placeholder:"请输入工作日价格",__source:{fileName:x,lineNumber:247,columnNumber:11}})),w.a.createElement(S,{label:"周末价格",field:"gb_price2",rules:[{type:"number",required:!0}],__source:{fileName:x,lineNumber:249,columnNumber:9}},w.a.createElement(s.a,{min:1,placeholder:"请输入工作日价格",__source:{fileName:x,lineNumber:250,columnNumber:11}})),w.a.createElement(S,{label:"推荐星级",field:"gb_star_lev",rules:[{required:!0,type:"number"}],__source:{fileName:x,lineNumber:253,columnNumber:9}},w.a.createElement(i.a,{allowHalf:!0,__source:{fileName:x,lineNumber:263,columnNumber:11}})),w.a.createElement(S,{label:"剧本概要",field:"gb_text_brief",rules:[{required:!0,message:"请填写剧本概要"}],__source:{fileName:x,lineNumber:265,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写剧本概要...",__source:{fileName:x,lineNumber:270,columnNumber:11}})),w.a.createElement(S,{label:"剧本描述",field:"gb_text_content",rules:[{required:!1,message:"请填写剧本描述"}],__source:{fileName:x,lineNumber:272,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写剧本描述...",__source:{fileName:x,lineNumber:277,columnNumber:11}})),w.a.createElement(S,{label:"上架时间",field:"gb_add_time",rules:[{required:!1,message:"gb_add_time is required"}],__source:{fileName:x,lineNumber:280,columnNumber:9}},w.a.createElement(o.a,{showTime:!0,__source:{fileName:x,lineNumber:290,columnNumber:11}})),w.a.createElement(S,{label:"是否新本",field:"is_new",rules:[{required:!1,message:"请填写版权信息"}],__source:{fileName:x,lineNumber:292,columnNumber:9}},w.a.createElement(b.a,{placeholder:"是否新本",__source:{fileName:x,lineNumber:297,columnNumber:11}},w.a.createElement(b.a.Option,{value:1,__source:{fileName:x,lineNumber:298,columnNumber:13}},"是"),w.a.createElement(b.a.Option,{value:0,__source:{fileName:x,lineNumber:299,columnNumber:13}},"否"))),w.a.createElement(S,{label:"是否热门",field:"is_hot",rules:[{required:!1,message:"请填写版权信息"}],__source:{fileName:x,lineNumber:302,columnNumber:9}},w.a.createElement(b.a,{placeholder:"是否热门",__source:{fileName:x,lineNumber:307,columnNumber:11}},w.a.createElement(b.a.Option,{value:1,__source:{fileName:x,lineNumber:308,columnNumber:13}},"是"),w.a.createElement(b.a.Option,{value:0,__source:{fileName:x,lineNumber:309,columnNumber:13}},"否"))),w.a.createElement(S,{label:"版权信息",field:"gb_producer",rules:[{required:!0,message:"请填写版权信息"}],__source:{fileName:x,lineNumber:312,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写版权信息...",__source:{fileName:x,lineNumber:317,columnNumber:11}})),w.a.createElement(S,{label:"备注说明",field:"gb_remarks",rules:[{required:!1,message:"请填写备注说明"}],__source:{fileName:x,lineNumber:320,columnNumber:9}},w.a.createElement(f.a,{placeholder:"请填写备注说明...",__source:{fileName:x,lineNumber:325,columnNumber:11}})),w.a.createElement(S,t()({},q,{__source:{fileName:x,lineNumber:394,columnNumber:9}}),w.a.createElement(n.a,{onClick:c()(y.a.mark((function e(){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.current){e.next=17;break}return e.prev=1,e.next=4,g.current.validate();case 4:return console.log(g.current.getFields()),(r=g.current.getFields()).gb_cover=r.gb_cover[0].response.data.file_url,e.next=9,Object(j.b)(r);case 9:200===e.sent.code&&(u.a.success("添加成功"),p()),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(g.current.getFieldsError()),u.a.error("校验失败，请检查字段！");case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),type:"primary",style:{marginRight:24},__source:{fileName:x,lineNumber:395,columnNumber:11}},"Submit"),w.a.createElement(n.a,{onClick:function(){g.current.resetFields()},__source:{fileName:x,lineNumber:419,columnNumber:11}},"Reset"))))}},176:function(e,r,l){"use strict";l.r(r);l(581);var a=l(580),t=(l(572),l(579)),n=(l(150),l(79)),u=(l(148),l(49)),m=(l(573),l(578)),c=(l(574),l(576)),o=l(5),i=l.n(o),s=l(78),b=l.n(s),_=(l(77),l(28)),N=(l(151),l(60)),f=l(24),d=l.n(f),p=l(50),g=l.n(p),E=l(0),h=l.n(E),v=l(29),y=l(216),O=l(294),w=l(33),j=l(557),x=l.n(j),P=l(158),T="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/index.tsx";function S(e,r){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),l.push.apply(l,a)}return l}function k(e){for(var r=1;r<arguments.length;r++){var l=null!=arguments[r]?arguments[r]:{};r%2?S(Object(l),!0).forEach((function(r){i()(e,r,l[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):S(Object(l)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(l,r))}))}return e}r.default=function(){var e=Object(w.a)(),r=Object(E.useState)(!1),l=d()(r,2),o=l[0],i=l[1],s=Object(E.useState)(!1),f=d()(s,2),p=f[0],j=f[1],S=Object(E.useState)([]),q=d()(S,2),D=q[0],I=q[1],A=[{title:"剧本ID",dataIndex:"gb_id"},{title:"剧本标题",dataIndex:"gb_title"},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return h.a.createElement(N.a.Text,{copyable:!0,__source:{fileName:T,lineNumber:42,columnNumber:26}},e)}},{title:"剧本区域",dataIndex:"gb_area"},{title:"剧本封面",dataIndex:"gb_cover",render:function(e,r,l){return console.log(e,l),h.a.createElement("img",{style:{width:60,height:90},src:r.gb_cover,__source:{fileName:T,lineNumber:53,columnNumber:16}})}},{title:e["searchTable.columns.createdTime"],dataIndex:"created_time"},{title:"更新时间",dataIndex:"updated_time"},{title:e["searchTable.columns.operations"],dataIndex:"operations",render:function(){return h.a.createElement("div",{className:x.a.operations,__source:{fileName:T,lineNumber:68,columnNumber:9}},h.a.createElement(_.a,{type:"text",size:"small",__source:{fileName:T,lineNumber:69,columnNumber:11}},e["searchTable.columns.operations.view"]),h.a.createElement(_.a,{type:"text",size:"small",__source:{fileName:T,lineNumber:72,columnNumber:11}},"添加角色"),h.a.createElement(_.a,{onClick:function(){i(!0)},type:"text",size:"small",__source:{fileName:T,lineNumber:75,columnNumber:11}},"添加dm"),h.a.createElement(_.a,{type:"text",size:"small",__source:{fileName:T,lineNumber:84,columnNumber:11}},e["searchTable.columns.operations.update"]),h.a.createElement(_.a,{type:"text",status:"danger",size:"small",__source:{fileName:T,lineNumber:87,columnNumber:11}},e["searchTable.columns.operations.delete"]))}}],C=Object(v.c)((function(e){return e.searchTable})),z=C.data,R=C.pagination,U=C.loading,F=C.formParams,L=Object(v.b)();Object(E.useEffect)((function(){J()}),[]),Object(E.useEffect)((function(){M(),G()}),[]);var M=function(){var e=b()(g.a.mark((function e(){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.j)();case 2:r=e.sent,I(r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=b()(g.a.mark((function e(){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.i)();case 2:r=e.sent,console.log("data: ",r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(y.h)({page:e,page_size:r});a.then((function(e){console.log(e);var r=e.data,a=e.paginator;L({type:O.UPDATE_LIST,payload:{data:r}}),L({type:O.UPDATE_PAGINATION,payload:{pagination:k(k({},R),{},{current:a.page,pageSize:a.page_size,total:a.total_count})}}),L({type:O.UPDATE_LOADING,payload:{loading:!1}}),L({type:O.UPDATE_FORM_PARAMS,payload:{params:l}})}))}return h.a.createElement("div",{className:x.a.container,__source:{fileName:T,lineNumber:146,columnNumber:5}},h.a.createElement(c.a,{visible:o,unmountOnExit:!0,footer:null,title:"添加dm",__source:{fileName:T,lineNumber:147,columnNumber:7}}),h.a.createElement(c.a,{title:"添加剧本",footer:null,onCancel:function(){j(!1)},unmountOnExit:!0,style:{width:900,minWidth:900},visible:p,__source:{fileName:T,lineNumber:148,columnNumber:7}},h.a.createElement(P.default,{closeModalAndRequest:function(){J(),j(!1)},labelData:D,__source:{fileName:T,lineNumber:158,columnNumber:9}})),h.a.createElement(m.a,{style:{marginBottom:20},__source:{fileName:T,lineNumber:166,columnNumber:7}},h.a.createElement(m.a.Item,{__source:{fileName:T,lineNumber:167,columnNumber:9}},"运营管理"),h.a.createElement(m.a.Item,{__source:{fileName:T,lineNumber:168,columnNumber:9}},"剧本管理")),h.a.createElement("div",{__source:{fileName:T,lineNumber:170,columnNumber:7}},h.a.createElement(t.a,{style:{marginBottom:20},__source:{fileName:T,lineNumber:171,columnNumber:9}},h.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},__source:{fileName:T,lineNumber:172,columnNumber:11}},h.a.createElement(_.a,{style:{marginRight:20},onClick:function(){j(!0)},type:"primary",__source:{fileName:T,lineNumber:173,columnNumber:13}},"添加剧本"),h.a.createElement("div",{__source:{fileName:T,lineNumber:182,columnNumber:13}},h.a.createElement(n.a,{style:{flex:1},wrap:!0,__source:{fileName:T,lineNumber:183,columnNumber:15}},h.a.createElement(u.a,{onChange:function(){},placeholder:"请输入剧本标题",style:{width:200},__source:{fileName:T,lineNumber:184,columnNumber:17}}),h.a.createElement(u.a,{onChange:function(){},placeholder:"剧本类型",style:{width:200},__source:{fileName:T,lineNumber:189,columnNumber:17}}),h.a.createElement(u.a,{onChange:function(){},placeholder:"剧本区域",style:{width:200},__source:{fileName:T,lineNumber:190,columnNumber:17}}),h.a.createElement(u.a,{onChange:function(){},placeholder:"玩家人数",style:{width:200},__source:{fileName:T,lineNumber:191,columnNumber:17}}),h.a.createElement(u.a,{onChange:function(){},placeholder:"剧本状态",style:{width:200},__source:{fileName:T,lineNumber:192,columnNumber:17}}),h.a.createElement(_.a,{onClick:function(){},__source:{fileName:T,lineNumber:193,columnNumber:17}},"重置"),h.a.createElement(_.a,{onClick:function(){J()},type:"primary",__source:{fileName:T,lineNumber:194,columnNumber:17}},"搜索")))))),h.a.createElement(t.a,{bordered:!1,__source:{fileName:T,lineNumber:207,columnNumber:7}},h.a.createElement(a.a,{rowKey:"gb_id",loading:U,onChange:function(e){J(e.current,e.pageSize,F)},pagination:R,columns:A,data:z,__source:{fileName:T,lineNumber:208,columnNumber:9}})))}},294:function(e,r,l){"use strict";l.r(r),l.d(r,"UPDATE_LIST",(function(){return a})),l.d(r,"UPDATE_LOADING",(function(){return t})),l.d(r,"UPDATE_PAGINATION",(function(){return n})),l.d(r,"UPDATE_FORM_PARAMS",(function(){return u}));var a="searchTable_update_list",t="searchTable_update_loading",n="searchTable_update_pagination",u="searchTable_update_formParams"},557:function(e,r,l){e.exports={container:"container-50d7a459ef",toolbar:"toolbar-603124241c",operations:"operations-1e37fde15b"}}}]);