(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{206:function(e,l,r){"use strict";r.r(l);r(155);var m=r(74),a=(r(156),r(82)),u=(r(65),r(24)),n=(r(112),r(45)),t=(r(691),r(692)),c=(r(333),r(252)),i=(r(689),r(688)),o=(r(704),r(707)),s=(r(334),r(254)),b=(r(251),r(96)),N=(r(113),r(40)),_=r(4),f=r.n(_),d=r(56),p=r.n(d),E=r(22),g=r.n(E),x=(r(253),r(157)),v=(r(250),r(73)),h=r(35),O=r.n(h),y=r(0),w=r.n(y),j=r(32),q=r(111),k=r(675),P="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/form/index.tsx";function S(e,l){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);l&&(m=m.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),r.push.apply(r,m)}return r}function R(e){for(var l=1;l<arguments.length;l++){var r=null!=arguments[l]?arguments[l]:{};l%2?S(Object(r),!0).forEach((function(l){f()(e,l,r[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(r,l))}))}return e}var C=v.a.Item,D=x.a.Row,T=x.a.Col;l.default=function(e){var l=e.modalType,r=void 0===l?"add":l,_=e.closeModalAndRequest,f=Object(y.useRef)(),d=Object(y.useState)(!1),E=g()(d,2),x=E[0],h=E[1],S=Object(y.useState)([]),F=g()(S,2),I=F[0],z=F[1],A=Object(y.useState)([]),L=g()(A,2),H=L[0],J=L[1],U=Object(y.useState)([]),V=g()(U,2),M=V[0],B=V[1],W=Object(y.useState)([]),X=g()(W,2),G=X[0],K=X[1],Q=Object(j.c)((function(e){return e.myState})),Y=Q.labelData,Z=Q.clickItem;Object(y.useEffect)((function(){"edit"===r&&$()}),[]);var $=function(){var e=p()(O.a.mark((function e(){var l,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,Object(q.p)({gb_code:Z.gb_code});case 3:l=e.sent,r=l.data,h(!1),f.current.setFieldsValue(R(R({},r),{},{gb_cover:[{uid:"1",url:r.gb_cover,name:"20200717"}]}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.useEffect)((function(){for(var e=0;e<Y.length;e++){var l=Y[e];"app_gb_type"===l.dict_code&&z(l.dict_label),"app_gb_level"===l.dict_code&&J(l.dict_label),"app_gb_text_tag"===l.dict_code&&B(l.dict_label),"app_gb_status"===l.dict_code&&K(l.dict_label)}}),[]),w.a.createElement(m.a,{style:{width:"100%"},loading:x,__source:{fileName:P,lineNumber:87,columnNumber:5}},w.a.createElement("div",{__source:{fileName:P,lineNumber:88,columnNumber:7}},w.a.createElement(v.a,{ref:f,onValuesChange:function(e,l){console.log("onValuesChange: ",e,l)},scrollToFirstError:!0,__source:{fileName:P,lineNumber:89,columnNumber:9}},w.a.createElement(D,{className:"grid-demo",style:{marginBottom:10},__source:{fileName:P,lineNumber:90,columnNumber:11}},w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:91,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:92,columnNumber:15}},w.a.createElement(C,{label:"剧本名称",field:"gb_title",rules:[{required:!0,message:"请填写剧本名称"}],__source:{fileName:P,lineNumber:93,columnNumber:17}},w.a.createElement(N.a,{placeholder:"请填写剧本名称...",__source:{fileName:P,lineNumber:98,columnNumber:19}})))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:102,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:103,columnNumber:15}},w.a.createElement(C,{label:"剧本类型",field:"gb_type",rules:[{required:!0,message:"请填写剧本类型"}],__source:{fileName:P,lineNumber:104,columnNumber:17}},w.a.createElement(b.a,{placeholder:"请选择剧本类型",__source:{fileName:P,lineNumber:109,columnNumber:19}},null==I?void 0:I.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:P,lineNumber:112,columnNumber:25}},e.label_zh)})))))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:121,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:122,columnNumber:15}}," ",w.a.createElement(C,{label:"剧本难度",field:"gb_level",rules:[{required:!0,message:"请选中剧本难度"}],__source:{fileName:P,lineNumber:124,columnNumber:17}},w.a.createElement(b.a,{placeholder:"请选择剧本难度",__source:{fileName:P,lineNumber:129,columnNumber:19}},null==H?void 0:H.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:P,lineNumber:132,columnNumber:25}},e.label_zh)}))))))),w.a.createElement(D,{__source:{fileName:P,lineNumber:142,columnNumber:11}},w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:143,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:144,columnNumber:15}},w.a.createElement(C,{label:"玩家人数",field:"gb_people",rules:[{required:!0,message:"请填写玩家说明"}],__source:{fileName:P,lineNumber:145,columnNumber:17}},w.a.createElement(s.a,{placeholder:"请填写玩家说明...",__source:{fileName:P,lineNumber:150,columnNumber:19}})))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:154,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:155,columnNumber:15}}," ",w.a.createElement(C,{label:"剧本状态",field:"gb_status",rules:[{required:!1,message:"请选择剧本状态"}],__source:{fileName:P,lineNumber:157,columnNumber:17}},w.a.createElement(b.a,{placeholder:"请选择剧本状态",__source:{fileName:P,lineNumber:162,columnNumber:19}},null==G?void 0:G.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:P,lineNumber:165,columnNumber:25}},e.label_zh)})))))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:174,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:175,columnNumber:15}},w.a.createElement(C,{label:"玩家说明",field:"gb_people_note",rules:[{required:!0,message:"请填写玩家说明"}],__source:{fileName:P,lineNumber:176,columnNumber:17}},w.a.createElement(N.a,{placeholder:"请填写玩家说明...",__source:{fileName:P,lineNumber:181,columnNumber:19}}))))),w.a.createElement(D,{__source:{fileName:P,lineNumber:186,columnNumber:11}},w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:187,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:188,columnNumber:15}},w.a.createElement(C,{label:"剧本标签",field:"gb_text_tag_arr",rules:[{required:!0,message:"请选择剧本标签"}],__source:{fileName:P,lineNumber:189,columnNumber:17}},w.a.createElement(b.a,{mode:"multiple",allowClear:!0,placeholder:"请选择剧本标签",__source:{fileName:P,lineNumber:194,columnNumber:19}},M.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:P,lineNumber:197,columnNumber:25}},e.label_zh)})))))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:206,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:207,columnNumber:15}},w.a.createElement(C,{label:"剧本时长/小时",field:"gb_hour",rules:[{type:"number",required:!0}],__source:{fileName:P,lineNumber:208,columnNumber:17}},w.a.createElement(s.a,{min:1,placeholder:"请输入参考价格",__source:{fileName:P,lineNumber:213,columnNumber:19}})))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:217,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:218,columnNumber:15}},w.a.createElement(C,{label:"工作日价格",field:"gb_price",rules:[{type:"number",required:!0}],__source:{fileName:P,lineNumber:219,columnNumber:17}},w.a.createElement(s.a,{min:1,placeholder:"请输入工作日价格",__source:{fileName:P,lineNumber:224,columnNumber:19}}))))),w.a.createElement(D,{__source:{fileName:P,lineNumber:229,columnNumber:11}},w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:230,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:231,columnNumber:15}},w.a.createElement(C,{label:"周末价格",field:"gb_price2",rules:[{type:"number",required:!0}],__source:{fileName:P,lineNumber:232,columnNumber:17}},w.a.createElement(s.a,{min:1,placeholder:"请输入工作日价格",__source:{fileName:P,lineNumber:237,columnNumber:19}})))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:241,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:242,columnNumber:15}},w.a.createElement(C,{label:"推荐星级",field:"gb_star_lev",rules:[{required:!0,type:"number"}],__source:{fileName:P,lineNumber:243,columnNumber:17}},w.a.createElement(o.a,{allowHalf:!0,__source:{fileName:P,lineNumber:253,columnNumber:19}})))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:257,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:258,columnNumber:15}},w.a.createElement(C,{label:"上架时间",field:"gb_add_time",rules:[{required:!1,message:"gb_add_time is required"}],__source:{fileName:P,lineNumber:259,columnNumber:17}},w.a.createElement(i.a,{showTime:!0,__source:{fileName:P,lineNumber:269,columnNumber:19}}))))),w.a.createElement(D,{__source:{fileName:P,lineNumber:274,columnNumber:11}},w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:275,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:276,columnNumber:15}},w.a.createElement(C,{label:"剧本概要",field:"gb_text_brief",rules:[{required:!0,message:"请填写剧本概要"}],__source:{fileName:P,lineNumber:277,columnNumber:17}},w.a.createElement(N.a.TextArea,{rows:5,placeholder:"请填写剧本概要...",__source:{fileName:P,lineNumber:282,columnNumber:19}})))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:286,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:287,columnNumber:15}},w.a.createElement(C,{label:"剧本描述",field:"gb_text_content",rules:[{required:!1,message:"请填写剧本描述"}],__source:{fileName:P,lineNumber:288,columnNumber:17}},w.a.createElement(N.a.TextArea,{rows:5,placeholder:"请填写剧本描述...",__source:{fileName:P,lineNumber:293,columnNumber:19}})))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:297,columnNumber:13}},w.a.createElement(C,{label:"版权信息",field:"gb_producer",rules:[{required:!0,message:"请填写版权信息"}],__source:{fileName:P,lineNumber:298,columnNumber:15}},w.a.createElement(N.a.TextArea,{rows:5,placeholder:"请填写版权信息...",__source:{fileName:P,lineNumber:303,columnNumber:17}})))),w.a.createElement(D,{__source:{fileName:P,lineNumber:307,columnNumber:11}},w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:308,columnNumber:13}},w.a.createElement(C,{label:"是否新本",field:"is_new",rules:[{required:!1,message:"是否新本"}],__source:{fileName:P,lineNumber:309,columnNumber:15}},w.a.createElement(b.a,{placeholder:"是否新本",__source:{fileName:P,lineNumber:314,columnNumber:17}},w.a.createElement(b.a.Option,{value:1,__source:{fileName:P,lineNumber:315,columnNumber:19}},"是"),w.a.createElement(b.a.Option,{value:0,__source:{fileName:P,lineNumber:316,columnNumber:19}},"否")))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:320,columnNumber:13}},w.a.createElement(C,{label:"是否热门",field:"is_hot",rules:[{required:!1,message:"是否热门"}],__source:{fileName:P,lineNumber:321,columnNumber:15}},w.a.createElement(b.a,{placeholder:"是否热门",__source:{fileName:P,lineNumber:326,columnNumber:17}},w.a.createElement(b.a.Option,{value:1,__source:{fileName:P,lineNumber:327,columnNumber:19}},"是"),w.a.createElement(b.a.Option,{value:0,__source:{fileName:P,lineNumber:328,columnNumber:19}},"否")))),w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:332,columnNumber:13}},w.a.createElement(C,{label:"备注说明",field:"gb_remarks",rules:[{required:!1,message:"请填写备注说明"}],__source:{fileName:P,lineNumber:333,columnNumber:15}},w.a.createElement(N.a,{placeholder:"请填写备注说明...",__source:{fileName:P,lineNumber:338,columnNumber:17}})))),w.a.createElement(D,{__source:{fileName:P,lineNumber:342,columnNumber:11}},w.a.createElement(T,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:P,lineNumber:343,columnNumber:13}},w.a.createElement(v.a.Item,{rules:[{required:!0,message:"请上传剧本封面"}],label:"剧本封面",field:"gb_cover",triggerPropName:"fileList",__source:{fileName:P,lineNumber:344,columnNumber:15}},w.a.createElement(t.a,{limit:1,name:"gb_cover",customRequest:function(e){var l=e.onProgress,r=e.onError,m=e.onSuccess,a=e.file,u=new XMLHttpRequest;u.upload&&(u.upload.onprogress=function(e){var r;e.total>0&&(r=e.loaded/e.total*100),l(parseInt(r,10),e)}),u.onerror=function(e){r(e)},u.onload=function(){u.status<200||u.status,m(JSON.parse(u.responseText))};var n=new FormData;n.append("up_file",a),n.append("module","drama"),u.open("post","".concat(k.a,"/system/upload/image"),!0),u.setRequestHeader("Authorization",localStorage.getItem("token")),u.send(n)},onPreview:function(e){c.a.info({title:"Preview",content:w.a.createElement("img",{src:e.url||URL.createObjectURL(e.originFile),style:{maxWidth:"100%"},__source:{fileName:P,lineNumber:386,columnNumber:25}})})},__source:{fileName:P,lineNumber:350,columnNumber:17}})))),w.a.createElement(D,{__source:{fileName:P,lineNumber:397,columnNumber:11}},w.a.createElement(T,{style:{display:"flex",alignItems:"center",justifyContent:"center"},span:24,__source:{fileName:P,lineNumber:398,columnNumber:13}},w.a.createElement("div",{__source:{fileName:P,lineNumber:402,columnNumber:15}},w.a.createElement(C,{__source:{fileName:P,lineNumber:403,columnNumber:17}},w.a.createElement(a.a,{__source:{fileName:P,lineNumber:404,columnNumber:19}}," ",w.a.createElement(u.a,{onClick:p()(O.a.mark((function e(){var l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.current){e.next=22;break}return e.prev=1,e.next=4,f.current.validate();case 4:if((l=f.current.getFields()).gb_cover=l.gb_cover[0].url||l.gb_cover[0].response.data.file_url,"edit"!==r){e.next=12;break}return e.next=9,Object(q.r)(l);case 9:return 200===e.sent.code&&(n.a.success("修改成功"),_()),e.abrupt("return");case 12:return l.gb_star_lev=2*l.gb_star_lev,e.next=15,Object(q.h)(l);case 15:200===e.sent.code&&(n.a.success("添加成功"),_()),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),n.a.error("校验失败，请检查字段！");case 22:case"end":return e.stop()}}),e,null,[[1,19]])}))),type:"primary",__source:{fileName:P,lineNumber:406,columnNumber:21}},"提交"),w.a.createElement(u.a,{onClick:function(){f.current.resetFields()},__source:{fileName:P,lineNumber:438,columnNumber:21}},"重置")))))))))}},675:function(e,l,r){"use strict";r.d(l,"a",(function(){return m}));var m="https://dev-service.mengmohmg.com"}}]);