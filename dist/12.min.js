(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[12],{

/***/ "./src/pages/stocks-drama/DramaDetail/dmDetail/index.tsx":
/*!***************************************************************!*\
  !*** ./src/pages/stocks-drama/DramaDetail/dmDetail/index.tsx ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DmForm; });
/* harmony import */ var _arco_design_web_react_es_Spin_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arco-design/web-react/es/Spin/style */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Spin/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Spin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arco-design/web-react/es/Spin */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Spin/index.js");
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "./node_modules/_@babel_runtime@7.16.7@@babel/runtime/helpers/toConsumableArray.js");
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _arco_design_web_react_es_Button_style__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arco-design/web-react/es/Button/style */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Button/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arco-design/web-react/es/Button */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Button/index.js");
/* harmony import */ var _arco_design_web_react_es_Message_style__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arco-design/web-react/es/Message/style */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Message/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Message__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arco-design/web-react/es/Message */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Message/index.js");
/* harmony import */ var _arco_design_web_react_es_Result_style__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arco-design/web-react/es/Result/style */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Result/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Result__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arco-design/web-react/es/Result */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Result/index.js");
/* harmony import */ var _arco_design_web_react_icon_react_icon_IconFaceSmileFill__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arco-design/web-react/icon/react-icon/IconFaceSmileFill */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/icon/react-icon/IconFaceSmileFill/index.js");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/_@babel_runtime@7.16.7@@babel/runtime/helpers/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "./node_modules/_@babel_runtime@7.16.7@@babel/runtime/helpers/slicedToArray.js");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _arco_design_web_react_es_Grid_style__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arco-design/web-react/es/Grid/style */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Grid/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Grid__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arco-design/web-react/es/Grid */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Grid/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/_@babel_runtime@7.16.7@@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react */ "./node_modules/_react@16.14.0@react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-redux */ "./node_modules/_react-redux@7.2.6@react-redux/es/index.js");
/* harmony import */ var _api_drama_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../api/drama.js */ "./src/api/drama.js");














var _jsxFileName = "/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/DramaDetail/dmDetail/index.tsx";




var Row = _arco_design_web_react_es_Grid__WEBPACK_IMPORTED_MODULE_13__["default"].Row;
function DmForm(_ref) {
  var drama_dms = _ref.drama_dms,
      getInitFormData = _ref.getInitFormData;
  console.log('drama_dms: ', drama_dms);
  var dramaInfoStore = Object(react_redux__WEBPACK_IMPORTED_MODULE_16__["useSelector"])(function (state) {
    return state.myState;
  });
  var clickItem = dramaInfoStore.clickItem;

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_15__["useState"])([]),
      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11___default()(_useState, 2),
      dmlist = _useState2[0],
      setdmlist = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_15__["useState"])(false),
      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11___default()(_useState3, 2),
      dmLoading = _useState4[0],
      setdmLoading = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_15__["useState"])([]),
      _useState6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11___default()(_useState5, 2),
      nowDmArr = _useState6[0],
      setnowDmArr = _useState6[1];

  Object(react__WEBPACK_IMPORTED_MODULE_15__["useEffect"])(function () {
    getDmListfN();
  }, []);
  Object(react__WEBPACK_IMPORTED_MODULE_15__["useEffect"])(function () {
    var a = [];
    drama_dms.forEach(function (element) {
      a.push(element.user_account);
    });
    setnowDmArr(a);
  }, [getInitFormData]);

  var getDmListfN = /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_14___default.a.mark(function _callee() {
      var data;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_14___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              setdmLoading(true);
              _context.next = 3;
              return Object(_api_drama_js__WEBPACK_IMPORTED_MODULE_17__["getDmList"])();

            case 3:
              data = _context.sent;
              setdmLoading(false);
              console.log('data: ', data); // 在这里过滤一次 数据

              setdmlist(data.data);

            case 7:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function getDmListfN() {
      return _ref2.apply(this, arguments);
    };
  }(); // useEffect(() => {
  //   const obj = {};
  //   for (let index = 0; index < drama_dms.length; index++) {
  //     const element = drama_dms[index];
  //     obj[element.user_account] = element.user_photo;
  //   }
  //   setimgMap(obj);
  //   formRef.current.setFieldsValue({
  //     dm_array: drama_dms.map((item) => {
  //       return item.user_account;
  //     }),
  //   });
  // }, []);


  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
    __source: {
      fileName: _jsxFileName,
      lineNumber: 55,
      columnNumber: 5
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(Row, {
    gutter: 40,
    style: {
      display: 'flex',
      padding: 20
    },
    __source: {
      fileName: _jsxFileName,
      lineNumber: 56,
      columnNumber: 7
    }
  }, drama_dms.length === 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Result__WEBPACK_IMPORTED_MODULE_8__["default"], {
    status: null,
    icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_icon_react_icon_IconFaceSmileFill__WEBPACK_IMPORTED_MODULE_9__["default"], {
      style: {
        color: 'rgb(var(--arcoblue-6))'
      },
      __source: {
        fileName: _jsxFileName,
        lineNumber: 60,
        columnNumber: 19
      }
    }),
    title: "\u8BE5\u5267\u672C\u8FD8\u6CA1\u6709\u4E3B\u6301\u4EBA" // extra={<Button type="primary">Back</Button>}
    ,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 58,
      columnNumber: 11
    }
  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
    style: {
      display: 'flex'
    },
    __source: {
      fileName: _jsxFileName,
      lineNumber: 65,
      columnNumber: 11
    }
  }, drama_dms.map(function (_ref3) {
    var user_account = _ref3.user_account,
        user_photo = _ref3.user_photo;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
      style: {
        width: 200,
        // display: drama_dms.includes({ user_account: user_account }) ? 'none' : 'flex',
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center',
        flexDirection: 'column',
        height: 200
      },
      __source: {
        fileName: _jsxFileName,
        lineNumber: 68,
        columnNumber: 17
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
      __source: {
        fileName: _jsxFileName,
        lineNumber: 79,
        columnNumber: 19
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("img", {
      style: {
        width: 100,
        height: 100
      },
      src: user_photo,
      alt: "",
      __source: {
        fileName: _jsxFileName,
        lineNumber: 80,
        columnNumber: 21
      }
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
      __source: {
        fileName: _jsxFileName,
        lineNumber: 82,
        columnNumber: 19
      }
    }, user_account), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
      __source: {
        fileName: _jsxFileName,
        lineNumber: 83,
        columnNumber: 19
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Button__WEBPACK_IMPORTED_MODULE_4__["default"], {
      onClick: /*#__PURE__*/_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_14___default.a.mark(function _callee2() {
        var parma, data;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_14___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                console.log(user_account);
                parma = {
                  gb_code: clickItem.gb_code,
                  dm_array: [{
                    user_account: user_account
                  }]
                };
                _context2.next = 4;
                return Object(_api_drama_js__WEBPACK_IMPORTED_MODULE_17__["reqBindDeleteDm"])(parma);

              case 4:
                data = _context2.sent;

                if (data.code === 200) {
                  _arco_design_web_react_es_Message__WEBPACK_IMPORTED_MODULE_6__["default"].success('操作成功');

                  getInitFormData();
                } // let parma = {
                //   gb_code: clickItem.gb_code,
                //   drama_dms: [...drama_dms, { user_account: user_account }],
                // };
                // const data = await reqBindDm(parma);
                // console.log('data: ', data);


              case 6:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      })),
      size: "mini",
      status: "danger",
      __source: {
        fileName: _jsxFileName,
        lineNumber: 84,
        columnNumber: 21
      }
    }, "\u53D6\u6D88DM")));
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("h4", {
    __source: {
      fileName: _jsxFileName,
      lineNumber: 115,
      columnNumber: 7
    }
  }, "\u4E3B\u6301\u4EBA\u5217\u8868"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Spin__WEBPACK_IMPORTED_MODULE_1__["default"], {
    loading: dmLoading,
    __source: {
      fileName: _jsxFileName,
      lineNumber: 116,
      columnNumber: 7
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
    style: {
      display: 'flex'
    },
    __source: {
      fileName: _jsxFileName,
      lineNumber: 117,
      columnNumber: 9
    }
  }, dmlist.map(function (_ref5) {
    var user_account = _ref5.user_account,
        user_photo = _ref5.user_photo;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
      style: {
        width: 200,
        display: 'flex',
        // display: drama_dms.includes(user_account) ? 'none' : 'flex',
        justifyContent: 'center',
        alignItems: 'center',
        flexDirection: 'column',
        height: 200
      },
      __source: {
        fileName: _jsxFileName,
        lineNumber: 120,
        columnNumber: 15
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
      __source: {
        fileName: _jsxFileName,
        lineNumber: 131,
        columnNumber: 17
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("img", {
      style: {
        width: 100,
        height: 100
      },
      src: user_photo,
      alt: "",
      __source: {
        fileName: _jsxFileName,
        lineNumber: 132,
        columnNumber: 19
      }
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
      __source: {
        fileName: _jsxFileName,
        lineNumber: 134,
        columnNumber: 17
      }
    }, user_account), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
      __source: {
        fileName: _jsxFileName,
        lineNumber: 135,
        columnNumber: 17
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(_arco_design_web_react_es_Button__WEBPACK_IMPORTED_MODULE_4__["default"], {
      disabled: nowDmArr.includes(user_account),
      onClick: /*#__PURE__*/_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_14___default.a.mark(function _callee3() {
        var parma, data;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_14___default.a.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                parma = {
                  gb_code: clickItem.gb_code,
                  dm_array: [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(drama_dms), [{
                    user_account: user_account
                  }])
                };
                _context3.next = 3;
                return Object(_api_drama_js__WEBPACK_IMPORTED_MODULE_17__["reqBindDm"])(parma);

              case 3:
                data = _context3.sent;
                console.log('data: ', data);

                if (data.code === 200) {
                  _arco_design_web_react_es_Message__WEBPACK_IMPORTED_MODULE_6__["default"].success('操作成功');

                  getInitFormData();
                }

              case 6:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      })),
      size: "mini",
      type: "primary",
      __source: {
        fileName: _jsxFileName,
        lineNumber: 136,
        columnNumber: 19
      }
    }, "\u8BBE\u4E3ADM")));
  }))));
}

/***/ })

}]);
//# sourceMappingURL=12.min.js.map