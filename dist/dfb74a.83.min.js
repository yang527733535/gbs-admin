(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{314:function(e,r,n){"use strict";n.r(r),n.d(r,"default",(function(){return k}));var a=n(5),t=n.n(a),c=(n(77),n(30)),u=(n(148),n(52)),o=(n(229),n(89)),l=n(78),s=n.n(l),i=n(24),m=n.n(i),f=(n(310),n(104)),_=n(51),b=n.n(_),p=n(0),N=n.n(p),d=n(228),v="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/storeDetail/staffDetail/roomform.jsx",g=f.a.Item,E={labelCol:{span:5},wrapperCol:{span:17}},h={wrapperCol:{span:17,offset:5}};function k(e){var r=e.store_code,n=(e.modalType,e.closeModal),a=Object(p.useRef)(),l=Object(p.useState)([]),i=m()(l,2),_=i[0],k=i[1],w=Object(p.useState)([]),O=m()(w,2),j=O[0],x=O[1];Object(p.useEffect)((function(){y()}),[]);var y=function(){var e=s()(b.a.mark((function e(){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.o)();case 2:r=e.sent,k(r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){JSON.parse(localStorage.getItem("dicts")).forEach((function(e){"store_user_role"===e.dict_code&&x(e.dict_label)}))}),[]);return N.a.createElement("div",{__source:{fileName:v,lineNumber:48,columnNumber:5}},N.a.createElement(f.a,t()({ref:a},E,{onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:v,lineNumber:49,columnNumber:7}}),N.a.createElement(g,{label:"用户账号",field:"user_account",rules:[{required:!0,message:"请输入用户账号"}],__source:{fileName:v,lineNumber:50,columnNumber:9}},N.a.createElement(o.a,{placeholder:"please enter...",__source:{fileName:v,lineNumber:55,columnNumber:11}},null==_?void 0:_.map((function(e){var r=e.user_account,n=e.user_name;return console.log("user_account: ",r),N.a.createElement(o.a.Option,{key:r,__source:{fileName:v,lineNumber:58,columnNumber:22}},n)})))),N.a.createElement(g,{label:"角色编码",field:"user_role",__source:{fileName:v,lineNumber:62,columnNumber:9}},N.a.createElement(o.a,{placeholder:"请选择角色编码...",__source:{fileName:v,lineNumber:63,columnNumber:11}},null==j?void 0:j.map((function(e){var r=e.label_zh,n=e.label_value;return console.log("user_account: ",user_account),N.a.createElement(o.a.Option,{key:n,__source:{fileName:v,lineNumber:66,columnNumber:22}},r)})))),N.a.createElement(g,t()({},h,{__source:{fileName:v,lineNumber:118,columnNumber:9}}),N.a.createElement(c.a,{onClick:s()(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.current){e.next=24;break}return e.prev=1,e.next=4,a.current.validate();case 4:return(t=a.current.getFields()).store_code=r,t.user_array=[{user_account:user_account,user_role:user_role}],e.next=9,Object(d.v)(t);case 9:return 200===e.sent.code&&(u.a.info("提交成功！"),n()),e.abrupt("return");case 15:200===e.sent.code&&(u.a.info("修改成功！"),n());case 17:e.next=24;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),console.log(a.current.getFieldsError()),u.a.error("校验失败，请检查字段！");case 24:case"end":return e.stop()}}),e,null,[[1,19]])}))),type:"primary",style:{marginRight:24},__source:{fileName:v,lineNumber:119,columnNumber:11}},"提交"),N.a.createElement(c.a,{onClick:function(){a.current.resetFields()},__source:{fileName:v,lineNumber:152,columnNumber:11}},"重置"))))}}}]);