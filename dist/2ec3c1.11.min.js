(window.webpackJsonp=window.webpackJsonp||[]).push([[11,65,87],{168:function(e,r,n){"use strict";n.r(r);var t=n(7),a=n.n(t),l=(n(77),n(28)),u=(n(151),n(59)),o=n(78),c=n.n(o),i=(n(597),n(596)),m=(n(600),n(604)),s=(n(150),n(49)),b=n(24),N=n.n(b),f=(n(301),n(106)),_=n(50),d=n.n(_),p=n(0),g=n.n(p),h=n(223),E="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/form/index.jsx",y=f.a.Item,O={labelCol:{span:7},wrapperCol:{span:17}},v={wrapperCol:{span:17,offset:7}};r.default=function(e){var r=e.closeModalAndReqTable,n=e.clickItem,t=Object(p.useRef)(),o=Object(p.useState)("default"),b=N()(o,2),_=b[0],j=(b[1],Object(p.useState)([])),w=N()(j,2),T=w[0],x=w[1];return console.log(n),Object(p.useEffect)((function(){t.current.setFieldsValue(n)}),[]),Object(p.useEffect)((function(){Object(h.n)().then((function(e){console.log("res: ",e);var r,n=e.data;r=n.map((function(e){return function e(r){var n=Array.isArray(r.region_children)&&r.region_children.length>0;return{key:String(r.region_id),value:String(r.region_id),label:r.region_name,children:n?r.region_children.map((function(r){return e(r)})):[]}}(e)})),x(r)}))}),[]),g.a.createElement("div",{style:{maxWidth:650},__source:{fileName:E,lineNumber:114,columnNumber:5}},g.a.createElement(f.a,a()({ref:t},O,{size:_,onSubmit:function(e){console.log(e)},onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:E,lineNumber:115,columnNumber:7}}),g.a.createElement(y,{label:"店铺名称",field:"store_name",rules:[{required:!0,message:"请填写店铺名称"}],__source:{fileName:E,lineNumber:129,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写店铺名称...",__source:{fileName:E,lineNumber:134,columnNumber:11}})),g.a.createElement(y,{field:"Province",label:"店铺地区",__source:{fileName:E,lineNumber:136,columnNumber:9}},g.a.createElement(m.a,{showSearch:!0,placeholder:"please select",allowClear:!0,options:T,__source:{fileName:E,lineNumber:137,columnNumber:11}})),g.a.createElement(y,{label:"门店类型",field:"store_type",rules:[{required:!1,message:"请填写门店类型"}],__source:{fileName:E,lineNumber:165,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写门店类型...",__source:{fileName:E,lineNumber:170,columnNumber:11}})),g.a.createElement(y,{label:"门店级别",field:"store_level",rules:[{required:!1,message:"请填写门店级别"}],__source:{fileName:E,lineNumber:172,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写门店级别...",__source:{fileName:E,lineNumber:177,columnNumber:11}})),g.a.createElement(y,{label:"开业日期",field:"open_date",rules:[{required:!0,message:"请填写开业日期"}],__source:{fileName:E,lineNumber:179,columnNumber:9}},g.a.createElement(i.a,{showTime:!0,__source:{fileName:E,lineNumber:189,columnNumber:11}})),g.a.createElement(y,{label:"详细地址",field:"position_address",rules:[{required:!0,message:"请填写详细地址"}],__source:{fileName:E,lineNumber:192,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写详细地址...",__source:{fileName:E,lineNumber:197,columnNumber:11}})),g.a.createElement(y,{label:"经度坐标",field:"position_x",rules:[{required:!1,message:"请填写经度坐标"}],__source:{fileName:E,lineNumber:199,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写经度坐标...",__source:{fileName:E,lineNumber:204,columnNumber:11}})),g.a.createElement(y,{label:"纬度坐标",field:"position_y",rules:[{required:!1,message:"请填写纬度坐标"}],__source:{fileName:E,lineNumber:206,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写纬度坐标...",__source:{fileName:E,lineNumber:211,columnNumber:11}})),g.a.createElement(y,a()({},v,{__source:{fileName:E,lineNumber:214,columnNumber:9}}),g.a.createElement(l.a,{onClick:c()(d.a.mark((function e(){var a,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.current){e.next=25;break}return e.prev=1,e.next=4,t.current.validate();case 4:if(null!==n){e.next=11;break}return console.log(t.current.getFields()),e.next=8,Object(h.f)(t.current.getFields());case 8:a=e.sent,e.next=17;break;case 11:return l=t.current.getFields(),console.log("param: ",l),l.store_code=n.store_code,e.next=16,Object(h.s)(l);case 16:a=e.sent;case 17:200===a.code&&(u.a.success("添加成功"),r()),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0),console.log(t.current.getFieldsError()),u.a.error("校验失败，请检查字段！");case 25:case"end":return e.stop()}}),e,null,[[1,20]])}))),type:"primary",style:{marginRight:24},__source:{fileName:E,lineNumber:215,columnNumber:11}},"Submit"),g.a.createElement(l.a,{onClick:function(){t.current.resetFields()},__source:{fileName:E,lineNumber:247,columnNumber:11}},"Reset"))))}},187:function(e,r,n){"use strict";n.r(r);n(594);var t=n(593),a=(n(588),n(592)),l=(n(152),n(79)),u=(n(150),n(49)),o=(n(589),n(591)),c=(n(585),n(586)),i=n(5),m=n.n(i),s=(n(77),n(28)),b=n(24),N=n.n(b),f=n(584),_=n.n(f),d=n(0),p=n.n(d),g=n(32),h=n(223),E=n(305),y=n(33),O=n(573),v=n.n(O),j=n(168),w="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/index.tsx";function T(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function x(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?T(Object(n),!0).forEach((function(r){m()(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}r.default=function(e){_()(e);var r=Object(y.a)(),n=Object(d.useState)(!1),i=N()(n,2),m=i[0],b=i[1],f=Object(d.useState)(""),O=N()(f,2),T=O[0],P=O[1],A=Object(d.useState)(""),S=N()(A,2),k=S[0],C=S[1],I=Object(d.useState)(""),D=N()(I,2),U=D[0],q=D[1],F=Object(d.useState)(""),R=N()(F,2),M=R[0],z=R[1],L=Object(d.useState)(""),G=N()(L,2),V=G[0],B=G[1],J=Object(d.useState)(null),W=N()(J,2),K=W[0],H=W[1],Q=[{title:"店铺名称",dataIndex:"store_name"},{title:"店铺地址",dataIndex:"position_address"},{title:r["searchTable.columns.createdTime"],dataIndex:"created_time"},{title:"更新时间",dataIndex:"updated_time"},{title:r["searchTable.columns.operations"],render:function(e,n){return p.a.createElement(s.a,{onClick:function(){console.log(e,n),H(n),b(!0)},size:"small",__source:{fileName:w,lineNumber:46,columnNumber:9}},r["searchTable.columns.operations.update"])}}],X=Object(g.c)((function(e){return e.searchTable})),Y=X.data,Z=X.pagination,$=X.loading,ee=X.formParams,re=Object(g.b)();function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=Object(h.r)({page:e,page_size:r,store_name:T,store_type:k,store_status:U,store_level:M,position_city:V});t.then((function(e){var r=e.data,t=e.paginator;re({type:E.UPDATE_LIST,payload:{data:r}}),re({type:E.UPDATE_PAGINATION,payload:{pagination:x(x({},Z),{},{current:t.page,pageSize:t.page_size,total:t.total_count})}}),re({type:E.UPDATE_LOADING,payload:{loading:!1}}),re({type:E.UPDATE_FORM_PARAMS,payload:{params:n}})}))}return Object(d.useEffect)((function(){ne()}),[]),p.a.createElement("div",{className:v.a.container,__source:{fileName:w,lineNumber:132,columnNumber:5}},p.a.createElement(c.a,{title:null===K?"添加门店":"修改门店",footer:null,onCancel:function(){b(!1)},unmountOnExit:!0,style:{width:900,minWidth:900},visible:m,__source:{fileName:w,lineNumber:133,columnNumber:7}},p.a.createElement(j.default,{clickItem:K,closeModalAndReqTable:function(){b(!1),ne()},__source:{fileName:w,lineNumber:143,columnNumber:9}})),p.a.createElement(o.a,{style:{marginBottom:20},__source:{fileName:w,lineNumber:151,columnNumber:7}},p.a.createElement(o.a.Item,{__source:{fileName:w,lineNumber:152,columnNumber:9}},r["menu.list"]),p.a.createElement(o.a.Item,{__source:{fileName:w,lineNumber:153,columnNumber:9}},r["menu.list.searchTable"])),p.a.createElement("div",{__source:{fileName:w,lineNumber:155,columnNumber:7}},p.a.createElement(a.a,{style:{marginBottom:20},__source:{fileName:w,lineNumber:156,columnNumber:9}},p.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},__source:{fileName:w,lineNumber:157,columnNumber:11}},p.a.createElement(s.a,{onClick:function(){b(!0),H(null)},type:"primary",__source:{fileName:w,lineNumber:158,columnNumber:13}},"添加门店"),p.a.createElement("div",{__source:{fileName:w,lineNumber:168,columnNumber:13}},p.a.createElement(l.a,{style:{marginLeft:20},wrap:!0,__source:{fileName:w,lineNumber:169,columnNumber:15}},p.a.createElement(u.a,{value:T,onChange:function(e){P(e)},placeholder:"请输入店铺名称",style:{width:200},__source:{fileName:w,lineNumber:170,columnNumber:17}}),p.a.createElement(u.a,{value:k,onChange:function(e){C(e)},placeholder:"请选择门店类型",style:{width:200},__source:{fileName:w,lineNumber:178,columnNumber:17}}),p.a.createElement(u.a,{value:U,onChange:function(e){q(e)},placeholder:"请选择门店状态",style:{width:200},__source:{fileName:w,lineNumber:186,columnNumber:17}}),p.a.createElement(u.a,{onChange:function(e){z(e)},placeholder:"门店等级",value:M,style:{width:200},__source:{fileName:w,lineNumber:194,columnNumber:17}}),p.a.createElement(u.a,{onChange:function(e){B(e)},value:V,placeholder:"所在城市",style:{width:200},__source:{fileName:w,lineNumber:202,columnNumber:17}}),p.a.createElement(s.a,{onClick:function(){P(""),C(""),q(""),z(""),B("")},__source:{fileName:w,lineNumber:210,columnNumber:17}},"重置"),p.a.createElement(s.a,{onClick:function(){ne()},type:"primary",__source:{fileName:w,lineNumber:221,columnNumber:17}},"搜索")))))),p.a.createElement(a.a,{bordered:!1,__source:{fileName:w,lineNumber:234,columnNumber:7}},p.a.createElement(t.a,{rowKey:"user_account",loading:$,onChange:function(e){ne(e.current,e.pageSize,ee)},pagination:Z,columns:Q,data:Y,__source:{fileName:w,lineNumber:235,columnNumber:9}})))}},305:function(e,r,n){"use strict";n.r(r),n.d(r,"UPDATE_LIST",(function(){return t})),n.d(r,"UPDATE_LOADING",(function(){return a})),n.d(r,"UPDATE_PAGINATION",(function(){return l})),n.d(r,"UPDATE_FORM_PARAMS",(function(){return u}));var t="searchTable_update_list",a="searchTable_update_loading",l="searchTable_update_pagination",u="searchTable_update_formParams"},573:function(e,r,n){e.exports={container:"container-8d6a4969cc",toolbar:"toolbar-6f91d5affc",operations:"operations-43689f0336"}},584:function(e,r){e.exports=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},e.exports.default=e.exports,e.exports.__esModule=!0}}]);