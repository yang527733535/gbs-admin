{"version":3,"file":"7.min.js","sources":["webpack:///./src/api/drama.js","webpack:///./src/pages/drama-table/form/index.jsx"],"sourcesContent":["import { Service } from '../service/request'; // 数据字典\n\nexport function labelsApi(data) {\n  return Service({\n    url: '/system/dict/labels',\n    method: 'POST'\n  });\n}\nexport function loginApi(data) {\n  return Service({\n    url: '/system/user/login',\n    data: data,\n    method: 'POST'\n  });\n}\nexport function dramaList(data) {\n  return Service({\n    url: '/v1/drama/list',\n    data: data\n  });\n}\nexport function shopList(data) {\n  return Service({\n    url: '/v1/store/list',\n    data: data,\n    method: 'post'\n  });\n}\nexport function resLogout() {\n  return Service({\n    url: '/system/user/logout' // data: data,\n\n  });\n}\nexport function addDrama(data) {\n  return Service({\n    url: '/v1/drama/add',\n    data: data\n  });\n}\nexport function addShop(data) {\n  return Service({\n    url: '/v1/store/add',\n    data: data\n  });\n}\nexport function updateShop(data) {\n  return Service({\n    url: '/v1/store/edit',\n    data: data\n  });\n} // addDrama","import _extends from \"@babel/runtime/helpers/extends\";\nimport \"@arco-design/web-react/es/Button/style\";\nimport _Button from \"@arco-design/web-react/es/Button\";\nimport \"@arco-design/web-react/es/Message/style\";\nimport _Message from \"@arco-design/web-react/es/Message\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport \"@arco-design/web-react/es/DatePicker/style\";\nimport _DatePicker from \"@arco-design/web-react/es/DatePicker\";\nimport \"@arco-design/web-react/es/Rate/style\";\nimport _Rate from \"@arco-design/web-react/es/Rate\";\nimport \"@arco-design/web-react/es/InputNumber/style\";\nimport _InputNumber from \"@arco-design/web-react/es/InputNumber\";\nimport \"@arco-design/web-react/es/Upload/style\";\nimport _Upload from \"@arco-design/web-react/es/Upload\";\nimport \"@arco-design/web-react/es/Modal/style\";\nimport _Modal from \"@arco-design/web-react/es/Modal\";\nimport \"@arco-design/web-react/es/Input/style\";\nimport _Input from \"@arco-design/web-react/es/Input\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport \"@arco-design/web-react/es/Form/style\";\nimport _Form from \"@arco-design/web-react/es/Form\";\nvar _jsxFileName = \"/Users/mrhh/Desktop/gbs-admin/src/pages/drama-table/form/index.jsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport { addDrama } from '../../../api/drama.js';\nvar FormItem = _Form.Item;\nvar formItemLayout = {\n  labelCol: {\n    span: 7\n  },\n  wrapperCol: {\n    span: 17\n  }\n};\nvar noLabelLayout = {\n  wrapperCol: {\n    span: 17,\n    offset: 7\n  }\n};\n\nfunction Demo() {\n  var formRef = useRef();\n\n  var _useState = useState('default'),\n      _useState2 = _slicedToArray(_useState, 2),\n      size = _useState2[0],\n      setSize = _useState2[1];\n\n  useEffect(function () {// formRef.current.setFieldsValue({ rate: 5 });\n  }, []);\n\n  var onValuesChange = function onValuesChange(changeValue, values) {\n    console.log('onValuesChange: ', changeValue, values);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: 650\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Form, _extends({\n    ref: formRef\n  }, formItemLayout, {\n    size: size // initialValues={{\n    //   slider: 20,\n    //   'a.b[0].c': ['b'],\n    // }}\n    ,\n    onSubmit: function onSubmit(e) {\n      console.log(e);\n    },\n    onValuesChange: onValuesChange,\n    scrollToFirstError: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u5267\\u672C\\u540D\\u79F0\",\n    field: \"gb_title\",\n    rules: [{\n      required: true,\n      message: '请填写剧本名称'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u5267\\u672C\\u540D\\u79F0...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u5267\\u672C\\u7C7B\\u578B\",\n    field: \"gb_type\",\n    rules: [{\n      required: false,\n      message: '请填写剧本类型'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u5267\\u672C\\u7C7B\\u578B...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u5267\\u672C\\u533A\\u57DF\",\n    field: \"gb_area\",\n    rules: [{\n      required: false,\n      message: '请填写剧本区域'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u5267\\u672C\\u533A\\u57DF...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(_Form.Item, {\n    label: \"\\u5267\\u672C\\u5C01\\u9762\",\n    field: \"upload\",\n    triggerPropName: \"fileList\" // initialValue={[\n    //   {\n    //     uid: '-1',\n    //     url:\n    //       '//p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/e278888093bef8910e829486fb45dd69.png~tplv-uwbnlip3yd-webp.webp',\n    //     name: '20200717',\n    //   },\n    // ]}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Upload, {\n    listType: \"picture-card\",\n    multiple: true,\n    name: \"files\" // action=\"http://120.24.188.169:8000/system/upload/image\"\n    ,\n    customRequest: function customRequest(option) {\n      console.log(option);\n      var onProgress = option.onProgress,\n          onError = option.onError,\n          onSuccess = option.onSuccess,\n          file = option.file;\n      console.log('file: ', file);\n      var xhr = new XMLHttpRequest();\n\n      if (xhr.upload) {\n        xhr.upload.onprogress = function (event) {\n          var percent;\n\n          if (event.total > 0) {\n            percent = event.loaded / event.total * 100;\n          }\n\n          onProgress(parseInt(percent, 10), event);\n        };\n      }\n\n      xhr.onerror = function error(e) {\n        onError(e);\n      };\n\n      xhr.onload = function onload() {\n        if (xhr.status < 200 || xhr.status >= 300) {\n          return onError(xhr.responseText);\n        }\n\n        onSuccess(xhr.responseText, xhr);\n      };\n\n      var formData = new FormData();\n      formData.append('up_file', file);\n      formData.append('module', 'drama');\n      xhr.open('post', 'http://120.24.188.169:8000/system/upload/image', true);\n      xhr.setRequestHeader('Authorization', localStorage.getItem('token'));\n      xhr.send(formData);\n    },\n    onPreview: function onPreview(file) {\n      _Modal.info({\n        title: 'Preview',\n        content: /*#__PURE__*/React.createElement(\"img\", {\n          src: file.url || URL.createObjectURL(file.originFile),\n          style: {\n            maxWidth: '100%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 19\n          }\n        })\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u73A9\\u5BB6\\u4EBA\\u6570\",\n    field: \"gb_people\",\n    rules: [{\n      type: 'number',\n      required: false\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_InputNumber, {\n    min: 1,\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u73A9\\u5BB6\\u4EBA\\u6570\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u53C2\\u8003\\u4EF7\\u683C\",\n    field: \"gb_price\",\n    rules: [{\n      type: 'number',\n      required: false\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_InputNumber, {\n    min: 1,\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u53C2\\u8003\\u4EF7\\u683C\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u73A9\\u5BB6\\u8BF4\\u660E\",\n    field: \"gb_people_note\",\n    rules: [{\n      required: false,\n      message: '请填写玩家说明'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u73A9\\u5BB6\\u8BF4\\u660E...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u63A8\\u8350\\u661F\\u7EA7\",\n    field: \"gb_star_lev\",\n    rules: [{\n      required: false,\n      type: 'number'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Rate, {\n    allowHalf: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u4E0A\\u67B6\\u65F6\\u95F4\",\n    field: \"gb_add_time\",\n    rules: [{\n      required: true,\n      message: 'gb_add_time is required'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_DatePicker, {\n    showTime: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u7248\\u6743\\u4FE1\\u606F\",\n    field: \"gb_producer\",\n    rules: [{\n      required: true,\n      message: '请填写版权信息'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u7248\\u6743\\u4FE1\\u606F...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u5907\\u6CE8\\u8BF4\\u660E\",\n    field: \"gb_remarks\",\n    rules: [{\n      required: true,\n      message: '请填写备注说明'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u5907\\u6CE8\\u8BF4\\u660E...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormItem, _extends({}, noLabelLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(_Button, {\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!formRef.current) {\n                _context.next = 16;\n                break;\n              }\n\n              _context.prev = 1;\n              _context.next = 4;\n              return formRef.current.validate();\n\n            case 4:\n              console.log(formRef.current); // Message.info('校验通过，提交成功！');\n\n              console.log(formRef.current.getFields());\n              _context.next = 8;\n              return addDrama(formRef.current.getFields());\n\n            case 8:\n              data = _context.sent;\n              console.log('param: ', data);\n              _context.next = 16;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(formRef.current.getFieldsError());\n\n              _Message.error('校验失败，请检查字段！');\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 12]]);\n    })),\n    type: \"primary\",\n    style: {\n      marginRight: 24\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 11\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(_Button, {\n    onClick: function onClick() {\n      formRef.current.resetFields();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 11\n    }\n  }, \"Reset\"))));\n}\n\nexport default Demo;"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}