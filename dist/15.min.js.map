{"version":3,"file":"15.min.js","sources":["webpack:///./src/pages/stocks-store/storeDetail/baseDetail/style/index.module.less","webpack:///./src/pages/stocks-store/storeDetail/baseDetail/index.tsx","webpack:///./src/pages/stocks-store/storeDetail/baseDetail/style/index.module.less?3478"],"sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/_css-loader@3.6.0@css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import \"@arco-design/web-react/es/Button/style\";\nimport _Button from \"@arco-design/web-react/es/Button\";\nimport \"@arco-design/web-react/es/Message/style\";\nimport _Message from \"@arco-design/web-react/es/Message\";\nimport \"@arco-design/web-react/es/DatePicker/style\";\nimport _DatePicker from \"@arco-design/web-react/es/DatePicker\";\nimport \"@arco-design/web-react/es/Cascader/style\";\nimport _Cascader from \"@arco-design/web-react/es/Cascader\";\nimport \"@arco-design/web-react/es/Grid/style\";\nimport _Grid from \"@arco-design/web-react/es/Grid\";\nimport \"@arco-design/web-react/es/Input/style\";\nimport _Input from \"@arco-design/web-react/es/Input\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport \"@arco-design/web-react/es/Form/style\";\nimport _Form from \"@arco-design/web-react/es/Form\";\nvar _jsxFileName = \"/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/storeDetail/baseDetail/index.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport styles from './style/index.module.less';\nimport { regionsList, updateShop, addShop } from '../../../../api/drama.js';\nexport default function BaseDetail(_ref) {\n  var storeDetailInfo = _ref.storeDetailInfo,\n      closeDrawer = _ref.closeDrawer,\n      modalType = _ref.modalType;\n  var FormItem = _Form.Item;\n  var formRef = useRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      cascaderOptionsArr = _useState2[0],\n      setcascaderOptionsArr = _useState2[1];\n\n  useEffect(function () {\n    // 这里做个缓存\n    reqRionsData();\n  }, []);\n\n  var reqRionsData = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var data, res, mapTree, arr;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // 先判断缓存里有没有\n              data = [];\n\n              if (!(localStorage.getItem('regions') === null)) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 4;\n              return regionsList();\n\n            case 4:\n              res = _context.sent;\n              data = res.data;\n              localStorage.setItem('regions', JSON.stringify(data));\n              _context.next = 10;\n              break;\n\n            case 9:\n              data = JSON.parse(localStorage.getItem('regions'));\n\n            case 10:\n              mapTree = function mapTree(org) {\n                var haveChildren = Array.isArray(org.region_children) && org.region_children.length > 0;\n                return {\n                  key: String(org.region_id),\n                  value: String(org.region_id),\n                  label: org.region_name,\n                  children: haveChildren ? org.region_children.map(function (i) {\n                    return mapTree(i);\n                  }) : []\n                };\n              };\n\n              arr = [];\n              arr = data.map(function (org) {\n                return mapTree(org);\n              });\n              setcascaderOptionsArr(arr);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function reqRionsData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (modalType === 'edit') {\n      formRef.current.setFieldsValue(storeDetailInfo);\n    }\n  }, [storeDetailInfo]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Form, {\n    layout: \"vertical\",\n    ref: formRef,\n    className: styles['form-group'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Grid.Row, {\n    gutter: 80,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Grid.Col, {\n    span: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u5E97\\u94FA\\u540D\\u79F0\",\n    field: \"store_name\",\n    rules: [{\n      required: true,\n      message: '请填写店铺名称'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u5E97\\u94FA\\u540D\\u79F0...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(_Grid.Col, {\n    span: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    rules: [{\n      required: true,\n      message: '请填写店铺地区'\n    }],\n    field: \"position_index\",\n    label: \"\\u5E97\\u94FA\\u5730\\u533A\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Cascader, {\n    showSearch: true,\n    placeholder: \"\\u8BF7\\u9009\\u62E9\\u5E97\\u94FA\\u5730\\u533A\",\n    allowClear: true,\n    options: cascaderOptionsArr,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(_Grid.Col, {\n    span: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u8BE6\\u7EC6\\u5730\\u5740\",\n    field: \"position_address\",\n    rules: [{\n      required: true,\n      message: '请填写详细地址'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u8BE6\\u7EC6\\u5730\\u5740...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(_Grid.Col, {\n    span: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u624B\\u673A\\u53F7\\u7801\",\n    field: \"store_mobile\",\n    rules: [{\n      required: true,\n      message: '请填写店铺手机号码'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u5E97\\u94FA\\u624B\\u673A\\u53F7\\u7801...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(_Grid.Col, {\n    span: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u7535\\u8BDD\\u53F7\\u7801\",\n    field: \"store_phone\",\n    rules: [{\n      required: false,\n      message: '请填写店铺电话号码'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u5E97\\u94FA\\u7535\\u8BDD\\u53F7\\u7801...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(_Grid.Col, {\n    span: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u95E8\\u5E97\\u7EA7\\u522B\",\n    field: \"store_level\",\n    rules: [{\n      required: false,\n      message: '请填写门店级别'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u95E8\\u5E97\\u7EA7\\u522B...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(_Grid.Col, {\n    span: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u5F00\\u4E1A\\u65E5\\u671F\",\n    field: \"open_date\",\n    rules: [{\n      required: true,\n      message: '请填写开业日期'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_DatePicker, {\n    showTime: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(_Grid.Col, {\n    span: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u95E8\\u5E97\\u7C7B\\u578B\",\n    field: \"store_type\",\n    rules: [{\n      required: false,\n      message: '请填写门店类型'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u95E8\\u5E97\\u7C7B\\u578B...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(_Grid.Row, {\n    gutter: 80,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Grid.Col, {\n    span: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u7ECF\\u5EA6\\u5750\\u6807\",\n    field: \"position_x\",\n    rules: [{\n      required: true,\n      message: '请填写经度坐标'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u7ECF\\u5EA6\\u5750\\u6807...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(_Grid.Col, {\n    span: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u7EAC\\u5EA6\\u5750\\u6807\",\n    field: \"position_y\",\n    rules: [{\n      required: true,\n      message: '请填写纬度坐标'\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"\\u8BF7\\u586B\\u5199\\u7EAC\\u5EA6\\u5750\\u6807...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(_Grid.Row, {\n    justify: \"end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    style: {\n      width: '100%',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'flex-end'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var data, param;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!formRef.current) {\n                _context2.next = 26;\n                break;\n              }\n\n              _context2.prev = 1;\n              _context2.next = 4;\n              return formRef.current.validate();\n\n            case 4:\n              if (!(modalType === 'add')) {\n                _context2.next = 12;\n                break;\n              }\n\n              console.log(formRef.current.getFields());\n              _context2.next = 8;\n              return addShop(formRef.current.getFields());\n\n            case 8:\n              data = _context2.sent;\n\n              if (data.code === 200) {\n                _Message.success('添加成功');\n\n                closeDrawer();\n              }\n\n              _context2.next = 19;\n              break;\n\n            case 12:\n              param = formRef.current.getFields();\n              console.log('param: ', param);\n              param.store_code = storeDetailInfo.store_code;\n              _context2.next = 17;\n              return updateShop(param);\n\n            case 17:\n              data = _context2.sent;\n\n              if (data.code === 200) {\n                _Message.success('修改成功');\n\n                closeDrawer();\n              }\n\n            case 19:\n              _context2.next = 26;\n              break;\n\n            case 21:\n              _context2.prev = 21;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(_context2.t0);\n              console.log(formRef.current.getFieldsError());\n\n              _Message.error('校验失败，请检查字段！');\n\n            case 26:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 21]]);\n    })),\n    type: \"primary\",\n    style: {\n      marginRight: 24\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, \"\\u63D0\\u4EA4\"), /*#__PURE__*/React.createElement(_Button, {\n    onClick: function onClick() {\n      formRef.current.resetFields();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, \"\\u91CD\\u7F6E\")))));\n}","var api = require(\"!../../../../../../node_modules/_style-loader@1.3.0@style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--11-1!../../../../../../node_modules/_postcss-loader@4.3.0@postcss-loader/dist/cjs.js??ref--11-2!../../../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--11-3!./index.module.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC1fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}