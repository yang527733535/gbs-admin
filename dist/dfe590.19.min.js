(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{162:function(e,n,t){"use strict";t.r(n);t(151);var r=t(69),a=(t(150),t(79)),o=(t(77),t(30)),l=(t(149),t(52)),c=t(78),u=t.n(c),i=(t(619),t(620)),m=(t(597),t(598)),s=(t(225),t(89)),f=(t(148),t(51)),d=t(24),b=t.n(d),p=(t(227),t(152)),N=(t(305),t(104)),v=t(53),E=t.n(v),_=t(0),y=t.n(_),g=t(224),O="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/DramaDetail/roleDetail/AddRoleDetailForm/index.tsx",h=N.a.Item,C=p.a.Row,x=p.a.Col;n.default=function(e){var n=e.clickItem,t=e.modalType,c=e.getInitFormData,d=e.saveEditItem,p=e.closeModal,v=e.role_array,k=Object(_.useRef)(),j=Object(_.useState)(""),w=b()(j,2),R=w[0],I=w[1];return Object(_.useEffect)((function(){"edit"===t&&(I(d.role_cover),k.current.setFieldsValue(d))}),[]),y.a.createElement(r.a,{style:{width:"100%"},__source:{fileName:O,lineNumber:43,columnNumber:5}},y.a.createElement("div",{__source:{fileName:O,lineNumber:44,columnNumber:7}},y.a.createElement(N.a,{ref:k,onValuesChange:function(e,n){console.log("onValuesChange: ",e,n)},scrollToFirstError:!0,__source:{fileName:O,lineNumber:45,columnNumber:9}},y.a.createElement(C,{className:"grid-demo",style:{marginBottom:10},__source:{fileName:O,lineNumber:46,columnNumber:11}},y.a.createElement(x,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,__source:{fileName:O,lineNumber:47,columnNumber:13}},y.a.createElement("div",{__source:{fileName:O,lineNumber:48,columnNumber:15}},y.a.createElement(h,{label:"角色名称",field:"role_name",rules:[{required:!0,message:"请填写角色名称"}],__source:{fileName:O,lineNumber:49,columnNumber:17}},y.a.createElement(f.a,{placeholder:"请填写角色名称...",__source:{fileName:O,lineNumber:54,columnNumber:19}})))),y.a.createElement(x,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,__source:{fileName:O,lineNumber:58,columnNumber:13}},y.a.createElement("div",{__source:{fileName:O,lineNumber:59,columnNumber:15}},y.a.createElement(h,{label:"角色简介",field:"role_brief",rules:[{required:!0,message:"请填写角色简介"}],__source:{fileName:O,lineNumber:60,columnNumber:17}},y.a.createElement(f.a,{placeholder:"请填写角色简介...",__source:{fileName:O,lineNumber:65,columnNumber:19}}))))),y.a.createElement(C,{__source:{fileName:O,lineNumber:70,columnNumber:11}},y.a.createElement(x,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,__source:{fileName:O,lineNumber:71,columnNumber:13}},y.a.createElement("div",{__source:{fileName:O,lineNumber:72,columnNumber:15}},y.a.createElement(h,{label:"是否凶手",field:"is_murderer",rules:[{required:!1,message:"请选择是否凶手"}],__source:{fileName:O,lineNumber:73,columnNumber:17}},y.a.createElement(s.a,{placeholder:"请选择是否凶手",__source:{fileName:O,lineNumber:78,columnNumber:19}},y.a.createElement(s.a.Option,{value:"1",__source:{fileName:O,lineNumber:79,columnNumber:21}},"是"),y.a.createElement(s.a.Option,{value:"0",__source:{fileName:O,lineNumber:80,columnNumber:21}},"否"))))),y.a.createElement(x,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,__source:{fileName:O,lineNumber:85,columnNumber:13}},y.a.createElement("div",{__source:{fileName:O,lineNumber:86,columnNumber:15}},y.a.createElement(h,{label:"角色备注",field:"role_remarks",rules:[{required:!1,message:"请填写角色备注"}],__source:{fileName:O,lineNumber:87,columnNumber:17}},y.a.createElement(f.a,{placeholder:"请填写角色备注...",__source:{fileName:O,lineNumber:92,columnNumber:19}}))))),y.a.createElement(C,{__source:{fileName:O,lineNumber:97,columnNumber:11}},y.a.createElement(x,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,__source:{fileName:O,lineNumber:98,columnNumber:13}},y.a.createElement(N.a.Item,{rules:[{required:!0,message:"请上传角色封面"}],label:"角色封面",field:"role_cover",triggerPropName:"fileList",__source:{fileName:O,lineNumber:99,columnNumber:15}},y.a.createElement(i.a,{limit:1,renderUploadList:function(){return null},name:"role_cover",customRequest:function(e){var n=e.onProgress,t=e.onError,r=e.onSuccess,a=e.file,o=new XMLHttpRequest;o.upload&&(o.upload.onprogress=function(e){var t;e.total>0&&(t=e.loaded/e.total*100),n(parseInt(t,10),e)}),o.onerror=function(e){t(e)},o.onload=function(){o.status<200||o.status;var e=JSON.parse(o.responseText);I(e.data.file_url),r(e)};var l=new FormData;l.append("up_file",a),l.append("module","drama"),o.open("post","https://gbs.toptian.com/system/upload/image",!0),o.setRequestHeader("Authorization",localStorage.getItem("token")),o.send(l)},onPreview:function(e){m.a.info({title:"Preview",content:y.a.createElement("img",{src:e.url||URL.createObjectURL(e.originFile),style:{maxWidth:"100%"},__source:{fileName:O,lineNumber:143,columnNumber:25}})})},__source:{fileName:O,lineNumber:105,columnNumber:17}})))),""===R?null:y.a.createElement(C,{__source:{fileName:O,lineNumber:155,columnNumber:13}},y.a.createElement(N.a.Item,{label:"封面图片",__source:{fileName:O,lineNumber:156,columnNumber:15}},y.a.createElement("img",{style:{width:212,height:300},src:R,alt:"",__source:{fileName:O,lineNumber:157,columnNumber:17}}))),y.a.createElement(C,{__source:{fileName:O,lineNumber:162,columnNumber:11}},y.a.createElement(x,{style:{display:"flex",alignItems:"center",justifyContent:"center"},__source:{fileName:O,lineNumber:163,columnNumber:13}},y.a.createElement("div",{__source:{fileName:O,lineNumber:164,columnNumber:15}},y.a.createElement(h,{__source:{fileName:O,lineNumber:165,columnNumber:17}},y.a.createElement(a.a,{__source:{fileName:O,lineNumber:166,columnNumber:19}},y.a.createElement(o.a,{onClick:u()(E.a.mark((function e(){var r,a,o,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.current){e.next=30;break}return e.prev=1,e.next=4,k.current.validate();case 4:if((r=k.current.getFields()).role_cover=R,console.log("param",r),a=v.map((function(e){return e.role_code===r.role_code?r:e})),"add"!==t){e.next=17;break}return v.push(r),(o={}).role_array=v,o.gb_code=n.gb_code,e.next=15,Object(g.r)(o);case 15:200===e.sent.code&&(l.a.success("添加成功"),c(),p());case 17:if("edit"!==t){e.next=25;break}return(u={}).role_array=a,u.gb_code=n.gb_code,e.next=23,Object(g.r)(u);case 23:200===e.sent.code&&(l.a.success("修改成功"),c(),p());case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(1),l.a.error("校验失败，请检查字段！");case 30:case"end":return e.stop()}}),e,null,[[1,27]])}))),type:"primary",__source:{fileName:O,lineNumber:167,columnNumber:21}},"提交"),y.a.createElement(o.a,{onClick:function(){k.current.resetFields()},__source:{fileName:O,lineNumber:217,columnNumber:21}},"重置")))))))))}},597:function(e,n,t){"use strict";t(16),t(77),t(606)},598:function(e,n,t){"use strict";var r=t(15),a=t.n(r),o=t(0),l=t.n(o),c=t(147),u=t(229),i=t(23),m=t(1),s=t(10),f=t(13),d=t(30),b=t(111),p=t(108),N=t(62),v=t(47),E=t(81),_=t(226),y=t(3),g=function(){return(g=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)};function O(e){var n=Object(_.c)(),t=n.prefixCls,r=n.simple;return l.a.createElement(J,g({prefixCls:t,simple:r},e),e.content)}var h=function(e){if(e.isNotice){var n=e.icon;if(!n&&null!==n)switch(e.noticeType){case"info":n=l.a.createElement(p.a,null);break;case"success":n=l.a.createElement(N.a,null);break;case"warning":n=l.a.createElement(v.a,null);break;case"error":n=l.a.createElement(E.a,null)}e.title=l.a.createElement("span",null,n,e.title),e.hideCancel=!0}else e.title=l.a.createElement("span",null,null!==e.icon&&(e.icon||l.a.createElement(v.a,null)),e.title);return e};var C=function(e,n){var t=document.createElement("div");document.body.appendChild(t);var r=Object(_.b)(),o=n||function(e){a.a.render(l.a.createElement(y.b,g({},r),l.a.createElement(O,g({},e,{onCancel:i}))),t)},c=g(g({},e),{visible:!1});function u(){a.a.unmountComponentAtNode(t)&&t.parentNode&&t.parentNode.removeChild(t);for(var e=0;e<_.a.length;e++){if(_.a[e]===m){_.a.splice(e,1);break}}}function i(n){!n&&e.onCancel&&e.onCancel(),c.visible=!1,c.afterClose=function(){e.afterClose&&e.afterClose(),u()},o(c)}function m(){c.visible=!1,c.afterClose=function(){e.afterClose&&e.afterClose(),u()},o(c)}return c.onOk=function(){var n,t=e.onOk||e.onConfirm;t&&(n=t()),n&&n.then&&(c.confirmLoading=!0,o(c),n.then((function(){i(!0)}),(function(e){console.error(e),c.confirmLoading=!1,o(c)}))),n||i(!0)},(c=h(c)).visible=!0,o(c),_.a.push(m),{close:m,update:function(n){c=g(g(g({},c),{title:e.title}),n),c=h(c),o(c)}}},x=t(18),k=t(2),j=t(11),w=t(109),R=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),l=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return l},I=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},P=Object(o.forwardRef)((function(e,n){var t=R(Object(o.useState)([]),2),r=t[0],a=t[1];function c(e){a((function(n){return I(I([],R(n),!1),[e],!1)}))}function u(e){a((function(n){return n.filter((function(n){return e!==n}))}))}return Object(o.useImperativeHandle)(n,(function(){return{addInstance:c,removeInstance:u}})),l.a.createElement(l.a.Fragment,null,r)})),S=function(){return(S=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},T=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),l=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return l};var L=Object(o.forwardRef)((function(e,n){var t=T(Object(o.useState)(!0),2),r=t[0],a=t[1],c=T(Object(o.useState)(e),2),u=c[0],i=c[1];return Object(o.useImperativeHandle)(n,(function(){return{update:i,close:function(){a(!1)}}})),l.a.createElement(J,S({},u,{simple:!0,visible:r,onOk:function(){var e=u.onOk&&u.onOk();e&&e.then&&(i(S(S({},u),{confirmLoading:!0})),e.then((function(){a(!1)}),(function(e){console.error(e),i(S(S({},u),{confirmLoading:!1}))}))),e||a(!1)},onCancel:function(){u.onCancel&&u.onCancel(),a(!1)},unmountOnExit:!0}),u.content)})),F=function(){return(F=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)};var M=function(){var e=Object(o.createRef)(),n=l.a.createElement(P,{ref:e}),t=0;function r(n){var r;t+=1;var a=Object(o.createRef)();var c=l.a.createElement(L,F({key:t,ref:a},h(n),{afterClose:function(){n.afterClose&&n.afterClose(),e.current.removeInstance(c)}}));function u(){a.current.close()}return e.current.addInstance(c),_.a.push(u),{close:u,update:null===(r=a.current)||void 0===r?void 0:r.update}}var a={confirm:function(e){return r(F({},e))}};return["info","success","warning","error"].forEach((function(e){a[e]=function(n){return r(F(F({},n),{isNotice:!0,noticeType:e}))}})),[a,n]},D=t(14),q=t(9),A=function(){return(A=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},B=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},U=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),l=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return l},z=null;s.b||document.documentElement.addEventListener("click",(function(e){z={left:e.clientX,top:e.clientY},setTimeout((function(){z=null}),100)}),!0);var H={mask:!0,maskClosable:!0,mountOnEnter:!0,escToExit:!0,getPopupContainer:function(){return document.body},alignCenter:!0};var V=Object(o.forwardRef)((function(e,n){var t,a,p,N=Object(o.useContext)(y.a),v=Object(q.a)(e,H,null===(p=N.componentConfig)||void 0===p?void 0:p.Modal),E=v.className,_=v.style,g=v.visible,O=v.simple,h=v.title,C=v.children,R=v.cancelText,I=v.okText,P=v.okButtonProps,S=v.cancelButtonProps,T=v.getPopupContainer,L=void 0===T?function(){return document.body}:T,F=v.footer,M=v.afterClose,V=v.confirmLoading,J=v.mountOnEnter,X=v.unmountOnExit,W=v.afterOpen,Y=v.hideCancel,G=v.autoFocus,K=v.focusLock,Q=v.maskClosable,Z=v.mask,$=v.alignCenter,ee=v.getChildrenPopupContainer,ne=v.wrapClassName,te=v.escToExit,re=v.modalRender,ae=v.maskStyle,oe=v.wrapStyle,le=v.closeIcon,ce=B(v,["className","style","visible","simple","title","children","cancelText","okText","okButtonProps","cancelButtonProps","getPopupContainer","footer","afterClose","confirmLoading","mountOnEnter","unmountOnExit","afterOpen","hideCancel","autoFocus","focusLock","maskClosable","mask","alignCenter","getChildrenPopupContainer","wrapClassName","escToExit","modalRender","maskStyle","wrapStyle","closeIcon"]),ue=Object(o.useRef)(null),ie=Object(o.useRef)(null),me=Object(o.useRef)(!1),se=U(Object(o.useState)(g),2),fe=se[0],de=se[1],be=U(Object(o.useState)(),2),pe=be[0],Ne=be[1],ve=Object(o.useRef)(null),Ee=Object(o.useRef)(!1),_e=Object(o.useRef)(!1),ye=U(Object(D.a)(!1,{defaultValue:!1,value:V}),2),ge=ye[0],Oe=ye[1],he=N.getPrefixCls("modal",v.prefixCls),Ce=N.locale,xe=!O,ke="closable"in v?v.closable:xe,je=Object(o.useCallback)((function(){return Object(r.findDOMNode)(L())}),[L]);Object(w.a)(je,{hidden:g&&Z});var we=function(){v.onCancel&&v.onCancel()},Re=Object(o.useRef)(!1),Ie=function(e){var n,t=v.onConfirm,r=v.onOk||t;r&&(n=r(e)),n&&n.then&&(Oe(!0),n.then((function(){Oe(!1)}),(function(e){Oe(!1),console.error(e)})))};Object(o.useEffect)((function(){var e=function(e){te&&e&&e.key===f.g.key&&we()};return g&&!me.current&&(me.current=!0,Object(s.d)(document,"keydown",e)),function(){me.current=!1,Object(s.c)(document,"keydown",e)}}),[g,te]),Object(o.useEffect)((function(){var e;if(g&&void 0===pe&&ue.current){var n=+(null===(e=window.getComputedStyle(ue.current,null))||void 0===e?void 0:e.zIndex);isNaN(n)||Ne(n+1)}}),[g,pe]);var Pe=N.focusLock.modal,Se=!!Pe,Te=Object(k.g)(Pe)&&Pe.autoFocus,Le=void 0!==K?K:Se,Fe=void 0!==G?G:Te,Me=l.a.createElement(y.b,A({},N,{prefixCls:v.prefixCls||N.prefixCls,locale:Ce,zIndex:pe||1050,getPopupContainer:function(e){return"function"==typeof ee?ee(e):ie.current}}),h&&l.a.createElement("div",{className:he+"-header"},l.a.createElement("div",{className:he+"-title"},h)),l.a.createElement("div",{ref:ie,className:he+"-content"},C),function(){if(null!==F){var e=l.a.createElement(d.a,A({onClick:we},S),R||Ce.Modal.cancelText),n=l.a.createElement(d.a,A({loading:ge,onClick:Ie,type:"primary"},P),I||Ce.Modal.okText),t=F||l.a.createElement(l.a.Fragment,null,!Y&&e,n);return Object(k.e)(F)&&(t=F(e,n)),l.a.createElement("div",{className:he+"-footer"},t)}}(),ke&&(void 0!==le?l.a.createElement("span",{onClick:we,className:he+"-close-icon"},le):l.a.createElement(x.a,{tabIndex:-1,onClick:we,className:he+"-close-icon"},l.a.createElement(i.a,null)))),De=l.a.createElement("div",{className:Object(m.a)(he,(t={},t[he+"-simple"]=O,t),E),style:_},Le?l.a.createElement(u.a,{disabled:!g,autoFocus:Fe},Me):Me),qe=function(e){if(!Ee.current){var n="";if(ve.current){var t=e.getBoundingClientRect(),r=ve.current,a=r.left,o=r.top;n=a-t.left+"px "+(o-t.top)+"px"}e.style.transformOrigin=n}};return l.a.createElement(b.a,{visible:g,forceRender:!J,getContainer:L},l.a.createElement("div",{ref:n},Z?l.a.createElement(c.a,{in:g,timeout:400,appear:!0,mountOnEnter:J,classNames:"fadeModal",unmountOnExit:X,onEnter:function(e){e.style.display="block"},onExited:function(e){e.style.display="none"}},l.a.createElement("div",{className:he+"-mask",style:ae})):null,l.a.createElement("div",A({role:"dialog","aria-hidden":"true"},Object(j.a)(ce,["content","icon","showIcon","isNotice","noticeType","onCancel","onOk","onConfirm","closable","prefixCls"]),{ref:ue,className:Object(m.a)(he+"-wrapper",(a={},a[he+"-wrapper-no-mask"]=!Z,a[he+"-wrapper-align-center"]=$,a),ne),style:A(A({},oe||{}),{display:g||fe?"block":"none",overflow:!g&&fe?"hidden":""}),onMouseDown:function(e){_e.current=e.target===e.currentTarget},onClick:function(e){_e.current&&(_e.current=!1,!Re.current&&Q&&Z&&e.target===e.currentTarget&&setTimeout((function(){we()}),100))}}),l.a.createElement(c.a,{in:g,timeout:400,appear:!0,classNames:"zoomModal",unmountOnExit:X,mountOnEnter:J,onEnter:function(e){de(!0),ve.current=z,Ee.current=!!e.style.transformOrigin,qe(e)},onEntered:function(e){qe(e),ve.current=null,W&&W()},onExit:function(){Re.current=!0},onExited:function(e){de(!1),qe(e),M&&M(),Re.current=!1}},l.a.cloneElement(Object(k.e)(re)?re(De):De,{onMouseDown:function(){_e.current=!1},onMouseUp:function(){_e.current=!1}})))))}));V.displayName="Modal",V.config=_.e,V.confirm=function(e){return C(e)},V.useModal=M,["info","success","warning","error"].forEach((function(e){V[e]=function(n){return C(A(A({},n),{isNotice:!0,noticeType:e}))}})),V.destroyAll=function(){for(;_.a.length;){var e=_.a.pop();e&&e()}};var J=V;n.a=J},606:function(e,n,t){}}]);