(window.webpackJsonp=window.webpackJsonp||[]).push([[11,46,59],{159:function(e,t,r){"use strict";r.r(t);var n=r(7),a=r.n(n),l=(r(76),r(27)),u=(r(149),r(58)),o=r(77),c=r.n(o),i=(r(557),r(555)),m=(r(554),r(556)),s=(r(148),r(48)),b=r(23),d=r.n(b),f=(r(274),r(106)),N=r(49),_=r.n(N),p=r(0),g=r.n(p),h=r(539),E="/Users/mrhh/Desktop/gbs-admin/src/pages/shop-table/form/index.jsx",O=f.a.Item,y={labelCol:{span:7},wrapperCol:{span:17}},j={wrapperCol:{span:17,offset:7}};t.default=function(e){var t=e.closeModalAndReqTable,r=e.clickItem,n=Object(p.useRef)(),o=Object(p.useState)("default"),b=d()(o,2),N=b[0],v=(b[1],Object(p.useState)([])),w=d()(v,2),T=w[0],x=w[1];return console.log(r),Object(p.useEffect)((function(){n.current.setFieldsValue(r)}),[]),Object(p.useEffect)((function(){Object(h.g)().then((function(e){console.log("res: ",e);var t,r=e.data;t=r.map((function(e){return function e(t){var r=Array.isArray(t.region_children)&&t.region_children.length>0;return{key:String(t.region_id),value:String(t.region_id),label:t.region_name,children:r?t.region_children.map((function(t){return e(t)})):[]}}(e)})),console.log(t),x(t)}))}),[]),g.a.createElement("div",{style:{maxWidth:650},__source:{fileName:E,lineNumber:115,columnNumber:5}},g.a.createElement(f.a,a()({ref:n},y,{size:N,onSubmit:function(e){console.log(e)},onValuesChange:function(e,t){console.log("onValuesChange: ",e,t)},scrollToFirstError:!0,__source:{fileName:E,lineNumber:116,columnNumber:7}}),g.a.createElement(O,{label:"店铺名称",field:"store_name",rules:[{required:!0,message:"请填写店铺名称"}],__source:{fileName:E,lineNumber:130,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写店铺名称...",__source:{fileName:E,lineNumber:135,columnNumber:11}})),g.a.createElement(O,{field:"Province",label:"店铺地区",__source:{fileName:E,lineNumber:137,columnNumber:9}},g.a.createElement(m.a,{showSearch:!0,placeholder:"please select",allowClear:!0,options:T,__source:{fileName:E,lineNumber:138,columnNumber:11}})),g.a.createElement(O,{label:"门店类型",field:"store_type",rules:[{required:!1,message:"请填写门店类型"}],__source:{fileName:E,lineNumber:166,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写门店类型...",__source:{fileName:E,lineNumber:171,columnNumber:11}})),g.a.createElement(O,{label:"门店级别",field:"store_level",rules:[{required:!1,message:"请填写门店级别"}],__source:{fileName:E,lineNumber:173,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写门店级别...",__source:{fileName:E,lineNumber:178,columnNumber:11}})),g.a.createElement(O,{label:"开业日期",field:"open_date",rules:[{required:!0,message:"请填写开业日期"}],__source:{fileName:E,lineNumber:180,columnNumber:9}},g.a.createElement(i.a,{showTime:!0,__source:{fileName:E,lineNumber:190,columnNumber:11}})),g.a.createElement(O,{label:"详细地址",field:"position_address",rules:[{required:!0,message:"请填写详细地址"}],__source:{fileName:E,lineNumber:193,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写详细地址...",__source:{fileName:E,lineNumber:198,columnNumber:11}})),g.a.createElement(O,{label:"经度坐标",field:"position_x",rules:[{required:!1,message:"请填写经度坐标"}],__source:{fileName:E,lineNumber:200,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写经度坐标...",__source:{fileName:E,lineNumber:205,columnNumber:11}})),g.a.createElement(O,{label:"纬度坐标",field:"position_y",rules:[{required:!1,message:"请填写纬度坐标"}],__source:{fileName:E,lineNumber:207,columnNumber:9}},g.a.createElement(s.a,{placeholder:"请填写纬度坐标...",__source:{fileName:E,lineNumber:212,columnNumber:11}})),g.a.createElement(O,a()({},j,{__source:{fileName:E,lineNumber:215,columnNumber:9}}),g.a.createElement(l.a,{onClick:c()(_.a.mark((function e(){var a,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=26;break}return e.prev=1,e.next=4,n.current.validate();case 4:if(null!==r){e.next=11;break}return console.log(n.current.getFields()),e.next=8,Object(h.c)(n.current.getFields());case 8:a=e.sent,e.next=17;break;case 11:return l=n.current.getFields(),console.log("param: ",l),l.store_code=r.store_code,e.next=16,Object(h.i)(l);case 16:a=e.sent;case 17:console.log("data: ",a),200===a.code&&(u.a.success("添加成功"),t()),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0),console.log(n.current.getFieldsError()),u.a.error("校验失败，请检查字段！");case 26:case"end":return e.stop()}}),e,null,[[1,21]])}))),type:"primary",style:{marginRight:24},__source:{fileName:E,lineNumber:216,columnNumber:11}},"Submit"),g.a.createElement(l.a,{onClick:function(){n.current.resetFields()},__source:{fileName:E,lineNumber:248,columnNumber:11}},"Reset"))))}},170:function(e,t,r){"use strict";r.r(t);r(553);var n=r(552),a=(r(540),r(541)),l=(r(150),r(78)),u=(r(148),r(48)),o=(r(542),r(545)),c=(r(543),r(544)),i=r(5),m=r.n(i),s=(r(76),r(27)),b=r(23),d=r.n(b),f=r(549),N=r.n(f),_=r(0),p=r.n(_),g=r(31),h=r(539),E=r(279),O=r(32),y=r(533),j=r.n(y),v=r(159),w="/Users/mrhh/Desktop/gbs-admin/src/pages/shop-table/index.tsx";function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){N()(e);var t=Object(O.a)(),r=Object(_.useState)(!1),i=d()(r,2),m=i[0],b=i[1],f=Object(_.useState)(""),y=d()(f,2),T=y[0],P=y[1],S=Object(_.useState)(""),A=d()(S,2),C=A[0],k=A[1],I=Object(_.useState)(""),D=d()(I,2),U=D[0],q=D[1],F=Object(_.useState)(""),R=d()(F,2),M=R[0],z=R[1],G=Object(_.useState)(""),L=d()(G,2),V=L[0],B=L[1],J=Object(_.useState)(null),W=d()(J,2),K=W[0],H=W[1],Q=[{title:"店铺名称",dataIndex:"store_name"},{title:"店铺地址",dataIndex:"position_address"},{title:t["searchTable.columns.createdTime"],dataIndex:"created_time"},{title:"更新时间",dataIndex:"updated_time"},{title:t["searchTable.columns.operations"],render:function(e,r){return p.a.createElement(s.a,{onClick:function(){console.log(e,r),H(r),b(!0)},size:"small",__source:{fileName:w,lineNumber:46,columnNumber:9}},t["searchTable.columns.operations.update"])}}],X=Object(g.c)((function(e){return e.searchTable})),Y=X.data,Z=X.pagination,$=X.loading,ee=X.formParams,te=Object(g.b)();function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object(h.h)({page:e,page_size:t,store_name:T,store_type:C,store_status:U,store_level:M,position_city:V});n.then((function(e){var t=e.data,n=e.paginator;te({type:E.UPDATE_LIST,payload:{data:t}}),te({type:E.UPDATE_PAGINATION,payload:{pagination:x(x({},Z),{},{current:n.page,pageSize:n.page_size,total:n.total_count})}}),te({type:E.UPDATE_LOADING,payload:{loading:!1}}),te({type:E.UPDATE_FORM_PARAMS,payload:{params:r}})}))}return Object(_.useEffect)((function(){re()}),[]),Object(_.useEffect)((function(){var e=Object(h.e)();console.log("data: ",e)}),[]),p.a.createElement("div",{className:j.a.container,__source:{fileName:w,lineNumber:136,columnNumber:5}},p.a.createElement(c.a,{title:null===K?"添加门店":"修改门店",footer:null,onCancel:function(){b(!1)},unmountOnExit:!0,style:{width:900,minWidth:900},visible:m,__source:{fileName:w,lineNumber:137,columnNumber:7}},p.a.createElement(v.default,{clickItem:K,closeModalAndReqTable:function(){b(!1),re()},__source:{fileName:w,lineNumber:147,columnNumber:9}})),p.a.createElement(o.a,{style:{marginBottom:20},__source:{fileName:w,lineNumber:155,columnNumber:7}},p.a.createElement(o.a.Item,{__source:{fileName:w,lineNumber:156,columnNumber:9}},t["menu.list"]),p.a.createElement(o.a.Item,{__source:{fileName:w,lineNumber:157,columnNumber:9}},t["menu.list.searchTable"])),p.a.createElement("div",{__source:{fileName:w,lineNumber:159,columnNumber:7}},p.a.createElement(a.a,{style:{marginBottom:20},__source:{fileName:w,lineNumber:160,columnNumber:9}},p.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},__source:{fileName:w,lineNumber:161,columnNumber:11}},p.a.createElement(s.a,{onClick:function(){b(!0),H(null)},type:"primary",__source:{fileName:w,lineNumber:162,columnNumber:13}},"添加门店"),p.a.createElement("div",{__source:{fileName:w,lineNumber:172,columnNumber:13}},p.a.createElement(l.a,{style:{marginLeft:20},wrap:!0,__source:{fileName:w,lineNumber:173,columnNumber:15}},p.a.createElement(u.a,{value:T,onChange:function(e){P(e)},placeholder:"请输入店铺名称",style:{width:200},__source:{fileName:w,lineNumber:174,columnNumber:17}}),p.a.createElement(u.a,{value:C,onChange:function(e){k(e)},placeholder:"请选择门店类型",style:{width:200},__source:{fileName:w,lineNumber:182,columnNumber:17}}),p.a.createElement(u.a,{value:U,onChange:function(e){q(e)},placeholder:"请选择门店状态",style:{width:200},__source:{fileName:w,lineNumber:190,columnNumber:17}}),p.a.createElement(u.a,{onChange:function(e){z(e)},placeholder:"门店等级",value:M,style:{width:200},__source:{fileName:w,lineNumber:198,columnNumber:17}}),p.a.createElement(u.a,{onChange:function(e){B(e)},value:V,placeholder:"所在城市",style:{width:200},__source:{fileName:w,lineNumber:206,columnNumber:17}}),p.a.createElement(s.a,{onClick:function(){P(""),k(""),q(""),z(""),B("")},__source:{fileName:w,lineNumber:214,columnNumber:17}},"重置"),p.a.createElement(s.a,{onClick:function(){re()},type:"primary",__source:{fileName:w,lineNumber:225,columnNumber:17}},"搜索")))))),p.a.createElement(a.a,{bordered:!1,__source:{fileName:w,lineNumber:238,columnNumber:7}},p.a.createElement(n.a,{rowKey:"user_account",loading:$,onChange:function(e){re(e.current,e.pageSize,ee)},pagination:Z,columns:Q,data:Y,__source:{fileName:w,lineNumber:239,columnNumber:9}})))}},279:function(e,t,r){"use strict";r.r(t),r.d(t,"UPDATE_LIST",(function(){return n})),r.d(t,"UPDATE_LOADING",(function(){return a})),r.d(t,"UPDATE_PAGINATION",(function(){return l})),r.d(t,"UPDATE_FORM_PARAMS",(function(){return u}));var n="searchTable_update_list",a="searchTable_update_loading",l="searchTable_update_pagination",u="searchTable_update_formParams"},533:function(e,t,r){e.exports={container:"container-1a91bcd884",toolbar:"toolbar-1e380ce17a",operations:"operations-866b8f61d2"}},539:function(e,t,r){"use strict";r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return l})),r.d(t,"h",(function(){return u})),r.d(t,"f",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return m})),r.d(t,"i",(function(){return s})),r.d(t,"g",(function(){return b}));var n=r(88);function a(e){return Object(n.a)({url:"/system/dict/labels",method:"POST"})}function l(e){return Object(n.a)({url:"/v1/drama/list",data:e})}function u(e){return Object(n.a)({url:"/v1/store/list",data:e,method:"post"})}function o(e){return Object(n.a)({url:"/system/menu/list",data:e,method:"post"})}function c(e){return Object(n.a)({url:"/v1/drama/add",data:e})}function i(e){return Object(n.a)({url:"/v1/store/add",data:e})}function m(e){return Object(n.a)({url:"/v1/game/added",data:e})}function s(e){return Object(n.a)({url:"/v1/store/edit",data:e})}function b(){return Object(n.a)({url:"/system/basic/regions",method:"GET"})}},549:function(e,t){e.exports=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},e.exports.default=e.exports,e.exports.__esModule=!0}}]);