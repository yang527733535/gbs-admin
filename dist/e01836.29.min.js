(window.webpackJsonp=window.webpackJsonp||[]).push([[29,54,74,117],{197:function(e,r,t){"use strict";t.r(r);t(155);var a=t(74),l=(t(689),t(702)),n=(t(638),t(640)),m=(t(635),t(636)),u=(t(154),t(82)),c=(t(64),t(24)),o=(t(111),t(45)),i=(t(112),t(39)),s=t(22),b=t.n(s),N=t(0),f=t.n(N),p=t(32),_=t(98),d=t.n(_),E=t(350),g=t(351),y=t(352),O=t(57),v=t(35),F=t(608),h=t.n(F),j="/Users/mrhh/Desktop/gbs-admin/src/pages/step-form/index.tsx";r.default=function(){var e=Object(v.a)(),r=Object(p.c)((function(e){return e.stepForm})),t=Object(p.b)(),s=Object(N.createRef)(),_=r.loading,F=r.step;Object(N.useEffect)((function(){d.a.get("/api/stepForm").then((function(e){t({type:O.UPDATE_FORM,payload:{data:e.data||{}}})})).finally((function(){t({type:O.UPDATE_LOADING,payload:{loading:!1}})}))}),[]);var w=Object(N.useState)(null),I=b()(w,2),k=I[0],P=I[1],C=Object(N.useState)(5),D=b()(C,2),A=D[0],S=D[1],T=Object(N.useState)(null),x=b()(T,2),L=x[0],R=x[1];Object(N.useEffect)((function(){document.addEventListener("",(function(){}))}),[]);var U=/^[1][3,4,5,7,8,9][0-9]{9}$/;return f.a.createElement("div",{className:h.a.container,__source:{fileName:j,lineNumber:67,columnNumber:5}},f.a.createElement(m.a,{__source:{fileName:j,lineNumber:68,columnNumber:7}},f.a.createElement(u.a,{__source:{fileName:j,lineNumber:69,columnNumber:9}},A,f.a.createElement(i.a,{onChange:function(e){R(e)},placeholder:"请输入手机号码",__source:{fileName:j,lineNumber:71,columnNumber:11}}),f.a.createElement(c.a,{disabled:5!=A,onClick:function(){var e;(console.log(s.current),U.test(L))?(e=setInterval((function(){if(console.log(A),0===A)clearInterval(k);else{var e=S((function(e){return e-1}));P(e)}}),1e3),P(e)):o.a.error("请填写正确的手机号码")},__source:{fileName:j,lineNumber:77,columnNumber:11}},5===A?"获取验证码":A))),f.a.createElement(n.a,{style:{marginBottom:5},__source:{fileName:j,lineNumber:94,columnNumber:7}},f.a.createElement(n.a.Item,{__source:{fileName:j,lineNumber:95,columnNumber:9}},e["menu.form.step"])),f.a.createElement(a.a,{loading:_,style:{width:"100%"},__source:{fileName:j,lineNumber:97,columnNumber:7}},f.a.createElement("div",{className:h.a.wrapper,__source:{fileName:j,lineNumber:98,columnNumber:9}},f.a.createElement(l.a,{labelPlacement:"vertical",className:h.a.steps,current:F,__source:{fileName:j,lineNumber:99,columnNumber:11}},f.a.createElement(l.a.Step,{title:e["stepForm.step.title.baseInfo"],description:e["stepForm.step.subTitle.baseInfo"],__source:{fileName:j,lineNumber:100,columnNumber:13}}),f.a.createElement(l.a.Step,{title:e["stepForm.step.title.target"],description:e["stepForm.step.subTitle.target"],__source:{fileName:j,lineNumber:104,columnNumber:13}}),f.a.createElement(l.a.Step,{title:e["stepForm.step.title.finish"],description:e["stepForm.step.subTitle.finish"],__source:{fileName:j,lineNumber:108,columnNumber:13}})),1===F&&f.a.createElement(E.default,{__source:{fileName:j,lineNumber:113,columnNumber:26}}),2===F&&f.a.createElement(g.default,{__source:{fileName:j,lineNumber:114,columnNumber:26}}),3===F&&f.a.createElement(y.default,{__source:{fileName:j,lineNumber:115,columnNumber:26}}))))}},350:function(e,r,t){"use strict";t.r(r);t(64);var a=t(24),l=(t(366),t(264)),n=(t(242),t(96)),m=(t(348),t(255)),u=(t(677),t(679)),c=(t(667),t(668)),o=(t(241),t(73)),i=(t(112),t(39)),s=t(22),b=t.n(s),N=t(0),f=t.n(N),p=t(32),_=t(98),d=t.n(_),E=t(57),g=t(35),y=t(608),O=t.n(y),v="/Users/mrhh/Desktop/gbs-admin/src/pages/step-form/base-info.tsx";r.default=function(){var e=Object(g.a)(),r=Object(p.c)((function(e){return e.stepForm})),t=Object(p.b)(),s=r.data,_=r.activeKeys,y=Object(N.useRef)(),F=Object(N.useState)([]),h=b()(F,2),j=h[0],w=h[1],I=Object(N.useState)([]),k=b()(I,2),P=k[0],C=k[1],D=function(e){d.a.get("/api/lineList",{params:{cluster:e}}).then((function(e){C(e.data||[]),!s.lineName&&e.data.length&&y.current&&y.current.setFieldValue("lineName",e.data[0].value)}))};return Object(N.useEffect)((function(){d.a.get("/api/clusterList").then((function(e){w(e.data||[])}))}),[]),Object(N.useEffect)((function(){y.current.setFieldsValue(s),s.cluster&&D(s.cluster[0])}),[s]),Object(N.useEffect)((function(){return function(){var e,r=(null===(e=y.current)||void 0===e?void 0:e.getFieldsValue())||{};t({type:E.UPDATE_FORM,payload:{data:r}})}}),[]),f.a.createElement(o.a,{className:O.a.form,ref:y,__source:{fileName:v,lineNumber:93,columnNumber:5}},f.a.createElement(u.a,{bordered:!1,activeKey:_,onChange:function(e,r){t({type:E.UPDATE_ACTIVE_KEYS,payload:{activeKeys:r}})},__source:{fileName:v,lineNumber:94,columnNumber:7}},f.a.createElement(u.a.Item,{name:"baseConfig",header:e["stepForm.collapse.title.base"],__source:{fileName:v,lineNumber:95,columnNumber:9}},f.a.createElement("div",{className:O.a["form-content"],__source:{fileName:v,lineNumber:96,columnNumber:11}},f.a.createElement(o.a.Item,{label:e["stepForm.form.label.name"],field:"name",rules:[{required:!0,message:e["stepForm.form.error.name.required"]},{match:/^[a-zA-z0-9][-a-zA-z0-9]{0,62}(\.[a-zA-z0-9][-a-zA-z0-9]{0,62})+$/,message:e["stepForm.form.error.name.pattern"]}],__source:{fileName:v,lineNumber:97,columnNumber:13}},f.a.createElement(i.a,{placeholder:e["stepForm.placeholder.name"],__source:{fileName:v,lineNumber:108,columnNumber:15}})),f.a.createElement(o.a.Item,{label:e["stepForm.form.label.purpose"],field:"purpose",rules:[{required:!0,message:e["stepForm.form.error.purpose.required"]}],__source:{fileName:v,lineNumber:110,columnNumber:13}},f.a.createElement(i.a,{placeholder:e["stepForm.placeholder.purpose"],__source:{fileName:v,lineNumber:115,columnNumber:15}})),f.a.createElement(o.a.Item,{label:e["stepForm.form.label.cluster"],field:"cluster",__source:{fileName:v,lineNumber:117,columnNumber:13}},f.a.createElement(c.a,{placeholder:e["stepForm.placeholder.cluster"],options:j,onChange:function(e){var r=Array.isArray(e)&&e[e.length-1];y.current&&y.current.setFieldValue("lineName",void 0),r?D(r):C([])},__source:{fileName:v,lineNumber:118,columnNumber:15}})))),f.a.createElement(u.a.Item,{name:"advanceConfig",header:e["stepForm.collapse.title.highLevel"],__source:{fileName:v,lineNumber:126,columnNumber:9}},f.a.createElement(m.a,{closable:!0,banner:!0,type:"warning",content:e["stepForm.alert.highLevel"],__source:{fileName:v,lineNumber:127,columnNumber:11}}),f.a.createElement("div",{className:O.a["form-content"],__source:{fileName:v,lineNumber:128,columnNumber:11}},f.a.createElement(o.a.Item,{label:e["stepForm.form.label.type"],field:"type",__source:{fileName:v,lineNumber:129,columnNumber:13}},f.a.createElement(n.a,{placeholder:e["stepForm.placeholder.type"],__source:{fileName:v,lineNumber:130,columnNumber:15}},f.a.createElement(n.a.Option,{value:"web",__source:{fileName:v,lineNumber:131,columnNumber:17}},e["stepForm.label.type.web"]),f.a.createElement(n.a.Option,{value:"api",__source:{fileName:v,lineNumber:132,columnNumber:17}},e["stepForm.label.type.api"]))),f.a.createElement(o.a.Item,{label:e["stepForm.form.label.dns"],field:"dns",triggerPropName:"checked",__source:{fileName:v,lineNumber:135,columnNumber:13}},f.a.createElement(l.a,{__source:{fileName:v,lineNumber:140,columnNumber:15}})),f.a.createElement(o.a.Item,{label:e["stepForm.form.label.subDomain"],field:"subDomain",triggerPropName:"checked",__source:{fileName:v,lineNumber:142,columnNumber:13}},f.a.createElement(l.a,{__source:{fileName:v,lineNumber:147,columnNumber:15}})),f.a.createElement(o.a.Item,{label:e["stepForm.form.label.lineName"],field:"lineName",__source:{fileName:v,lineNumber:149,columnNumber:13}},f.a.createElement(n.a,{placeholder:e["stepForm.placeholder.lineName"],__source:{fileName:v,lineNumber:150,columnNumber:15}},P.map((function(e){return f.a.createElement(n.a.Option,{value:e.value,key:"".concat(e.value),__source:{fileName:v,lineNumber:152,columnNumber:19}},e.label)}))))))),f.a.createElement("div",{className:O.a.actions,__source:{fileName:v,lineNumber:161,columnNumber:7}},f.a.createElement(a.a,{type:"primary",onClick:function(){y.current.validate().then((function(){t({type:E.GO_NEXT})}))},__source:{fileName:v,lineNumber:162,columnNumber:9}},e["stepForm.button.next"])))}},351:function(e,r,t){"use strict";t.r(r);t(64);var a=t(24),l=(t(242),t(96)),n=(t(349),t(256)),m=(t(244),t(156)),u=(t(241),t(73)),c=(t(112),t(39)),o=(t(159),t(67)),i=(t(111),t(45)),s=t(4),b=t.n(s),N=t(22),f=t.n(N),p=t(0),_=t.n(p),d=t(32),E=t(98),g=t.n(E),y=t(57),O=t(35),v=t(608),F=t.n(v),h="/Users/mrhh/Desktop/gbs-admin/src/pages/step-form/service.tsx";function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach((function(r){b()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.default=function(){var e=Object(O.a)(),r=Object(d.c)((function(e){return e.stepForm})),t=Object(d.b)(),s=r.data,b=Object(p.useRef)(),N=Object(p.useState)(!1),E=f()(N,2),v=E[0],j=E[1];return Object(p.useEffect)((function(){b.current.setFieldsValue(s)}),[s]),Object(p.useEffect)((function(){return function(){var e,r=(null===(e=b.current)||void 0===e?void 0:e.getFieldsValue())||{};t({type:y.UPDATE_FORM,payload:{data:r}})}}),[]),_.a.createElement(u.a,{ref:b,className:F.a.form,labelCol:{span:5},wrapperCol:{span:19},__source:{fileName:h,lineNumber:71,columnNumber:5}},_.a.createElement(o.a.Title,{style:{marginTop:0,marginBottom:16},heading:6,__source:{fileName:h,lineNumber:72,columnNumber:7}},e["stepForm.form.title.upstream"]),_.a.createElement(u.a.Item,{label:"P.S.M",extra:e["stepForm.form.extra.psm"],required:!0,__source:{fileName:h,lineNumber:75,columnNumber:7}},_.a.createElement(m.a.Row,{align:"center",justify:"space-around",gutter:8,__source:{fileName:h,lineNumber:76,columnNumber:9}},_.a.createElement(m.a.Col,{span:16,__source:{fileName:h,lineNumber:77,columnNumber:11}},_.a.createElement(u.a.Item,{field:"psm",rules:[{required:!0,message:e["stepForm.form.error.psm.required"]}],style:{marginBottom:0},__source:{fileName:h,lineNumber:78,columnNumber:13}},_.a.createElement(c.a,{placeholder:"Product.Subsystem.Module",__source:{fileName:h,lineNumber:83,columnNumber:15}}))),_.a.createElement(m.a.Col,{span:8,__source:{fileName:h,lineNumber:86,columnNumber:11}},_.a.createElement(n.a,{__source:{fileName:h,lineNumber:87,columnNumber:13}},e["stepForm.link.psmDefine"])))),_.a.createElement(u.a.Item,{label:e["stepForm.form.label.strategy"],__source:{fileName:h,lineNumber:91,columnNumber:7}},_.a.createElement(m.a.Row,{align:"center",justify:"space-around",gutter:8,__source:{fileName:h,lineNumber:92,columnNumber:9}},_.a.createElement(m.a.Col,{span:16,__source:{fileName:h,lineNumber:93,columnNumber:11}},_.a.createElement(u.a.Item,{field:"strategy",style:{marginBottom:0},__source:{fileName:h,lineNumber:94,columnNumber:13}},_.a.createElement(l.a,{placeholder:e["stepForm.placeholder.strategy"],__source:{fileName:h,lineNumber:95,columnNumber:15}},_.a.createElement(l.a.Option,{value:"local",__source:{fileName:h,lineNumber:96,columnNumber:17}},"LOCAL"),_.a.createElement(l.a.Option,{value:"all",__source:{fileName:h,lineNumber:97,columnNumber:17}},"ALL")))),_.a.createElement(m.a.Col,{span:8,__source:{fileName:h,lineNumber:101,columnNumber:11}},_.a.createElement(n.a,{__source:{fileName:h,lineNumber:102,columnNumber:13}},e["stepForm.link.selectStrategy"])))),_.a.createElement("div",{className:F.a.actions,__source:{fileName:h,lineNumber:106,columnNumber:7}},_.a.createElement(a.a,{type:"secondary",onClick:function(){t({type:y.GO_PREV})},__source:{fileName:h,lineNumber:107,columnNumber:9}},e["stepForm.button.prev"]),_.a.createElement(a.a,{loading:v,type:"primary",onClick:function(){b.current.validate().then((function(){!function(){j(!0);var e=b.current.getFieldsValue();console.log("formData: ",e),console.log(s),g.a.post("/api/domainApply",{data:w(w({},s),e)}).finally((function(){j(!1)})).then((function(){t({type:y.GO_NEXT})})).catch((function(e){i.a.error(e.message)}))}()}))},__source:{fileName:h,lineNumber:115,columnNumber:9}},e["stepForm.button.submit"])))}},352:function(e,r,t){"use strict";t.r(r);t(649);var a=t(650),l=(t(64),t(24)),n=t(0),m=t.n(n),u=t(32),c=t(57),o=t(35),i="/Users/mrhh/Desktop/gbs-admin/src/pages/step-form/success.tsx";r.default=function(){var e=Object(o.a)(),r=Object(u.b)();return m.a.createElement(a.a,{status:"success",title:e["stepForm.success.title"],subTitle:e["stepForm.success.subTitle"],extra:[m.a.createElement(l.a,{key:"again",type:"secondary",style:{marginRight:16},onClick:function(){r({type:c.GO,payload:{step:1}})},__source:{fileName:i,lineNumber:19,columnNumber:9}},e["stepForm.button.again"]),m.a.createElement(l.a,{key:"view",type:"primary",__source:{fileName:i,lineNumber:29,columnNumber:9}},e["stepForm.button.view"])],__source:{fileName:i,lineNumber:14,columnNumber:5}})}},608:function(e,r,t){e.exports={container:"container-6427058b85",wrapper:"wrapper-1eba4af8b8",steps:"steps-79df5ed959",form:"form-2a6f8eda19","form-content":"form-content-96ca552934",actions:"actions-df2cdcf708"}}}]);