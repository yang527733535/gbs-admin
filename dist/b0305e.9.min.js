(window.webpackJsonp=window.webpackJsonp||[]).push([[9,29,69,88],{169:function(e,r,n){"use strict";n.r(r);n(151);var t=n(59),a=n(78),l=n.n(a),c=n(7),o=n.n(c),u=(n(152),n(79)),m=(n(77),n(28)),i=n(583),s=(n(224),n(89)),b=(n(302),n(226)),N=(n(150),n(49)),f=n(24),_=n.n(f),d=(n(301),n(106)),p=n(50),g=n.n(p),E=n(0),h=n.n(E),y=n(223),O="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/form/index.jsx",v=d.a.Item,j={labelCol:{span:7},wrapperCol:{span:17}},w={wrapperCol:{span:17,offset:7}};r.default=function(e){var r=e.closeModalAndReqTable,n=e.clickItem,a=Object(E.useRef)(),c=Object(E.useState)("default"),f=_()(c,2),p=f[0],P=(f[1],Object(E.useState)([])),k=_()(P,2),x=(k[0],k[1]);return console.log(n),Object(E.useEffect)((function(){a.current.setFieldsValue(n)}),[]),Object(E.useEffect)((function(){Object(y.n)().then((function(e){console.log("res: ",e);var r,n=e.data;r=n.map((function(e){return function e(r){var n=Array.isArray(r.region_children)&&r.region_children.length>0;return{key:String(r.region_id),value:String(r.region_id),label:r.region_name,children:n?r.region_children.map((function(r){return e(r)})):[]}}(e)})),console.log(r),x(r)}))}),[]),h.a.createElement("div",{style:{maxWidth:650},__source:{fileName:O,lineNumber:77,columnNumber:5}},h.a.createElement(d.a,o()({ref:a},j,{size:p,onSubmit:function(e){console.log(e)},onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:O,lineNumber:78,columnNumber:7}}),h.a.createElement(v,{label:"店铺编码",field:"store_code",rules:[{required:!0,message:"请填写店铺编码"}],__source:{fileName:O,lineNumber:92,columnNumber:9}},h.a.createElement(N.a,{placeholder:"请填写店铺编码...",__source:{fileName:O,lineNumber:97,columnNumber:11}})),h.a.createElement(v,{label:"剧本编码",field:"gb_code",rules:[{required:!0,message:"请填写剧本编码"}],__source:{fileName:O,lineNumber:99,columnNumber:9}},h.a.createElement(N.a,{placeholder:"请填写剧本编码...",__source:{fileName:O,lineNumber:104,columnNumber:11}})),h.a.createElement(v,{label:"剧本价格",field:"gb_price",rules:[{required:!0,message:"请填写剧本价格"}],__source:{fileName:O,lineNumber:106,columnNumber:9}},h.a.createElement(b.a,{min:0,placeholder:"请填写剧本价格...",__source:{fileName:O,lineNumber:111,columnNumber:11}})),h.a.createElement(v,{label:"玩家人数",field:"game_people",rules:[{required:!0,message:"请填写玩家人数"}],__source:{fileName:O,lineNumber:113,columnNumber:9}},h.a.createElement(b.a,{min:2,placeholder:"请填写玩家人数...",__source:{fileName:O,lineNumber:118,columnNumber:11}})),h.a.createElement(v,{label:"主持人",field:"dm_user",rules:[{required:!0,message:"请填写主持人"}],__source:{fileName:O,lineNumber:120,columnNumber:9}},h.a.createElement(N.a,{min:2,placeholder:"请填写主持人...",__source:{fileName:O,lineNumber:125,columnNumber:11}})),h.a.createElement(d.a.List,{field:"game_player",__source:{fileName:O,lineNumber:128,columnNumber:9}},(function(e,r){var n=r.add,t=r.remove;r.move;return h.a.createElement("div",{__source:{fileName:O,lineNumber:131,columnNumber:15}},e.map((function(e,r){return h.a.createElement("div",{key:e.key,__source:{fileName:O,lineNumber:134,columnNumber:21}},h.a.createElement(d.a.Item,{label:"玩家".concat(1+r),__source:{fileName:O,lineNumber:135,columnNumber:23}},h.a.createElement(u.a,{__source:{fileName:O,lineNumber:136,columnNumber:25}},h.a.createElement(d.a.Item,{field:"".concat(e.field,".player_user"),rules:[{required:!0}],noStyle:!0,__source:{fileName:O,lineNumber:137,columnNumber:27}},h.a.createElement(N.a,{placeholder:"玩家账号",__source:{fileName:O,lineNumber:142,columnNumber:29}})),h.a.createElement(d.a.Item,{field:"".concat(e.field,".player_type"),rules:[{required:!0}],noStyle:!0,__source:{fileName:O,lineNumber:144,columnNumber:27}},h.a.createElement(s.a,{placeholder:"玩家类型",__source:{fileName:O,lineNumber:149,columnNumber:29}},h.a.createElement(s.a.Option,{value:"player",__source:{fileName:O,lineNumber:150,columnNumber:31}},"player"),h.a.createElement(s.a.Option,{value:"worker",__source:{fileName:O,lineNumber:151,columnNumber:31}},"worker"))),h.a.createElement(d.a.Item,{field:"".concat(e.field,".player_name"),rules:[{required:!0}],noStyle:!0,__source:{fileName:O,lineNumber:155,columnNumber:27}},h.a.createElement(N.a,{placeholder:"玩家名称",__source:{fileName:O,lineNumber:160,columnNumber:29}})),h.a.createElement(d.a.Item,{field:"".concat(e.field,".player_note"),rules:[{required:!0}],noStyle:!0,__source:{fileName:O,lineNumber:162,columnNumber:27}},h.a.createElement(N.a,{placeholder:"玩家备注",__source:{fileName:O,lineNumber:167,columnNumber:29}})),h.a.createElement(m.a,{icon:h.a.createElement(i.a,{__source:{fileName:O,lineNumber:170,columnNumber:35}}),shape:"circle",status:"danger",onClick:function(){return t(r)},__source:{fileName:O,lineNumber:169,columnNumber:27}}))))})),h.a.createElement(d.a.Item,o()({},w,{__source:{fileName:O,lineNumber:180,columnNumber:17}}),h.a.createElement(m.a,{onClick:function(){n()},__source:{fileName:O,lineNumber:181,columnNumber:19}},"添加玩家")))})),h.a.createElement(v,o()({},w,{__source:{fileName:O,lineNumber:207,columnNumber:9}}),h.a.createElement(m.a,{onClick:l()(g.a.mark((function e(){var l,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.current){e.next=25;break}return e.prev=1,e.next=4,a.current.validate();case 4:if(null!==n){e.next=11;break}return console.log(a.current.getFields()),e.next=8,Object(y.c)(a.current.getFields());case 8:l=e.sent,e.next=17;break;case 11:return c=a.current.getFields(),console.log("param: ",c),c.store_code=n.store_code,e.next=16,Object(y.s)(c);case 16:l=e.sent;case 17:200===l.code&&(t.a.success("添加成功"),r()),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0),console.log(a.current.getFieldsError()),t.a.error("校验失败，请检查字段！");case 25:case"end":return e.stop()}}),e,null,[[1,20]])}))),type:"primary",style:{marginRight:24},__source:{fileName:O,lineNumber:208,columnNumber:11}},"提交"),h.a.createElement(m.a,{onClick:function(){a.current.resetFields()},__source:{fileName:O,lineNumber:240,columnNumber:11}},"重置"))))}},188:function(e,r,n){"use strict";n.r(r);n(594);var t=n(593),a=(n(588),n(592)),l=(n(152),n(79)),c=(n(302),n(226)),o=(n(150),n(49)),u=(n(589),n(591)),m=(n(585),n(586)),i=n(5),s=n.n(i),b=(n(77),n(28)),N=n(24),f=n.n(N),_=n(584),d=n.n(_),p=n(0),g=n.n(p),E=n(32),h=n(223),y=n(306),O=n(33),v=n(574),j=n.n(v),w=n(169),P="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/index.tsx";function k(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function x(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?k(Object(n),!0).forEach((function(r){s()(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}r.default=function(e){d()(e);var r=Object(O.a)(),n=Object(p.useState)(!1),i=f()(n,2),s=i[0],N=i[1],_=Object(p.useState)(null),v=f()(_,2),k=v[0],I=v[1],T=Object(p.useState)(null),S=f()(T,2),C=S[0],A=S[1],D=Object(p.useState)(null),q=f()(D,2),U=q[0],F=q[1],M=Object(p.useState)(null),R=f()(M,2),z=R[0],L=R[1],V=[{title:"店铺名称",dataIndex:"store_name"},{title:"店铺地址",dataIndex:"position_address"},{title:r["searchTable.columns.createdTime"],dataIndex:"created_time"},{title:"更新时间",dataIndex:"updated_time"},{title:r["searchTable.columns.operations"],render:function(e,n){return g.a.createElement(b.a,{onClick:function(){console.log(e,n),I(n),N(!0)},size:"small",__source:{fileName:P,lineNumber:54,columnNumber:9}},r["searchTable.columns.operations.update"])}}],G=Object(E.c)((function(e){return e.searchTable})),B=G.data,H=G.pagination,W=G.loading,J=G.formParams,K=Object(E.b)();function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=Object(h.a)({page:e,page_size:r,store_code:C,gb_code:U,game_people:z});t.then((function(e){var r=e.data,t=e.paginator;K({type:y.UPDATE_LIST,payload:{data:r}}),K({type:y.UPDATE_PAGINATION,payload:{pagination:x(x({},H),{},{current:t.page,pageSize:t.page_size,total:t.total_count})}}),K({type:y.UPDATE_LOADING,payload:{loading:!1}}),K({type:y.UPDATE_FORM_PARAMS,payload:{params:n}})}))}return Object(p.useEffect)((function(){Q()}),[]),g.a.createElement("div",{className:j.a.container,__source:{fileName:P,lineNumber:109,columnNumber:5}},g.a.createElement(m.a,{title:null===k?"添加组局":"修改组局",footer:null,onCancel:function(){N(!1)},unmountOnExit:!0,style:{width:900,minWidth:900},visible:s,__source:{fileName:P,lineNumber:110,columnNumber:7}},g.a.createElement(w.default,{clickItem:k,closeModalAndReqTable:function(){N(!1),Q()},__source:{fileName:P,lineNumber:120,columnNumber:9}})),g.a.createElement(u.a,{style:{marginBottom:20},__source:{fileName:P,lineNumber:128,columnNumber:7}},g.a.createElement(u.a.Item,{__source:{fileName:P,lineNumber:129,columnNumber:9}},"店铺运营"),g.a.createElement(u.a.Item,{__source:{fileName:P,lineNumber:130,columnNumber:9}},"店铺组局")),g.a.createElement("div",{__source:{fileName:P,lineNumber:132,columnNumber:7}},g.a.createElement(a.a,{style:{marginBottom:20},__source:{fileName:P,lineNumber:133,columnNumber:9}},g.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},__source:{fileName:P,lineNumber:134,columnNumber:11}},g.a.createElement(b.a,{onClick:function(){N(!0),I(null)},type:"primary",__source:{fileName:P,lineNumber:135,columnNumber:13}},"添加组局"),g.a.createElement("div",{__source:{fileName:P,lineNumber:145,columnNumber:13}},g.a.createElement(l.a,{style:{marginLeft:20},wrap:!0,__source:{fileName:P,lineNumber:146,columnNumber:15}},g.a.createElement(o.a,{value:C,onChange:function(e){A(e)},placeholder:"请输入店铺编码",style:{width:200},__source:{fileName:P,lineNumber:147,columnNumber:17}}),g.a.createElement(o.a,{value:U,onChange:function(e){F(e)},placeholder:"请输入剧本编码",style:{width:200},__source:{fileName:P,lineNumber:155,columnNumber:17}}),g.a.createElement(c.a,{min:1,value:z,onChange:function(e){L(e)},placeholder:"请输入玩家人数",style:{width:200},__source:{fileName:P,lineNumber:163,columnNumber:17}}),g.a.createElement(b.a,{onClick:function(){},__source:{fileName:P,lineNumber:173,columnNumber:17}},"重置"),g.a.createElement(b.a,{onClick:function(){Q()},type:"primary",__source:{fileName:P,lineNumber:174,columnNumber:17}},"搜索")))))),g.a.createElement(a.a,{bordered:!1,__source:{fileName:P,lineNumber:187,columnNumber:7}},g.a.createElement(t.a,{rowKey:"user_account",loading:W,onChange:function(e){Q(e.current,e.pageSize,J)},pagination:H,columns:V,data:B,__source:{fileName:P,lineNumber:188,columnNumber:9}})))}},306:function(e,r,n){"use strict";n.r(r),n.d(r,"UPDATE_LIST",(function(){return t})),n.d(r,"UPDATE_LOADING",(function(){return a})),n.d(r,"UPDATE_PAGINATION",(function(){return l})),n.d(r,"UPDATE_FORM_PARAMS",(function(){return c}));var t="searchTable_update_list",a="searchTable_update_loading",l="searchTable_update_pagination",c="searchTable_update_formParams"},574:function(e,r,n){e.exports={container:"container-a393421ccd",toolbar:"toolbar-a31128d7de",operations:"operations-807e4a3204"}},583:function(e,r,n){"use strict";var t=n(7),a=n.n(t),l=n(5),c=n.n(l),o=n(0),u=n.n(o),m=n(8);function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){c()(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function b(e,r){var n=Object(o.useContext)(m.a).prefixCls,t=e.spin,l=e.className,c=s(s({ref:r},e),{},{className:"".concat(l?l+" ":"").concat(n,"-icon ").concat(n,"-icon-delete")});return t&&(c.className="".concat(c.className," ").concat(n,"-icon-loading")),delete c.spin,delete c.isIcon,u.a.createElement("svg",a()({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",width:"1em",height:"1em"},c),u.a.createElement("path",{d:"M5 11h5.5m0 0v29a1 1 0 0 0 1 1h25a1 1 0 0 0 1-1V11m-27 0H16m21.5 0H43m-5.5 0H32m-16 0V7h16v4m-16 0h16M20 18v15m8-15v15"}))}var N=u.a.forwardRef(b);N.defaultProps={isIcon:!0},N.displayName="IconDelete",r.a=N},584:function(e,r){e.exports=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},e.exports.default=e.exports,e.exports.__esModule=!0}}]);