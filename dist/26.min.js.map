{"version":3,"file":"26.min.js","sources":["webpack:///./src/pages/step-form/style/index.module.less","webpack:///./src/pages/step-form/base-info.tsx","webpack:///./src/pages/step-form/style/index.module.less?caf3"],"sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/_css-loader@3.6.0@css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".container-6427058b85 {\\n  padding: 20px;\\n}\\n.wrapper-1eba4af8b8 {\\n  background-color: var(--color-bg-2);\\n  padding: 64px 0;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n}\\n.steps-79df5ed959 {\\n  margin-bottom: 36px;\\n}\\n.form-2a6f8eda19 {\\n  width: 622px;\\n}\\n.form-content-96ca552934 {\\n  padding: 8px 50px 0 30px;\\n}\\n.actions-df2cdcf708 {\\n  text-align: right;\\n  padding: 15px 0;\\n}\\n.actions-df2cdcf708 > button {\\n  margin-left: 8px;\\n}\\n.actions-df2cdcf708 > button:first-child {\\n  margin-left: 0;\\n}\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"container\": \"container-6427058b85\",\n\t\"wrapper\": \"wrapper-1eba4af8b8\",\n\t\"steps\": \"steps-79df5ed959\",\n\t\"form\": \"form-2a6f8eda19\",\n\t\"form-content\": \"form-content-96ca552934\",\n\t\"actions\": \"actions-df2cdcf708\"\n};\nmodule.exports = exports;\n","import \"@arco-design/web-react/es/Button/style\";\nimport _Button from \"@arco-design/web-react/es/Button\";\nimport \"@arco-design/web-react/es/Switch/style\";\nimport _Switch from \"@arco-design/web-react/es/Switch\";\nimport \"@arco-design/web-react/es/Select/style\";\nimport _Select from \"@arco-design/web-react/es/Select\";\nimport \"@arco-design/web-react/es/Alert/style\";\nimport _Alert from \"@arco-design/web-react/es/Alert\";\nimport \"@arco-design/web-react/es/Collapse/style\";\nimport _Collapse from \"@arco-design/web-react/es/Collapse\";\nimport \"@arco-design/web-react/es/Cascader/style\";\nimport _Cascader from \"@arco-design/web-react/es/Cascader\";\nimport \"@arco-design/web-react/es/Form/style\";\nimport _Form from \"@arco-design/web-react/es/Form\";\nimport \"@arco-design/web-react/es/Input/style\";\nimport _Input from \"@arco-design/web-react/es/Input\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/mrhh/Desktop/gbs-admin/src/pages/step-form/base-info.tsx\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport { UPDATE_FORM, GO_NEXT, UPDATE_ACTIVE_KEYS } from './redux/actionTypes';\nimport useLocale from '../../utils/useLocale';\nimport styles from './style/index.module.less';\n\nfunction BaseInfo() {\n  var locale = useLocale();\n  var state = useSelector(function (state) {\n    return state.stepForm;\n  });\n  var dispatch = useDispatch();\n  var data = state.data,\n      activeKeys = state.activeKeys;\n  var formRef = useRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      clusterOptions = _useState2[0],\n      setClusterOptions = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lineOptions = _useState4[0],\n      setLineOptions = _useState4[1];\n\n  var fetchClusterOptions = function fetchClusterOptions() {\n    axios.get(\"/api/clusterList\").then(function (res) {\n      setClusterOptions(res.data || []);\n    });\n  };\n\n  var fetchLineOptions = function fetchLineOptions(cluster) {\n    axios.get('/api/lineList', {\n      params: {\n        cluster: cluster\n      }\n    }).then(function (res) {\n      setLineOptions(res.data || []); // 默认选中第一个\n\n      if (!data.lineName && res.data.length && formRef.current) {\n        formRef.current.setFieldValue('lineName', res.data[0].value);\n      }\n    });\n  };\n\n  var onCollapseChange = function onCollapseChange(_key, activeKeys) {\n    dispatch({\n      type: UPDATE_ACTIVE_KEYS,\n      payload: {\n        activeKeys: activeKeys\n      }\n    });\n  };\n\n  var onClusterChange = function onClusterChange(value) {\n    var cluster = Array.isArray(value) && value[value.length - 1];\n\n    if (formRef.current) {\n      formRef.current.setFieldValue('lineName', undefined);\n    }\n\n    if (cluster) {\n      fetchLineOptions(cluster);\n    } else {\n      setLineOptions([]);\n    }\n  };\n\n  var onNextClick = function onNextClick() {\n    formRef.current.validate().then(function () {\n      dispatch({\n        type: GO_NEXT\n      });\n    });\n  };\n\n  useEffect(function () {\n    fetchClusterOptions();\n  }, []);\n  useEffect(function () {\n    formRef.current.setFieldsValue(data);\n    data.cluster && fetchLineOptions(data.cluster[0]);\n  }, [data]);\n  useEffect(function () {\n    return function () {\n      var _formRef$current;\n\n      var formData = ((_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.getFieldsValue()) || {};\n      dispatch({\n        type: UPDATE_FORM,\n        payload: {\n          data: formData\n        }\n      });\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(_Form, {\n    className: styles.form,\n    ref: formRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Collapse, {\n    bordered: false,\n    activeKey: activeKeys,\n    onChange: onCollapseChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Collapse.Item, {\n    name: \"baseConfig\",\n    header: locale['stepForm.collapse.title.base'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles['form-content'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    label: locale['stepForm.form.label.name'],\n    field: \"name\",\n    rules: [{\n      required: true,\n      message: locale['stepForm.form.error.name.required']\n    }, {\n      match: /^[a-zA-z0-9][-a-zA-z0-9]{0,62}(\\.[a-zA-z0-9][-a-zA-z0-9]{0,62})+$/,\n      message: locale['stepForm.form.error.name.pattern']\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: locale['stepForm.placeholder.name'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(_Form.Item, {\n    label: locale['stepForm.form.label.purpose'],\n    field: \"purpose\",\n    rules: [{\n      required: true,\n      message: locale['stepForm.form.error.purpose.required']\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: locale['stepForm.placeholder.purpose'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(_Form.Item, {\n    label: locale['stepForm.form.label.cluster'],\n    field: \"cluster\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Cascader, {\n    placeholder: locale['stepForm.placeholder.cluster'],\n    options: clusterOptions,\n    onChange: onClusterChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(_Collapse.Item, {\n    name: \"advanceConfig\",\n    header: locale['stepForm.collapse.title.highLevel'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Alert, {\n    closable: true,\n    banner: true,\n    type: \"warning\",\n    content: locale['stepForm.alert.highLevel'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles['form-content'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    label: locale['stepForm.form.label.type'],\n    field: \"type\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Select, {\n    placeholder: locale['stepForm.placeholder.type'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(_Select.Option, {\n    value: \"web\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, locale['stepForm.label.type.web']), /*#__PURE__*/React.createElement(_Select.Option, {\n    value: \"api\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, locale['stepForm.label.type.api']))), /*#__PURE__*/React.createElement(_Form.Item, {\n    label: locale['stepForm.form.label.dns'],\n    field: \"dns\",\n    triggerPropName: \"checked\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(_Form.Item, {\n    label: locale['stepForm.form.label.subDomain'],\n    field: \"subDomain\",\n    triggerPropName: \"checked\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(_Form.Item, {\n    label: locale['stepForm.form.label.lineName'],\n    field: \"lineName\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Select, {\n    placeholder: locale['stepForm.placeholder.lineName'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, lineOptions.map(function (option) {\n    return /*#__PURE__*/React.createElement(_Select.Option, {\n      value: option.value,\n      key: \"\".concat(option.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 19\n      }\n    }, option.label);\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.actions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    type: \"primary\",\n    onClick: onNextClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }, locale['stepForm.button.next'])));\n}\n\nexport default BaseInfo;","var api = require(\"!../../../../node_modules/_style-loader@1.3.0@style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--11-1!../../../../node_modules/_postcss-loader@4.3.0@postcss-loader/dist/cjs.js??ref--11-2!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--11-3!./index.module.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC7UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}