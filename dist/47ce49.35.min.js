(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{173:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));n(113);var a=n(41),r=(n(677),n(676)),l=(n(160),n(67)),c=(n(333),n(252)),o=(n(250),n(73)),u=(n(334),n(254)),i=(n(673),n(674)),m=(n(112),n(40)),s=(n(156),n(82)),b=(n(362),n(265)),_=(n(65),n(24)),p=n(56),f=n.n(p),d=(n(350),n(262)),N=n(22),g=n.n(N),v=(n(251),n(96)),h=n(35),E=n.n(h),O=n(0),y=n.n(O),x=n(111),j=n(697),S="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/storeDetail/storeDrama/index.tsx",C=JSON.parse(localStorage.getItem("AllMaP")),k=v.a.Option;function w(e){var t=e.store_code,n=e.getStoreDetail,p=e.storeDetailInfo,N=p.store_drama,h=Object(O.useState)(null),w=g()(h,2),I=w[0],P=w[1],T=Object(O.useState)(null),z=g()(T,2),V=z[0],B=z[1],D=Object(O.useState)(null),F=g()(D,2),H=F[0],J=F[1],L=Object(O.useState)(null),q=g()(L,2),A=q[0],K=q[1],M=Object(O.useState)(!1),R=g()(M,2),U=R[0],W=R[1],G=Object(O.useState)([]),Q=g()(G,2),X=Q[0],Y=Q[1],Z=Object(O.useState)(!1),$=g()(Z,2),ee=$[0],te=$[1],ne=Object(O.useState)({current:1,pageSize:10,total:1111}),ae=g()(ne,2),re=ae[0],le=ae[1],ce=Object(O.useState)(N),oe=g()(ce,2),ue=oe[0],ie=oe[1],me=Object(O.useState)({}),se=g()(me,2),be=se[0],_e=se[1],pe=Object(O.useState)([]),fe=g()(pe,2),de=fe[0],Ne=fe[1],ge=Object(O.useState)([]),ve=g()(ge,2),he=ve[0],Ee=ve[1],Oe=Object(O.useState)([]),ye=g()(Oe,2),xe=ye[0],je=ye[1],Se=Object(O.useState)([]),Ce=g()(Se,2),ke=Ce[0],we=Ce[1],Ie=Object(O.useState)(),Pe=g()(Ie,2),Te=Pe[0],ze=Pe[1],Ve=Object(O.useState)(),Be=g()(Ve,2),De=Be[0],Fe=Be[1],He=Object(O.useState)(),Je=g()(He,2),Le=Je[0],qe=Je[1],Ae=Object(O.useState)(),Ke=g()(Ae,2),Me=Ke[0],Re=Ke[1],Ue=Object(O.useState)(),We=g()(Ue,2),Ge=We[0],Qe=We[1],Xe=Object(O.useState)(),Ye=g()(Xe,2),Ze=Ye[0],$e=Ye[1];Object(O.useEffect)((function(){var e=Object(j.a)("app_gb_type"),t=new Object;e.forEach((function(e){t[e.label_value]=e.label_zh})),_e(t)}),[]),Object(O.useEffect)((function(){JSON.parse(localStorage.getItem("dicts")).forEach((function(e){"app_gb_type"===e.dict_code&&Ne(e.dict_label),"app_gb_text_tag"===e.dict_code&&je(e.dict_label),"app_gb_status"===e.dict_code&&Ee(e.dict_label),"app_gb_status"===e.dict_code&&Ee(e.dict_label),"app_gb_level"===e.dict_code&&we(e.dict_label)}))}),[]),Object(O.useEffect)((function(){var e=p.store_drama;ie(e)}),[p]);var et=Object(O.useState)([]),tt=g()(et,2),nt=tt[0],at=tt[1];Object(O.useEffect)((function(){var e=p.store_drama.reduce((function(e,t){return e.push(t.gb_code),e}),[]);at(e)}),[n]),Object(O.useEffect)((function(){ct()}),[]);var rt=[{title:"剧本标题",dataIndex:"gb_title"},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return y.a.createElement("span",{__source:{fileName:S,lineNumber:114,columnNumber:16}},be[e])}},{title:"工作日价格",dataIndex:"gb_price"},{title:"周末价格",dataIndex:"gb_price2"},{title:"是否启用",dataIndex:"is_enable",render:function(e){return 1===parseInt(e)?y.a.createElement(d.a,{status:"success",text:"启用中",__source:{fileName:S,lineNumber:130,columnNumber:18}}):0===parseInt(e)?y.a.createElement(d.a,{status:"error",text:"未启用",__source:{fileName:S,lineNumber:133,columnNumber:18}}):void 0}},{title:"剧本标签",dataIndex:"gb_custom_tag"},{title:"是否新本",dataIndex:"is_new",render:function(e){return 1===parseInt(e)?"是":"否"}},{title:"是否热门",dataIndex:"is_hot",render:function(e){return 1===parseInt(e)?"是":"否"}},{title:"剧本难度",dataIndex:"gb_level",render:function(e){return C.app_gb_level[e]}},{title:"剧本时长",dataIndex:"gb_hour",render:function(e){return e+"小时"}},{title:"玩家人数",dataIndex:"gb_people"},{title:"上架时间",dataIndex:"gb_add_time"},{title:"操作",render:function(e,n){return y.a.createElement(_.a,{disabled:nt.includes(n.gb_code),onClick:f()(E.a.mark((function e(){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new Object).store_code=t.store_code,a.drama_array=[{gb_code:n.gb_code,gb_price:I||n.gb_price,gb_price2:V||n.gb_price2}],P(n.gb_price),B(n.gb_price2),console.log("item",n),J(n),W(!0),K(a);case 9:case"end":return e.stop()}}),e)}))),size:"mini",type:"primary",__source:{fileName:S,lineNumber:189,columnNumber:11}},"添加")}}],lt=[{title:"剧本标题",dataIndex:"gb_title"},{title:"工作日价格",dataIndex:"gb_price"},{title:"周末价格",dataIndex:"gb_price2"},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return y.a.createElement("span",{__source:{fileName:S,lineNumber:243,columnNumber:16}},be[e])}},{title:"剧本标签",dataIndex:"gb_text_tag",render:function(e){var t=e.split(",");return y.a.createElement(s.a,{__source:{fileName:S,lineNumber:252,columnNumber:11}},t.map((function(e){return y.a.createElement(b.a,{__source:{fileName:S,lineNumber:254,columnNumber:22}},C.app_gb_text_tag[e])})))}},{title:"操作",render:function(e,a){return y.a.createElement(i.a,{title:"确定删除该剧本",onOk:f()(E.a.mark((function e(){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),r={store_code:t.store_code,gb_code:a.gb_code},e.next=4,Object(x.I)(r);case 4:200===e.sent.code&&(n(),m.a.success("删除成功"));case 6:case"end":return e.stop()}}),e)}))),__source:{fileName:S,lineNumber:264,columnNumber:11}},y.a.createElement(_.a,{size:"mini",status:"danger",__source:{fileName:S,lineNumber:279,columnNumber:13}},"删除"))}}];function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.log("params: ",n);var a=Object(x.q)({page:e,page_size:t,gb_title:Te,gb_people:De,gb_type:Le,gb_status:Ze,gb_text_tag:Me,gb_level:Ge});te(!0),a.then((function(e){te(!1);var t=e.data,n=e.paginator;le({current:n.page,pageSize:n.page_size,total:n.total_count}),Y(t)}))}return y.a.createElement("div",{__source:{fileName:S,lineNumber:318,columnNumber:5}},y.a.createElement(c.a,{title:null==H?void 0:H.gb_title,visible:U,onOk:f()(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A.drama_array[0].gb_price=I,A.drama_array[0].gb_price2=V,e.next=4,Object(x.N)(A);case 4:t=e.sent,console.log("res: ",t),200===t.code&&(n(),m.a.success("添加成功"),W(!1));case 7:case"end":return e.stop()}}),e)}))),unmountOnExit:!0,onCancel:function(){return W(!1)},autoFocus:!1,focusLock:!0,__source:{fileName:S,lineNumber:319,columnNumber:7}},y.a.createElement(o.a,{__source:{fileName:S,lineNumber:338,columnNumber:9}},y.a.createElement(o.a.Item,{label:"工作日价格",__source:{fileName:S,lineNumber:339,columnNumber:11}},y.a.createElement(u.a,{value:I,placeholder:"工作日价格",onChange:function(e){P(e)},__source:{fileName:S,lineNumber:340,columnNumber:13}})),y.a.createElement(o.a.Item,{label:"周末价格",__source:{fileName:S,lineNumber:348,columnNumber:11}},y.a.createElement(u.a,{style:{marginTop:10},value:V,placeholder:"周末价格",onChange:function(e){B(e)},__source:{fileName:S,lineNumber:349,columnNumber:13}})))),y.a.createElement("div",{__source:{fileName:S,lineNumber:360,columnNumber:7}},y.a.createElement(l.a.Title,{heading:4,__source:{fileName:S,lineNumber:361,columnNumber:9}},"已添加的剧本"),y.a.createElement(r.a,{size:"small",columns:lt,data:ue,__source:{fileName:S,lineNumber:362,columnNumber:9}})),y.a.createElement("div",{__source:{fileName:S,lineNumber:364,columnNumber:7}},y.a.createElement(l.a.Title,{heading:4,__source:{fileName:S,lineNumber:365,columnNumber:9}},"剧本库"),y.a.createElement("div",{style:{width:"100%",marginBottom:10,display:"flex",justifyContent:"flex-ends"},__source:{fileName:S,lineNumber:366,columnNumber:9}},y.a.createElement(s.a,{style:{flex:1},wrap:!0,__source:{fileName:S,lineNumber:369,columnNumber:11}},y.a.createElement(a.a,{value:Te,onChange:function(e){ze(e)},placeholder:"请输入剧本标题",style:{width:200},__source:{fileName:S,lineNumber:370,columnNumber:13}}),y.a.createElement(a.a,{onChange:function(e){Fe(e)},value:De,placeholder:"玩家人数",style:{width:200},__source:{fileName:S,lineNumber:378,columnNumber:13}}),y.a.createElement(v.a,{onChange:function(e){qe(e)},value:Le,placeholder:"剧本类型",style:{width:200},__source:{fileName:S,lineNumber:386,columnNumber:13}},de.map((function(e){return y.a.createElement(k,{key:e.label_value,value:e.label_value,__source:{fileName:S,lineNumber:396,columnNumber:19}},e.label_zh)}))),y.a.createElement(v.a,{onChange:function(e){Qe(e)},value:Ge,placeholder:"剧本难度",style:{width:200},__source:{fileName:S,lineNumber:402,columnNumber:13}},ke.map((function(e){return y.a.createElement(k,{key:e.label_value,value:e.label_value,__source:{fileName:S,lineNumber:412,columnNumber:19}},e.label_zh)}))),y.a.createElement(v.a,{onChange:function(e){Re(e)},value:Me,placeholder:"剧本标签",style:{width:200},__source:{fileName:S,lineNumber:418,columnNumber:13}},xe.map((function(e){return y.a.createElement(k,{key:e.label_value,value:e.label_value,__source:{fileName:S,lineNumber:428,columnNumber:19}},e.label_zh)}))),y.a.createElement(v.a,{onChange:function(e){$e(e)},value:Ze,placeholder:"剧本状态",style:{width:200},__source:{fileName:S,lineNumber:434,columnNumber:13}},he.map((function(e){return y.a.createElement(k,{key:e.label_value,value:e.label_value,__source:{fileName:S,lineNumber:444,columnNumber:19}},e.label_zh)}))),y.a.createElement(_.a,{onClick:function(){ze(null),qe(null),Re(null),Fe(null),$e(null),Qe(null)},__source:{fileName:S,lineNumber:450,columnNumber:13}},"重置"),y.a.createElement(_.a,{onClick:function(){ct()},type:"primary",__source:{fileName:S,lineNumber:462,columnNumber:13}},"搜索"))),y.a.createElement(r.a,{loading:ee,onChange:function(e){var t=e.current,n=e.pageSize;le(e),ct(t,n)},rowKey:"store_id",size:"mini",pagination:re,data:X,columns:rt,__source:{fileName:S,lineNumber:472,columnNumber:9}})))}},673:function(e,t,n){"use strict";n(17),n(65),n(115),n(336),n(685)},674:function(e,t,n){"use strict";var a=n(0),r=n.n(a),l=n(117),c=n(33),o=n(24),u=n(42),i=n(3),m=n(16),s=n(10),b=function(){return(b=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},_=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,l=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(a=l.next()).done;)c.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return c},f={position:"top",okType:"primary",icon:r.a.createElement(u.a,null),blurToHide:!0,unmountOnExit:!0,trigger:"click",escToClose:!0};var d=Object(a.forwardRef)((function(e,t){var n,u=Object(a.useContext)(i.a),d=u.getPrefixCls,N=u.locale,g=u.componentConfig,v=Object(s.a)(e,f,null==g?void 0:g.Popconfirm),h=v.style,E=v.className,O=v.children,y=v.position,x=v.getPopupContainer,j=v.blurToHide,S=v.unmountOnExit,C=v.trigger,k=v.escToClose,w=v.onVisibleChange,I=v.triggerProps,P=v.title,T=v.icon,z=v.okText,V=v.cancelText,B=v.okType,D=v.okButtonProps,F=v.cancelButtonProps,H=v.autoFocus,J=v.focusLock,L=_(v,["style","className","children","position","getPopupContainer","blurToHide","unmountOnExit","trigger","escToClose","onVisibleChange","triggerProps","title","icon","okText","cancelText","okType","okButtonProps","cancelButtonProps","autoFocus","focusLock"]),q=p(Object(m.a)(!1,{defaultValue:v.defaultPopupVisible,value:v.popupVisible}),2),A=q[0],K=q[1],M=p(Object(a.useState)(!1),2),R=M[0],U=M[1],W=d("popconfirm"),G=function(e){"popupVisible"in v||K(e),I&&I.onVisibleChange&&I.onVisibleChange(e),w&&w(e)},Q=function(){G(!1)},X=function(){Q(),v.onCancel&&v.onCancel()},Y=function(){var e,t=v.onOk||v.onConfirm;t&&(e=t()),e&&e.then&&(U(!0),e.then((function(){Q()}),(function(e){U(!1),console.error(e)}))),e||Q()};return Object(a.useEffect)((function(){return!A&&R&&U(!1),function(){U(!1)}}),[A]),r.a.createElement(c.a,b({},L,{ref:t,style:b({maxWidth:350},h),className:E,prefixCls:W,getPopupContainer:x,position:y,trigger:C,escToClose:k,popupVisible:A,content:(n=r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,b({onClick:X,size:"mini"},F),V||N.Popconfirm.cancelText),r.a.createElement(o.a,b({loading:R,onClick:Y,size:"mini",type:B},D),z||N.Popconfirm.okText)),r.a.createElement("div",{className:W+"-wrapper"},r.a.createElement("div",{className:W+"-title"},T&&r.a.createElement("span",{className:W+"-title-icon"},T),r.a.createElement("div",{className:W+"-title-text"},P)),r.a.createElement("div",{className:W+"-btn"},J?r.a.createElement(l.a,{disabled:!A,autoFocus:!!H},n):n))),unmountOnExit:S,blurToHide:j,popupHoverStay:!0,triggerProps:I,onVisibleChange:G,childrenPrefix:W}),"string"==typeof O?r.a.createElement("span",null,O):O)}));d.displayName="Popconfirm",t.a=d},685:function(e,t,n){},697:function(e,t,n){"use strict";function a(e){var t=JSON.parse(localStorage.getItem("dicts")),n=null;return t.forEach((function(t){t.dict_code===e&&(n=t.dict_label)})),n}n.d(t,"a",(function(){return a}))}}]);