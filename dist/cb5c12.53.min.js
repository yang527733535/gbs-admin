(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{166:function(e,r,l){"use strict";l.r(r);l(155);var a=l(74),m=(l(156),l(82)),n=(l(65),l(24)),u=(l(112),l(40)),t=l(56),c=l.n(t),o=(l(699),l(700)),i=(l(336),l(255)),s=(l(254),l(96)),N=(l(113),l(41)),b=l(22),_=l.n(b),d=(l(256),l(157)),f=(l(253),l(73)),p=l(35),E=l.n(p),g=l(0),x=l.n(g),v=l(111),h=l(684),w="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/DramaDetail/roleDetail/AddRoleDetailForm/index.tsx",k=f.a.Item,y=d.a.Row,D=d.a.Col;r.default=function(e){var r=e.clickItem,l=e.modalType,t=e.getInitFormData,b=e.saveEditItem,d=e.closeModal,p=e.role_array,I=Object(g.useRef)(),O=Object(g.useState)(""),q=_()(O,2),F=q[0],R=q[1];return Object(g.useEffect)((function(){"edit"===l&&(R(b.role_cover),I.current.setFieldsValue(b))}),[]),x.a.createElement(a.a,{style:{width:"100%"},__source:{fileName:w,lineNumber:44,columnNumber:5}},x.a.createElement("div",{__source:{fileName:w,lineNumber:45,columnNumber:7}},x.a.createElement(f.a,{ref:I,onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:w,lineNumber:46,columnNumber:9}},x.a.createElement(y,{className:"grid-demo",style:{marginBottom:10},__source:{fileName:w,lineNumber:47,columnNumber:11}},x.a.createElement(D,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,__source:{fileName:w,lineNumber:48,columnNumber:13}},x.a.createElement("div",{__source:{fileName:w,lineNumber:49,columnNumber:15}},x.a.createElement(k,{label:"角色名称",field:"role_name",rules:[{required:!0,message:"请填写角色名称"}],__source:{fileName:w,lineNumber:50,columnNumber:17}},x.a.createElement(N.a,{placeholder:"请填写角色名称...",__source:{fileName:w,lineNumber:55,columnNumber:19}})))),x.a.createElement(D,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,__source:{fileName:w,lineNumber:59,columnNumber:13}},x.a.createElement("div",{__source:{fileName:w,lineNumber:60,columnNumber:15}},x.a.createElement(k,{label:"角色简介",field:"role_brief",rules:[{required:!0,message:"请填写角色简介"}],__source:{fileName:w,lineNumber:61,columnNumber:17}},x.a.createElement(N.a,{placeholder:"请填写角色简介...",__source:{fileName:w,lineNumber:66,columnNumber:19}}))))),x.a.createElement(y,{__source:{fileName:w,lineNumber:71,columnNumber:11}},x.a.createElement(D,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,__source:{fileName:w,lineNumber:72,columnNumber:13}},x.a.createElement("div",{__source:{fileName:w,lineNumber:73,columnNumber:15}},x.a.createElement(k,{label:"是否凶手",field:"is_murderer",rules:[{required:!1,message:"请选择是否凶手"}],__source:{fileName:w,lineNumber:74,columnNumber:17}},x.a.createElement(s.a,{placeholder:"请选择是否凶手",__source:{fileName:w,lineNumber:79,columnNumber:19}},x.a.createElement(s.a.Option,{value:"1",__source:{fileName:w,lineNumber:80,columnNumber:21}},"是"),x.a.createElement(s.a.Option,{value:"0",__source:{fileName:w,lineNumber:81,columnNumber:21}},"否"))))),x.a.createElement(D,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,__source:{fileName:w,lineNumber:86,columnNumber:13}},x.a.createElement("div",{__source:{fileName:w,lineNumber:87,columnNumber:15}},x.a.createElement(k,{label:"角色备注",field:"role_remarks",rules:[{required:!1,message:"请填写角色备注"}],__source:{fileName:w,lineNumber:88,columnNumber:17}},x.a.createElement(N.a,{placeholder:"请填写角色备注...",__source:{fileName:w,lineNumber:93,columnNumber:19}}))))),x.a.createElement(y,{__source:{fileName:w,lineNumber:98,columnNumber:11}},x.a.createElement(D,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,__source:{fileName:w,lineNumber:99,columnNumber:13}},x.a.createElement(f.a.Item,{rules:[{required:!0,message:"请上传角色封面"}],label:"角色封面",field:"role_cover",triggerPropName:"fileList",__source:{fileName:w,lineNumber:100,columnNumber:15}},x.a.createElement(o.a,{limit:1,renderUploadList:function(){return null},name:"role_cover",customRequest:function(e){var r=e.onProgress,l=e.onError,a=e.onSuccess,m=e.file,n=new XMLHttpRequest;n.upload&&(n.upload.onprogress=function(e){var l;e.total>0&&(l=e.loaded/e.total*100),r(parseInt(l,10),e)}),n.onerror=function(e){l(e)},n.onload=function(){n.status<200||n.status;var e=JSON.parse(n.responseText);R(e.data.file_url),a(e)};var u=new FormData;u.append("up_file",m),u.append("module","drama"),n.open("post","".concat(h.a,"/system/upload/image"),!0),n.setRequestHeader("Authorization",localStorage.getItem("token")),n.send(u)},onPreview:function(e){i.a.info({title:"Preview",content:x.a.createElement("img",{src:e.url||URL.createObjectURL(e.originFile),style:{maxWidth:"100%"},__source:{fileName:w,lineNumber:144,columnNumber:25}})})},__source:{fileName:w,lineNumber:106,columnNumber:17}})))),""===F?null:x.a.createElement(y,{__source:{fileName:w,lineNumber:156,columnNumber:13}},x.a.createElement(f.a.Item,{label:"封面图片",__source:{fileName:w,lineNumber:157,columnNumber:15}},x.a.createElement("img",{style:{width:212,height:300},src:F,alt:"",__source:{fileName:w,lineNumber:158,columnNumber:17}}))),x.a.createElement(y,{__source:{fileName:w,lineNumber:163,columnNumber:11}},x.a.createElement(D,{style:{display:"flex",alignItems:"center",justifyContent:"center"},__source:{fileName:w,lineNumber:164,columnNumber:13}},x.a.createElement("div",{__source:{fileName:w,lineNumber:165,columnNumber:15}},x.a.createElement(k,{__source:{fileName:w,lineNumber:166,columnNumber:17}},x.a.createElement(m.a,{__source:{fileName:w,lineNumber:167,columnNumber:19}},x.a.createElement(n.a,{onClick:c()(E.a.mark((function e(){var a,m,n,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.current){e.next=30;break}return e.prev=1,e.next=4,I.current.validate();case 4:if((a=I.current.getFields()).role_cover=F,console.log("param",a),m=p.map((function(e){return e.role_code===a.role_code?a:e})),"add"!==l){e.next=17;break}return p.push(a),(n={}).role_array=p,n.gb_code=r.gb_code,e.next=15,Object(v.D)(n);case 15:200===e.sent.code&&(u.a.success("添加成功"),t(),d());case 17:if("edit"!==l){e.next=25;break}return(c={}).role_array=m,c.gb_code=r.gb_code,e.next=23,Object(v.D)(c);case 23:200===e.sent.code&&(u.a.success("修改成功"),t(),d());case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(1),u.a.error("校验失败，请检查字段！");case 30:case"end":return e.stop()}}),e,null,[[1,27]])}))),type:"primary",__source:{fileName:w,lineNumber:168,columnNumber:21}},"提交"),x.a.createElement(n.a,{onClick:function(){I.current.resetFields()},__source:{fileName:w,lineNumber:218,columnNumber:21}},"重置")))))))))}},684:function(e,r,l){"use strict";l.d(r,"a",(function(){return a}));var a="http://dev-service.mengmohmg.com"}}]);