(window.webpackJsonp=window.webpackJsonp||[]).push([[13,36,62,92],{167:function(e,r,l){"use strict";l.r(r),l.d(r,"default",(function(){return O}));var a=l(5),n=l.n(a),t=(l(149),l(52)),u=l(78),m=l.n(u),c=(l(150),l(79)),o=(l(77),l(30)),i=l(597),s=(l(225),l(89)),b=(l(148),l(51)),N=(l(306),l(104)),_=(l(228),l(154)),f=l(53),d=l.n(f),p=l(0),E=l.n(p),g=(l(32),l(224)),v="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/addRoleForm/index.jsx",x=_.a.Row,h=(_.a.Col,N.a.Item),y={labelCol:{span:4},wrapperCol:{span:17}};function O(e){var r=e.clickItem,l=e.closeModalAndRequest,a=(e.dmlist,Object(p.useRef)());return E.a.createElement("div",{__source:{fileName:v,lineNumber:29,columnNumber:5}},E.a.createElement(N.a,n()({layout:"vertical",ref:a},y,{__source:{fileName:v,lineNumber:30,columnNumber:7}}),E.a.createElement(N.a.List,{field:"role_array",__source:{fileName:v,lineNumber:31,columnNumber:9}},(function(e,r){var l=r.add,a=r.remove;r.move;return E.a.createElement("div",{__source:{fileName:v,lineNumber:34,columnNumber:15}},e.map((function(e,r){return E.a.createElement("div",{key:e.key,__source:{fileName:v,lineNumber:37,columnNumber:21}},E.a.createElement(N.a.Item,{label:"角色".concat(r+1),__source:{fileName:v,lineNumber:38,columnNumber:23}},E.a.createElement(c.a,{__source:{fileName:v,lineNumber:39,columnNumber:25}},E.a.createElement(x,{__source:{fileName:v,lineNumber:40,columnNumber:27}},E.a.createElement(N.a.Item,{label:"角色名称",field:"".concat(e.field,".role_name"),rules:[{required:!0}],noStyle:!0,__source:{fileName:v,lineNumber:41,columnNumber:29}},E.a.createElement(b.a,{placeholder:"角色名称",__source:{fileName:v,lineNumber:47,columnNumber:31}}))),E.a.createElement(N.a.Item,{label:"角色简介",field:"".concat(e.field,".role_brief"),rules:[{required:!0}],noStyle:!0,__source:{fileName:v,lineNumber:51,columnNumber:27}},E.a.createElement(b.a,{placeholder:"角色简介",__source:{fileName:v,lineNumber:57,columnNumber:29}})),E.a.createElement(N.a.Item,{label:"角色备注",field:"".concat(e.field,".role_remarks"),rules:[{required:!0}],noStyle:!0,__source:{fileName:v,lineNumber:59,columnNumber:27}},E.a.createElement(b.a,{placeholder:"角色备注",__source:{fileName:v,lineNumber:65,columnNumber:29}})),E.a.createElement(N.a.Item,{label:"是否凶手",field:"".concat(e.field,".is_murderer"),rules:[{required:!0}],noStyle:!0,__source:{fileName:v,lineNumber:67,columnNumber:27}},E.a.createElement(s.a,{placeholder:"是否凶手",__source:{fileName:v,lineNumber:73,columnNumber:29}},E.a.createElement(s.a.Option,{value:!0,__source:{fileName:v,lineNumber:74,columnNumber:31}},"是"),E.a.createElement(s.a.Option,{value:!1,__source:{fileName:v,lineNumber:75,columnNumber:31}},"否"))),E.a.createElement(N.a.Item,{label:"角色封面",field:"".concat(e.field,".role_cover"),rules:[{required:!0}],noStyle:!0,__source:{fileName:v,lineNumber:78,columnNumber:27}},E.a.createElement(b.a,{placeholder:"角色封面",__source:{fileName:v,lineNumber:92,columnNumber:29}})),E.a.createElement(o.a,{icon:E.a.createElement(i.a,{__source:{fileName:v,lineNumber:112,columnNumber:35}}),shape:"circle",status:"danger",onClick:function(){return a(r)},__source:{fileName:v,lineNumber:111,columnNumber:27}}))))})),E.a.createElement(N.a.Item,{wrapperCol:{offset:4},__source:{fileName:v,lineNumber:122,columnNumber:17}},E.a.createElement(o.a,{onClick:function(){l()},__source:{fileName:v,lineNumber:123,columnNumber:19}},"添加角色")))})),E.a.createElement(h,{wrapperCol:{offset:4},__source:{fileName:v,lineNumber:135,columnNumber:9}},E.a.createElement(o.a,{onClick:m()(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.current){e.next=16;break}return e.prev=1,e.next=4,a.current.validate();case 4:return e.next=6,a.current.validate();case 6:return(n=e.sent).gb_code=r.gb_code,e.next=10,Object(g.q)(n);case 10:200===e.sent.code&&(t.a.info("提交成功！"),l()),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])}))),type:"primary",style:{marginRight:24},__source:{fileName:v,lineNumber:136,columnNumber:11}},"提交"),E.a.createElement(o.a,{onClick:function(){a.current.resetFields()},__source:{fileName:v,lineNumber:159,columnNumber:11}},"重置"))))}},168:function(e,r,l){"use strict";l.r(r),l.d(r,"default",(function(){return v}));var a=l(5),n=l.n(a),t=(l(77),l(30)),u=(l(149),l(52)),m=l(78),c=l.n(m),o=(l(225),l(89)),i=(l(306),l(104)),s=l(53),b=l.n(s),N=l(0),_=l.n(N),f=l(224),d="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/dmform/index.jsx",p=i.a.Item,E={labelCol:{span:7},wrapperCol:{span:17}},g={wrapperCol:{span:17,offset:7}};function v(e){var r=e.clickItem,l=e.closeModalAndRequest,a=e.dmlist,m=Object(N.useRef)();return _.a.createElement("div",{__source:{fileName:d,lineNumber:42,columnNumber:5}},_.a.createElement(i.a,n()({ref:m},E,{__source:{fileName:d,lineNumber:43,columnNumber:7}}),_.a.createElement(p,{label:"选择DM",required:!0,field:"dm_array",rules:[{required:!0,minLength:1,message:"choice is required"}],__source:{fileName:d,lineNumber:44,columnNumber:9}},_.a.createElement(o.a,{mode:"multiple",allowCreate:!0,placeholder:"请选择dm",__source:{fileName:d,lineNumber:56,columnNumber:11}},null==a?void 0:a.map((function(e){return _.a.createElement(o.a.Option,{key:e.user_account,value:e.user_account,__source:{fileName:d,lineNumber:59,columnNumber:17}},e.user_nick)})))),_.a.createElement(p,n()({},g,{__source:{fileName:d,lineNumber:66,columnNumber:9}}),_.a.createElement(t.a,{onClick:c()(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.current){e.next=21;break}return e.prev=1,e.next=4,m.current.validate();case 4:return e.next=6,m.current.validate();case 6:return(a=e.sent).gb_code=r.gb_code,a.dm_array=a.dm_array.map((function(e){return{user_account:e}})),e.next=11,Object(f.p)(a);case 11:e.sent.code,u.a.info("提交成功！"),l(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(m.current.getFieldsError()),u.a.error("校验失败，请检查字段！");case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),type:"primary",style:{marginRight:24},__source:{fileName:d,lineNumber:67,columnNumber:11}},"提交"),_.a.createElement(t.a,{onClick:function(){m.current.resetFields()},__source:{fileName:d,lineNumber:93,columnNumber:11}},"重置"))))}},169:function(e,r,l){"use strict";l.r(r);l(153);var a=l(69),n=(l(150),l(79)),t=(l(77),l(30)),u=(l(149),l(52)),m=(l(621),l(622)),c=(l(595),l(596)),o=(l(619),l(618)),i=(l(624),l(626)),s=(l(307),l(227)),b=(l(225),l(89)),N=(l(148),l(51)),_=l(4),f=l.n(_),d=l(78),p=l.n(d),E=l(24),g=l.n(E),v=(l(228),l(154)),x=(l(306),l(104)),h=l(53),y=l.n(h),O=l(0),w=l.n(O),k=l(32),j=l(224),I="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/form/index.tsx";function C(e,r){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),l.push.apply(l,a)}return l}function q(e){for(var r=1;r<arguments.length;r++){var l=null!=arguments[r]?arguments[r]:{};r%2?C(Object(l),!0).forEach((function(r){f()(e,r,l[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):C(Object(l)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(l,r))}))}return e}var P=x.a.Item,S=v.a.Row,A=v.a.Col;r.default=function(e){var r=e.modalType,l=void 0===r?"add":r,_=e.closeModalAndRequest,f=Object(O.useRef)(),d=Object(O.useState)(!1),E=g()(d,2),v=E[0],h=E[1],C=Object(O.useState)([]),T=g()(C,2),D=T[0],R=T[1],U=Object(O.useState)([]),z=g()(U,2),F=z[0],M=z[1],L=Object(O.useState)([]),G=g()(L,2),B=G[0],H=G[1],J=Object(O.useState)([]),V=g()(J,2),W=V[0],K=V[1],X=Object(k.c)((function(e){return e.myState})),Q=X.labelData,Y=X.clickItem;Object(O.useEffect)((function(){"edit"===l&&Z()}),[]);var Z=function(){var e=p()(y.a.mark((function e(){var r,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,Object(j.i)({gb_code:Y.gb_code});case 3:r=e.sent,l=r.data,h(!1),f.current.setFieldsValue(q(q({},l),{},{gb_cover:[{uid:"1",url:l.gb_cover,name:"20200717"}]}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.useEffect)((function(){for(var e=0;e<Q.length;e++){var r=Q[e];"app_gb_type"===r.dict_code&&R(r.dict_label),"app_gb_level"===r.dict_code&&M(r.dict_label),"app_gb_text_tag"===r.dict_code&&H(r.dict_label),"app_gb_status"===r.dict_code&&K(r.dict_label)}}),[]),w.a.createElement(a.a,{style:{width:"100%"},loading:v,__source:{fileName:I,lineNumber:86,columnNumber:5}},w.a.createElement("div",{__source:{fileName:I,lineNumber:87,columnNumber:7}},w.a.createElement(x.a,{ref:f,onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:I,lineNumber:88,columnNumber:9}},w.a.createElement(S,{className:"grid-demo",style:{marginBottom:10},__source:{fileName:I,lineNumber:89,columnNumber:11}},w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:90,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:91,columnNumber:15}},w.a.createElement(P,{label:"剧本名称",field:"gb_title",rules:[{required:!0,message:"请填写剧本名称"}],__source:{fileName:I,lineNumber:92,columnNumber:17}},w.a.createElement(N.a,{placeholder:"请填写剧本名称...",__source:{fileName:I,lineNumber:97,columnNumber:19}})))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:101,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:102,columnNumber:15}},w.a.createElement(P,{label:"剧本类型",field:"gb_type",rules:[{required:!0,message:"请填写剧本类型"}],__source:{fileName:I,lineNumber:103,columnNumber:17}},w.a.createElement(b.a,{placeholder:"请选择剧本类型",__source:{fileName:I,lineNumber:108,columnNumber:19}},null==D?void 0:D.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:I,lineNumber:111,columnNumber:25}},e.label_zh)})))))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:120,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:121,columnNumber:15}}," ",w.a.createElement(P,{label:"剧本难度",field:"gb_level",rules:[{required:!0,message:"请选中剧本难度"}],__source:{fileName:I,lineNumber:123,columnNumber:17}},w.a.createElement(b.a,{placeholder:"请选择剧本难度",__source:{fileName:I,lineNumber:128,columnNumber:19}},null==F?void 0:F.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:I,lineNumber:131,columnNumber:25}},e.label_zh)}))))))),w.a.createElement(S,{__source:{fileName:I,lineNumber:141,columnNumber:11}},w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:142,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:143,columnNumber:15}},w.a.createElement(P,{label:"玩家人数",field:"gb_people",rules:[{required:!0,message:"请填写玩家说明"}],__source:{fileName:I,lineNumber:144,columnNumber:17}},w.a.createElement(s.a,{placeholder:"请填写玩家说明...",__source:{fileName:I,lineNumber:149,columnNumber:19}})))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:153,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:154,columnNumber:15}}," ",w.a.createElement(P,{label:"剧本状态",field:"gb_status",rules:[{required:!1,message:"请选择剧本状态"}],__source:{fileName:I,lineNumber:156,columnNumber:17}},w.a.createElement(b.a,{placeholder:"请选择剧本状态",__source:{fileName:I,lineNumber:161,columnNumber:19}},null==W?void 0:W.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:I,lineNumber:164,columnNumber:25}},e.label_zh)})))))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:173,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:174,columnNumber:15}},w.a.createElement(P,{label:"玩家说明",field:"gb_people_note",rules:[{required:!0,message:"请填写玩家说明"}],__source:{fileName:I,lineNumber:175,columnNumber:17}},w.a.createElement(N.a,{placeholder:"请填写玩家说明...",__source:{fileName:I,lineNumber:180,columnNumber:19}}))))),w.a.createElement(S,{__source:{fileName:I,lineNumber:185,columnNumber:11}},w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:186,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:187,columnNumber:15}},w.a.createElement(P,{label:"剧本标签",field:"gb_text_tag_arr",rules:[{required:!0,message:"请选择剧本标签"}],__source:{fileName:I,lineNumber:188,columnNumber:17}},w.a.createElement(b.a,{mode:"multiple",allowClear:!0,placeholder:"请选择剧本标签",__source:{fileName:I,lineNumber:193,columnNumber:19}},B.map((function(e){return w.a.createElement(b.a.Option,{key:e.label_value,value:e.label_value,__source:{fileName:I,lineNumber:196,columnNumber:25}},e.label_zh)})))))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:205,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:206,columnNumber:15}},w.a.createElement(P,{label:"剧本时长/小时",field:"gb_hour",rules:[{type:"number",required:!0}],__source:{fileName:I,lineNumber:207,columnNumber:17}},w.a.createElement(s.a,{min:1,placeholder:"请输入参考价格",__source:{fileName:I,lineNumber:212,columnNumber:19}})))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:216,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:217,columnNumber:15}},w.a.createElement(P,{label:"工作日价格",field:"gb_price",rules:[{type:"number",required:!0}],__source:{fileName:I,lineNumber:218,columnNumber:17}},w.a.createElement(s.a,{min:1,placeholder:"请输入工作日价格",__source:{fileName:I,lineNumber:223,columnNumber:19}}))))),w.a.createElement(S,{__source:{fileName:I,lineNumber:228,columnNumber:11}},w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:229,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:230,columnNumber:15}},w.a.createElement(P,{label:"周末价格",field:"gb_price2",rules:[{type:"number",required:!0}],__source:{fileName:I,lineNumber:231,columnNumber:17}},w.a.createElement(s.a,{min:1,placeholder:"请输入工作日价格",__source:{fileName:I,lineNumber:236,columnNumber:19}})))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:240,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:241,columnNumber:15}},w.a.createElement(P,{label:"推荐星级",field:"gb_star_lev",rules:[{required:!0,type:"number"}],__source:{fileName:I,lineNumber:242,columnNumber:17}},w.a.createElement(i.a,{allowHalf:!0,__source:{fileName:I,lineNumber:252,columnNumber:19}})))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:256,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:257,columnNumber:15}},w.a.createElement(P,{label:"上架时间",field:"gb_add_time",rules:[{required:!1,message:"gb_add_time is required"}],__source:{fileName:I,lineNumber:258,columnNumber:17}},w.a.createElement(o.a,{showTime:!0,__source:{fileName:I,lineNumber:268,columnNumber:19}}))))),w.a.createElement(S,{__source:{fileName:I,lineNumber:273,columnNumber:11}},w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:274,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:275,columnNumber:15}},w.a.createElement(P,{label:"剧本概要",field:"gb_text_brief",rules:[{required:!0,message:"请填写剧本概要"}],__source:{fileName:I,lineNumber:276,columnNumber:17}},w.a.createElement(N.a.TextArea,{rows:5,placeholder:"请填写剧本概要...",__source:{fileName:I,lineNumber:281,columnNumber:19}})))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:285,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:286,columnNumber:15}},w.a.createElement(P,{label:"剧本描述",field:"gb_text_content",rules:[{required:!1,message:"请填写剧本描述"}],__source:{fileName:I,lineNumber:287,columnNumber:17}},w.a.createElement(N.a.TextArea,{rows:5,placeholder:"请填写剧本描述...",__source:{fileName:I,lineNumber:292,columnNumber:19}})))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:296,columnNumber:13}},w.a.createElement(P,{label:"版权信息",field:"gb_producer",rules:[{required:!0,message:"请填写版权信息"}],__source:{fileName:I,lineNumber:297,columnNumber:15}},w.a.createElement(N.a.TextArea,{rows:5,placeholder:"请填写版权信息...",__source:{fileName:I,lineNumber:302,columnNumber:17}})))),w.a.createElement(S,{__source:{fileName:I,lineNumber:306,columnNumber:11}},w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:307,columnNumber:13}}," ",w.a.createElement(P,{label:"是否新本",field:"is_new",rules:[{required:!1,message:"是否新本"}],__source:{fileName:I,lineNumber:309,columnNumber:15}},w.a.createElement(b.a,{placeholder:"是否新本",__source:{fileName:I,lineNumber:314,columnNumber:17}},w.a.createElement(b.a.Option,{value:1,__source:{fileName:I,lineNumber:315,columnNumber:19}},"是"),w.a.createElement(b.a.Option,{value:0,__source:{fileName:I,lineNumber:316,columnNumber:19}},"否")))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:320,columnNumber:13}},w.a.createElement(P,{label:"是否热门",field:"is_hot",rules:[{required:!1,message:"是否热门"}],__source:{fileName:I,lineNumber:321,columnNumber:15}},w.a.createElement(b.a,{placeholder:"是否热门",__source:{fileName:I,lineNumber:326,columnNumber:17}},w.a.createElement(b.a.Option,{value:1,__source:{fileName:I,lineNumber:327,columnNumber:19}},"是"),w.a.createElement(b.a.Option,{value:0,__source:{fileName:I,lineNumber:328,columnNumber:19}},"否")))),w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:332,columnNumber:13}},w.a.createElement(P,{label:"备注说明",field:"gb_remarks",rules:[{required:!1,message:"请填写备注说明"}],__source:{fileName:I,lineNumber:333,columnNumber:15}},w.a.createElement(N.a,{placeholder:"请填写备注说明...",__source:{fileName:I,lineNumber:338,columnNumber:17}})))),w.a.createElement(S,{__source:{fileName:I,lineNumber:342,columnNumber:11}},w.a.createElement(A,{xs:24,sm:12,md:12,lg:8,xl:8,xxl:8,__source:{fileName:I,lineNumber:343,columnNumber:13}},w.a.createElement(x.a.Item,{rules:[{required:!0,message:"请上传剧本封面"}],label:"剧本封面",field:"gb_cover",triggerPropName:"fileList",__source:{fileName:I,lineNumber:344,columnNumber:15}},w.a.createElement(m.a,{limit:1,style:{width:200,height:400},name:"gb_cover",customRequest:function(e){var r=e.onProgress,l=e.onError,a=e.onSuccess,n=e.file,t=new XMLHttpRequest;t.upload&&(t.upload.onprogress=function(e){var l;e.total>0&&(l=e.loaded/e.total*100),r(parseInt(l,10),e)}),t.onerror=function(e){l(e)},t.onload=function(){t.status<200||t.status,a(JSON.parse(t.responseText))};var u=new FormData;u.append("up_file",n),u.append("module","drama"),t.open("post","https://gbs.toptian.com/system/upload/image",!0),t.setRequestHeader("Authorization",localStorage.getItem("token")),t.send(u)},onPreview:function(e){c.a.info({title:"Preview",content:w.a.createElement("img",{src:e.url||URL.createObjectURL(e.originFile),style:{maxWidth:"100%"},__source:{fileName:I,lineNumber:386,columnNumber:25}})})},__source:{fileName:I,lineNumber:350,columnNumber:17}})))),w.a.createElement(S,{__source:{fileName:I,lineNumber:397,columnNumber:11}},w.a.createElement(A,{style:{display:"flex",alignItems:"center",justifyContent:"center"},span:24,__source:{fileName:I,lineNumber:398,columnNumber:13}},w.a.createElement("div",{__source:{fileName:I,lineNumber:402,columnNumber:15}},w.a.createElement(P,{__source:{fileName:I,lineNumber:403,columnNumber:17}},w.a.createElement(n.a,{__source:{fileName:I,lineNumber:404,columnNumber:19}}," ",w.a.createElement(t.a,{onClick:p()(y.a.mark((function e(){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.current){e.next=22;break}return e.prev=1,e.next=4,f.current.validate();case 4:if((r=f.current.getFields()).gb_cover=r.gb_cover[0].url||r.gb_cover[0].response.data.file_url,"edit"!==l){e.next=12;break}return e.next=9,Object(j.k)(r);case 9:return 200===e.sent.code&&(u.a.success("修改成功"),_()),e.abrupt("return");case 12:return r.gb_star_lev=2*r.gb_star_lev,e.next=15,Object(j.b)(r);case 15:200===e.sent.code&&(u.a.success("添加成功"),_()),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),u.a.error("校验失败，请检查字段！");case 22:case"end":return e.stop()}}),e,null,[[1,19]])}))),type:"primary",__source:{fileName:I,lineNumber:406,columnNumber:21}},"提交"),w.a.createElement(t.a,{onClick:function(){f.current.resetFields()},__source:{fileName:I,lineNumber:438,columnNumber:21}},"重置")))))))))}},184:function(e,r,l){"use strict";l.r(r);l(617);var a=l(616),n=(l(601),l(604)),t=(l(148),l(51)),u=(l(602),l(603)),m=(l(341),l(286)),c=(l(595),l(596)),o=l(4),i=l.n(o),s=l(78),b=l.n(s),N=(l(150),l(79)),_=(l(77),l(30)),f=l(24),d=l.n(f),p=l(53),E=l.n(p),g=l(0),v=l.n(g),x=l(32),h=l(224),y=l(315),O=l(34),w=l(581),k=l.n(w),j=l(169),I=l(168),C=l(167),q=l(175),P="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/index.tsx";function S(e,r){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),l.push.apply(l,a)}return l}function A(e){for(var r=1;r<arguments.length;r++){var l=null!=arguments[r]?arguments[r]:{};r%2?S(Object(l),!0).forEach((function(r){i()(e,r,l[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):S(Object(l)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(l,r))}))}return e}r.default=function(){var e=Object(O.a)(),r=Object(g.useState)([]),l=d()(r,2),o=l[0],i=l[1],s=Object(g.useState)(!1),f=d()(s,2),p=f[0],w=f[1],S=Object(g.useState)(""),T=d()(S,2),D=T[0],R=T[1],U=Object(g.useState)(!1),z=d()(U,2),F=z[0],M=z[1],L=Object(g.useState)(!1),G=d()(L,2),B=G[0],H=G[1],J=Object(g.useState)({}),V=d()(J,2),W=V[0],K=V[1],X=[{title:"剧本ID",dataIndex:"gb_id"},{title:"剧本标题",dataIndex:"gb_title"},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return v.a.createElement("span",{__source:{fileName:P,lineNumber:50,columnNumber:16}},W[e])}},{title:"剧本区域",dataIndex:"gb_area"},{title:"剧本封面",dataIndex:"gb_cover",render:function(e,r){return v.a.createElement("img",{style:{width:60,height:90},src:r.gb_cover,__source:{fileName:P,lineNumber:61,columnNumber:16}})}},{title:e["searchTable.columns.createdTime"],dataIndex:"created_time"},{title:"更新时间",dataIndex:"updated_time"},{title:e["searchTable.columns.operations"],dataIndex:"operations",render:function(r,l){return v.a.createElement("div",{className:k.a.operations,__source:{fileName:P,lineNumber:76,columnNumber:9}},v.a.createElement(N.a,{__source:{fileName:P,lineNumber:77,columnNumber:11}},v.a.createElement(_.a,{type:"primary",size:"mini",onClick:function(){Q({type:"toggle-show",payload:{show:!0}}),Q({type:"save-item",payload:{clickItem:l}})},__source:{fileName:P,lineNumber:78,columnNumber:13}},"剧本详情"),v.a.createElement(_.a,{onClick:function(){M(!0),Q({type:"save-item",payload:{clickItem:l}}),R("edit")},type:"primary",size:"mini",__source:{fileName:P,lineNumber:108,columnNumber:13}},e["searchTable.columns.operations.update"])))}}],Q=Object(x.b)();Object(g.useEffect)((function(){me()}),[]);var Y=Object(x.c)((function(e){return e.searchTable})),Z=Object(x.c)((function(e){return e.myState})),$=Z.show,ee=Z.clickItem,re=Y.data,le=Y.pagination,ae=Y.loading,ne=Y.formParams;Object(g.useEffect)((function(){te(),ue()}),[]);var te=function(){var e=b()(E.a.mark((function e(){var r,l,a,n,t,u,m,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.m)();case 2:for(r=e.sent,l=r.data,a={},n=0;n<l.length;n++)if("剧本类型"===(t=l[n]).dict_name)for(u=t.dict_label,m=0;m<u.length;m++)c=u[m],a[c.label_value]=c.label_zh;K(a),Q({type:"save-label",payload:{labelData:l}});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=b()(E.a.mark((function e(){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.l)();case 2:r=e.sent,console.log("data: ",r),i(r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(h.j)({page:e,page_size:r});a.then((function(e){var r=e.data,a=e.paginator;Q({type:y.UPDATE_LIST,payload:{data:r}}),Q({type:y.UPDATE_PAGINATION,payload:{pagination:A(A({},le),{},{current:a.page,pageSize:a.page_size,total:a.total_count})}}),Q({type:y.UPDATE_LOADING,payload:{loading:!1}}),Q({type:y.CHANGE_DRAWER_STATUS,payload:{dramaDetailDrawer:!1}}),Q({type:y.UPDATE_FORM_PARAMS,payload:{params:l}})}))}return v.a.createElement("div",{className:k.a.container,__source:{fileName:P,lineNumber:196,columnNumber:5}},v.a.createElement(m.a,{onCancel:function(){c.a.confirm({title:"当前页面正在编辑,确定退出?",okButtonProps:{status:"danger"},onOk:function(){Q({type:"toggle-show",payload:{show:!1}})}})},footer:null,visible:$,title:"剧本详情",unmountOnExit:!0,width:"90vw",__source:{fileName:P,lineNumber:199,columnNumber:7}},v.a.createElement(q.default,{__source:{fileName:P,lineNumber:216,columnNumber:9}})),v.a.createElement(c.a,{style:{width:800},unmountOnExit:!0,footer:null,title:"添加角色",visible:B,onCancel:function(){H(!1)},__source:{fileName:P,lineNumber:219,columnNumber:7}},v.a.createElement(C.default,{closeModalAndRequest:function(){H(!1)},clickItem:ee,__source:{fileName:P,lineNumber:229,columnNumber:9}})),v.a.createElement(c.a,{onCancel:function(){w(!1)},visible:p,unmountOnExit:!0,footer:null,title:"添加dm",__source:{fileName:P,lineNumber:236,columnNumber:7}},v.a.createElement(I.default,{closeModalAndRequest:function(){me(),w(!1)},dmlist:o,clickItem:ee,__source:{fileName:P,lineNumber:245,columnNumber:9}})),v.a.createElement(c.a,{title:"添加剧本",footer:null,onCancel:function(){c.a.confirm({title:"当前页面正在编辑,确定退出?",okButtonProps:{status:"danger"},onOk:function(){M(!1)}})},unmountOnExit:!0,style:{width:"90vw"},visible:F,__source:{fileName:P,lineNumber:254,columnNumber:7}},v.a.createElement(j.default,{closeModalAndRequest:function(){Q({type:"save-item",payload:{clickItem:null}}),me(),M(!1)},modalType:D,__source:{fileName:P,lineNumber:271,columnNumber:9}})),v.a.createElement(u.a,{style:{marginBottom:20},__source:{fileName:P,lineNumber:280,columnNumber:7}},v.a.createElement(u.a.Item,{__source:{fileName:P,lineNumber:281,columnNumber:9}},"运营管理"),v.a.createElement(u.a.Item,{__source:{fileName:P,lineNumber:282,columnNumber:9}},"剧本管理")),v.a.createElement("div",{__source:{fileName:P,lineNumber:284,columnNumber:7}},v.a.createElement(n.a,{style:{marginBottom:20},__source:{fileName:P,lineNumber:285,columnNumber:9}},v.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},__source:{fileName:P,lineNumber:286,columnNumber:11}},v.a.createElement(_.a,{style:{marginRight:20},onClick:function(){R("add"),M(!0)},type:"primary",__source:{fileName:P,lineNumber:287,columnNumber:13}},"添加剧本"),v.a.createElement("div",{__source:{fileName:P,lineNumber:297,columnNumber:13}},v.a.createElement(N.a,{style:{flex:1},wrap:!0,__source:{fileName:P,lineNumber:298,columnNumber:15}},v.a.createElement(t.a,{onChange:function(){},placeholder:"请输入剧本标题",style:{width:200},__source:{fileName:P,lineNumber:299,columnNumber:17}}),v.a.createElement(t.a,{onChange:function(){},placeholder:"剧本类型",style:{width:200},__source:{fileName:P,lineNumber:300,columnNumber:17}}),v.a.createElement(t.a,{onChange:function(){},placeholder:"剧本区域",style:{width:200},__source:{fileName:P,lineNumber:301,columnNumber:17}}),v.a.createElement(t.a,{onChange:function(){},placeholder:"玩家人数",style:{width:200},__source:{fileName:P,lineNumber:302,columnNumber:17}}),v.a.createElement(t.a,{onChange:function(){},placeholder:"剧本状态",style:{width:200},__source:{fileName:P,lineNumber:303,columnNumber:17}}),v.a.createElement(_.a,{onClick:function(){},__source:{fileName:P,lineNumber:304,columnNumber:17}},"重置"),v.a.createElement(_.a,{onClick:function(){me()},type:"primary",__source:{fileName:P,lineNumber:305,columnNumber:17}},"搜索")))))),v.a.createElement(n.a,{bordered:!1,__source:{fileName:P,lineNumber:318,columnNumber:7}},v.a.createElement(a.a,{rowKey:"gb_id",loading:ae,onChange:function(e){me(e.current,e.pageSize,ne)},pagination:le,columns:X,data:re,__source:{fileName:P,lineNumber:319,columnNumber:9}})))}},315:function(e,r,l){"use strict";l.r(r),l.d(r,"UPDATE_LIST",(function(){return a})),l.d(r,"UPDATE_LOADING",(function(){return n})),l.d(r,"UPDATE_PAGINATION",(function(){return t})),l.d(r,"UPDATE_FORM_PARAMS",(function(){return u})),l.d(r,"CHANGE_DRAWER_STATUS",(function(){return m}));var a="searchTable_update_list",n="searchTable_update_loading",t="searchTable_update_pagination",u="searchTable_update_formParams",m="change_drawer_status"},581:function(e,r,l){e.exports={container:"container-50d7a459ef",toolbar:"toolbar-603124241c",operations:"operations-1e37fde15b"}}}]);