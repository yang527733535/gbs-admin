(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{172:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));n(154);var a=n(82),r=(n(112),n(39)),l=(n(656),n(655)),c=(n(159),n(67)),o=(n(326),n(246)),u=(n(244),n(73)),i=(n(327),n(248)),s=(n(652),n(653)),m=(n(111),n(45)),b=(n(64),n(24)),_=n(65),d=n.n(_),f=(n(350),n(257)),p=n(22),g=n.n(p),N=(n(245),n(96)),v=n(44),h=n.n(v),E=n(0),O=n.n(E),y=n(243),x=n(675),j="/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-store/storeDetail/storeDrama/index.tsx",C=N.a.Option;function S(e){var t=e.store_code,n=e.getStoreDetail,_=e.storeDetailInfo,p=_.store_drama,v=Object(E.useState)(null),S=g()(v,2),k=S[0],w=S[1],I=Object(E.useState)(null),P=g()(I,2),T=P[0],z=P[1],V=Object(E.useState)(null),H=g()(V,2),B=H[0],D=H[1],F=Object(E.useState)(null),J=g()(F,2),L=J[0],K=J[1],R=Object(E.useState)(!1),U=g()(R,2),W=U[0],q=U[1],A=Object(E.useState)([]),G=g()(A,2),M=G[0],Q=G[1],X=Object(E.useState)(!1),Y=g()(X,2),Z=Y[0],$=Y[1],ee=Object(E.useState)({current:1,pageSize:10,total:1111}),te=g()(ee,2),ne=te[0],ae=te[1],re=Object(E.useState)(p),le=g()(re,2),ce=le[0],oe=le[1],ue=Object(E.useState)({}),ie=g()(ue,2),se=ie[0],me=ie[1],be=Object(E.useState)([]),_e=g()(be,2),de=_e[0],fe=_e[1],pe=Object(E.useState)([]),ge=g()(pe,2),Ne=ge[0],ve=ge[1],he=Object(E.useState)([]),Ee=g()(he,2),Oe=Ee[0],ye=Ee[1],xe=Object(E.useState)([]),je=g()(xe,2),Ce=je[0],Se=je[1],ke=Object(E.useState)(),we=g()(ke,2),Ie=we[0],Pe=we[1],Te=Object(E.useState)(),ze=g()(Te,2),Ve=ze[0],He=ze[1],Be=Object(E.useState)(),De=g()(Be,2),Fe=De[0],Je=De[1],Le=Object(E.useState)(),Ke=g()(Le,2),Re=Ke[0],Ue=Ke[1],We=Object(E.useState)(),qe=g()(We,2),Ae=qe[0],Ge=qe[1],Me=Object(E.useState)(),Qe=g()(Me,2),Xe=Qe[0],Ye=Qe[1];Object(E.useEffect)((function(){var e=Object(x.a)("app_gb_type"),t=new Object;e.forEach((function(e){t[e.label_value]=e.label_zh})),me(t)}),[]),Object(E.useEffect)((function(){JSON.parse(localStorage.getItem("dicts")).forEach((function(e){"app_gb_type"===e.dict_code&&fe(e.dict_label),"app_gb_text_tag"===e.dict_code&&ye(e.dict_label),"app_gb_status"===e.dict_code&&ve(e.dict_label),"app_gb_status"===e.dict_code&&ve(e.dict_label),"app_gb_level"===e.dict_code&&Se(e.dict_label)}))}),[]),Object(E.useEffect)((function(){var e=_.store_drama;oe(e)}),[_]);var Ze=Object(E.useState)([]),$e=g()(Ze,2),et=$e[0],tt=$e[1];Object(E.useEffect)((function(){var e=_.store_drama.reduce((function(e,t){return e.push(t.gb_code),e}),[]);tt(e)}),[n]),Object(E.useEffect)((function(){rt()}),[]);var nt=[{title:"剧本标题",dataIndex:"gb_title"},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return O.a.createElement("span",{__source:{fileName:j,lineNumber:111,columnNumber:16}},se[e])}},{title:"工作日价格",dataIndex:"gb_price"},{title:"周末价格",dataIndex:"gb_price2"},{title:"是否启用",dataIndex:"is_enable",render:function(e){return 1===parseInt(e)?O.a.createElement(f.a,{status:"success",text:"启用中",__source:{fileName:j,lineNumber:127,columnNumber:18}}):0===parseInt(e)?O.a.createElement(f.a,{status:"error",text:"未启用",__source:{fileName:j,lineNumber:130,columnNumber:18}}):void 0}},{title:"剧本标签",dataIndex:"gb_custom_tag"},{title:"是否新本",dataIndex:"is_new",render:function(e){return 1===parseInt(e)?"是":"否"}},{title:"是否热门",dataIndex:"is_hot",render:function(e){return 1===parseInt(e)?"是":"否"}},{title:"剧本难度",dataIndex:"gb_level"},{title:"剧本时长",dataIndex:"gb_hour",render:function(e){return e+"小时"}},{title:"玩家人数",dataIndex:"gb_people"},{title:"上架时间",dataIndex:"gb_add_time"},{title:"操作",render:function(e,n){return O.a.createElement(b.a,{disabled:et.includes(n.gb_code),onClick:d()(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new Object).store_code=t.store_code,a.drama_array=[{gb_code:n.gb_code,gb_price:k||n.gb_price,gb_price2:T||n.gb_price2}],w(n.gb_price),z(n.gb_price2),console.log("item",n),D(n),q(!0),K(a);case 9:case"end":return e.stop()}}),e)}))),size:"mini",type:"primary",__source:{fileName:j,lineNumber:183,columnNumber:11}},"添加")}}],at=[{title:"剧本标题",dataIndex:"gb_title"},{title:"工作日价格",dataIndex:"gb_price"},{title:"周末价格",dataIndex:"gb_price2"},{title:"剧本类型",dataIndex:"gb_type",render:function(e){return O.a.createElement("span",{__source:{fileName:j,lineNumber:237,columnNumber:16}},se[e])}},{title:"剧本标签",dataIndex:"gb_text_tag"},{title:"操作",render:function(e,a){return O.a.createElement(s.a,{title:"确定删除该剧本",onOk:d()(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),r={store_code:t.store_code,gb_code:a.gb_code},e.next=4,Object(y.E)(r);case 4:200===e.sent.code&&(n(),m.a.success("删除成功"));case 6:case"end":return e.stop()}}),e)}))),__source:{fileName:j,lineNumber:248,columnNumber:11}},O.a.createElement(b.a,{size:"mini",status:"danger",__source:{fileName:j,lineNumber:263,columnNumber:13}},"删除"))}}];function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.log("params: ",n);var a=Object(y.n)({page:e,page_size:t,gb_title:Ie,gb_people:Ve,gb_type:Fe,gb_status:Xe,gb_text_tag:Re,gb_level:Ae});$(!0),a.then((function(e){$(!1);var t=e.data,n=e.paginator;ae({current:n.page,pageSize:n.page_size,total:n.total_count}),Q(t)}))}return O.a.createElement("div",{__source:{fileName:j,lineNumber:302,columnNumber:5}},O.a.createElement(o.a,{title:null==B?void 0:B.gb_title,visible:W,onOk:d()(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.drama_array[0].gb_price=k,L.drama_array[0].gb_price2=T,e.next=4,Object(y.H)(L);case 4:t=e.sent,console.log("res: ",t),200===t.code&&(n(),m.a.success("添加成功"),q(!1));case 7:case"end":return e.stop()}}),e)}))),unmountOnExit:!0,onCancel:function(){return q(!1)},autoFocus:!1,focusLock:!0,__source:{fileName:j,lineNumber:303,columnNumber:7}},O.a.createElement(u.a,{__source:{fileName:j,lineNumber:322,columnNumber:9}},O.a.createElement(u.a.Item,{label:"工作日价格",__source:{fileName:j,lineNumber:323,columnNumber:11}},O.a.createElement(i.a,{value:k,placeholder:"工作日价格",onChange:function(e){w(e)},__source:{fileName:j,lineNumber:324,columnNumber:13}})),O.a.createElement(u.a.Item,{label:"周末价格",__source:{fileName:j,lineNumber:332,columnNumber:11}},O.a.createElement(i.a,{style:{marginTop:10},value:T,placeholder:"周末价格",onChange:function(e){z(e)},__source:{fileName:j,lineNumber:333,columnNumber:13}})))),O.a.createElement("div",{__source:{fileName:j,lineNumber:344,columnNumber:7}},O.a.createElement(c.a.Title,{heading:4,__source:{fileName:j,lineNumber:345,columnNumber:9}},"已添加的剧本"),O.a.createElement(l.a,{size:"small",columns:at,data:ce,__source:{fileName:j,lineNumber:346,columnNumber:9}})),O.a.createElement("div",{__source:{fileName:j,lineNumber:348,columnNumber:7}},O.a.createElement(c.a.Title,{heading:4,__source:{fileName:j,lineNumber:349,columnNumber:9}},"剧本库"),O.a.createElement("div",{style:{width:"100%",marginBottom:10,display:"flex",justifyContent:"flex-ends"},__source:{fileName:j,lineNumber:350,columnNumber:9}},O.a.createElement(a.a,{style:{flex:1},wrap:!0,__source:{fileName:j,lineNumber:353,columnNumber:11}},O.a.createElement(r.a,{value:Ie,onChange:function(e){Pe(e)},placeholder:"请输入剧本标题",style:{width:200},__source:{fileName:j,lineNumber:354,columnNumber:13}}),O.a.createElement(r.a,{onChange:function(e){He(e)},value:Ve,placeholder:"玩家人数",style:{width:200},__source:{fileName:j,lineNumber:362,columnNumber:13}}),O.a.createElement(N.a,{onChange:function(e){Je(e)},value:Fe,placeholder:"剧本类型",style:{width:200},__source:{fileName:j,lineNumber:370,columnNumber:13}},de.map((function(e){return O.a.createElement(C,{key:e.label_value,value:e.label_value,__source:{fileName:j,lineNumber:380,columnNumber:19}},e.label_zh)}))),O.a.createElement(N.a,{onChange:function(e){Ge(e)},value:Ae,placeholder:"剧本难度",style:{width:200},__source:{fileName:j,lineNumber:386,columnNumber:13}},Ce.map((function(e){return O.a.createElement(C,{key:e.label_value,value:e.label_value,__source:{fileName:j,lineNumber:396,columnNumber:19}},e.label_zh)}))),O.a.createElement(N.a,{onChange:function(e){Ue(e)},value:Re,placeholder:"剧本标签",style:{width:200},__source:{fileName:j,lineNumber:402,columnNumber:13}},Oe.map((function(e){return O.a.createElement(C,{key:e.label_value,value:e.label_value,__source:{fileName:j,lineNumber:412,columnNumber:19}},e.label_zh)}))),O.a.createElement(N.a,{onChange:function(e){Ye(e)},value:Xe,placeholder:"剧本状态",style:{width:200},__source:{fileName:j,lineNumber:418,columnNumber:13}},Ne.map((function(e){return O.a.createElement(C,{key:e.label_value,value:e.label_value,__source:{fileName:j,lineNumber:428,columnNumber:19}},e.label_zh)}))),O.a.createElement(b.a,{onClick:function(){Pe(null),Je(null),Ue(null),He(null),Ye(null),Ge(null)},__source:{fileName:j,lineNumber:434,columnNumber:13}},"重置"),O.a.createElement(b.a,{onClick:function(){rt()},type:"primary",__source:{fileName:j,lineNumber:446,columnNumber:13}},"搜索"))),O.a.createElement(l.a,{loading:Z,onChange:function(e){var t=e.current,n=e.pageSize;ae(e),rt(t,n)},rowKey:"store_id",size:"mini",pagination:ne,data:M,columns:nt,__source:{fileName:j,lineNumber:456,columnNumber:9}})))}},652:function(e,t,n){"use strict";n(17),n(64),n(113),n(329),n(664)},653:function(e,t,n){"use strict";var a=n(0),r=n.n(a),l=n(116),c=n(33),o=n(24),u=n(40),i=n(3),s=n(16),m=n(10),b=function(){return(b=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},_=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,l=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(a=l.next()).done;)c.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return c},f={position:"top",okType:"primary",icon:r.a.createElement(u.a,null),blurToHide:!0,unmountOnExit:!0,trigger:"click",escToClose:!0};var p=Object(a.forwardRef)((function(e,t){var n,u=Object(a.useContext)(i.a),p=u.getPrefixCls,g=u.locale,N=u.componentConfig,v=Object(m.a)(e,f,null==N?void 0:N.Popconfirm),h=v.style,E=v.className,O=v.children,y=v.position,x=v.getPopupContainer,j=v.blurToHide,C=v.unmountOnExit,S=v.trigger,k=v.escToClose,w=v.onVisibleChange,I=v.triggerProps,P=v.title,T=v.icon,z=v.okText,V=v.cancelText,H=v.okType,B=v.okButtonProps,D=v.cancelButtonProps,F=v.autoFocus,J=v.focusLock,L=_(v,["style","className","children","position","getPopupContainer","blurToHide","unmountOnExit","trigger","escToClose","onVisibleChange","triggerProps","title","icon","okText","cancelText","okType","okButtonProps","cancelButtonProps","autoFocus","focusLock"]),K=d(Object(s.a)(!1,{defaultValue:v.defaultPopupVisible,value:v.popupVisible}),2),R=K[0],U=K[1],W=d(Object(a.useState)(!1),2),q=W[0],A=W[1],G=p("popconfirm"),M=function(e){"popupVisible"in v||U(e),I&&I.onVisibleChange&&I.onVisibleChange(e),w&&w(e)},Q=function(){M(!1)},X=function(){Q(),v.onCancel&&v.onCancel()},Y=function(){var e,t=v.onOk||v.onConfirm;t&&(e=t()),e&&e.then&&(A(!0),e.then((function(){Q()}),(function(e){A(!1),console.error(e)}))),e||Q()};return Object(a.useEffect)((function(){return!R&&q&&A(!1),function(){A(!1)}}),[R]),r.a.createElement(c.a,b({},L,{ref:t,style:b({maxWidth:350},h),className:E,prefixCls:G,getPopupContainer:x,position:y,trigger:S,escToClose:k,popupVisible:R,content:(n=r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,b({onClick:X,size:"mini"},D),V||g.Popconfirm.cancelText),r.a.createElement(o.a,b({loading:q,onClick:Y,size:"mini",type:H},B),z||g.Popconfirm.okText)),r.a.createElement("div",{className:G+"-wrapper"},r.a.createElement("div",{className:G+"-title"},T&&r.a.createElement("span",{className:G+"-title-icon"},T),r.a.createElement("div",{className:G+"-title-text"},P)),r.a.createElement("div",{className:G+"-btn"},J?r.a.createElement(l.a,{disabled:!R,autoFocus:!!F},n):n))),unmountOnExit:C,blurToHide:j,popupHoverStay:!0,triggerProps:I,onVisibleChange:M,childrenPrefix:G}),"string"==typeof O?r.a.createElement("span",null,O):O)}));p.displayName="Popconfirm",t.a=p},664:function(e,t,n){},675:function(e,t,n){"use strict";function a(e){var t=JSON.parse(localStorage.getItem("dicts")),n=null;return t.forEach((function(t){t.dict_code===e&&(n=t.dict_label)})),n}n.d(t,"a",(function(){return a}))}}]);