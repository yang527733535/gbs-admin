(window.webpackJsonp=window.webpackJsonp||[]).push([[24,86,107],{175:function(e,r,n){"use strict";n.r(r);n(148);var a=n(52),l=n(78),t=n.n(l),u=n(5),c=n.n(u),o=(n(150),n(79)),m=(n(77),n(30)),i=n(615),s=(n(228),n(89)),b=(n(310),n(231)),N=(n(149),n(53)),_=n(24),f=n.n(_),d=(n(309),n(104)),p=n(51),g=n.n(p),E=n(0),h=n.n(E),y=n(227),O="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/form/index.jsx",v=d.a.Item,j={labelCol:{span:7},wrapperCol:{span:17}},k={wrapperCol:{span:17,offset:7}};r.default=function(e){var r=e.closeModalAndReqTable,n=e.clickItem,l=Object(E.useRef)(),u=Object(E.useState)("default"),_=f()(u,2),p=_[0],w=(_[1],Object(E.useState)([])),T=f()(w,2),I=(T[0],T[1]);return console.log(n),Object(E.useEffect)((function(){l.current.setFieldsValue(n)}),[]),Object(E.useEffect)((function(){Object(y.q)().then((function(e){console.log("res: ",e);var r,n=e.data;r=n.map((function(e){return function e(r){var n=Array.isArray(r.region_children)&&r.region_children.length>0;return{key:String(r.region_id),value:String(r.region_id),label:r.region_name,children:n?r.region_children.map((function(r){return e(r)})):[]}}(e)})),console.log(r),I(r)}))}),[]),h.a.createElement("div",{style:{maxWidth:650},__source:{fileName:O,lineNumber:77,columnNumber:5}},h.a.createElement(d.a,c()({ref:l},j,{size:p,onSubmit:function(e){console.log(e)},onValuesChange:function(e,r){console.log("onValuesChange: ",e,r)},scrollToFirstError:!0,__source:{fileName:O,lineNumber:78,columnNumber:7}}),h.a.createElement(v,{label:"店铺编码",field:"store_code",rules:[{required:!0,message:"请填写店铺编码"}],__source:{fileName:O,lineNumber:92,columnNumber:9}},h.a.createElement(N.a,{placeholder:"请填写店铺编码...",__source:{fileName:O,lineNumber:97,columnNumber:11}})),h.a.createElement(v,{label:"剧本编码",field:"gb_code",rules:[{required:!0,message:"请填写剧本编码"}],__source:{fileName:O,lineNumber:99,columnNumber:9}},h.a.createElement(N.a,{placeholder:"请填写剧本编码...",__source:{fileName:O,lineNumber:104,columnNumber:11}})),h.a.createElement(v,{label:"剧本价格",field:"gb_price",rules:[{required:!0,message:"请填写剧本价格"}],__source:{fileName:O,lineNumber:106,columnNumber:9}},h.a.createElement(b.a,{min:0,placeholder:"请填写剧本价格...",__source:{fileName:O,lineNumber:111,columnNumber:11}})),h.a.createElement(v,{label:"玩家人数",field:"game_people",rules:[{required:!0,message:"请填写玩家人数"}],__source:{fileName:O,lineNumber:113,columnNumber:9}},h.a.createElement(b.a,{min:2,placeholder:"请填写玩家人数...",__source:{fileName:O,lineNumber:118,columnNumber:11}})),h.a.createElement(v,{label:"主持人",field:"dm_user",rules:[{required:!0,message:"请填写主持人"}],__source:{fileName:O,lineNumber:120,columnNumber:9}},h.a.createElement(N.a,{min:2,placeholder:"请填写主持人...",__source:{fileName:O,lineNumber:125,columnNumber:11}})),h.a.createElement(d.a.List,{field:"game_player",__source:{fileName:O,lineNumber:128,columnNumber:9}},(function(e,r){var n=r.add,a=r.remove;r.move;return h.a.createElement("div",{__source:{fileName:O,lineNumber:131,columnNumber:15}},e.map((function(e,r){return h.a.createElement("div",{key:e.key,__source:{fileName:O,lineNumber:134,columnNumber:21}},h.a.createElement(d.a.Item,{label:"玩家".concat(1+r),__source:{fileName:O,lineNumber:135,columnNumber:23}},h.a.createElement(o.a,{__source:{fileName:O,lineNumber:136,columnNumber:25}},h.a.createElement(d.a.Item,{field:"".concat(e.field,".player_user"),rules:[{required:!0}],noStyle:!0,__source:{fileName:O,lineNumber:137,columnNumber:27}},h.a.createElement(N.a,{placeholder:"玩家账号",__source:{fileName:O,lineNumber:142,columnNumber:29}})),h.a.createElement(d.a.Item,{field:"".concat(e.field,".player_type"),rules:[{required:!0}],noStyle:!0,__source:{fileName:O,lineNumber:144,columnNumber:27}},h.a.createElement(s.a,{placeholder:"玩家类型",__source:{fileName:O,lineNumber:149,columnNumber:29}},h.a.createElement(s.a.Option,{value:"player",__source:{fileName:O,lineNumber:150,columnNumber:31}},"player"),h.a.createElement(s.a.Option,{value:"worker",__source:{fileName:O,lineNumber:151,columnNumber:31}},"worker"))),h.a.createElement(d.a.Item,{field:"".concat(e.field,".player_name"),rules:[{required:!0}],noStyle:!0,__source:{fileName:O,lineNumber:155,columnNumber:27}},h.a.createElement(N.a,{placeholder:"玩家名称",__source:{fileName:O,lineNumber:160,columnNumber:29}})),h.a.createElement(d.a.Item,{field:"".concat(e.field,".player_note"),rules:[{required:!0}],noStyle:!0,__source:{fileName:O,lineNumber:162,columnNumber:27}},h.a.createElement(N.a,{placeholder:"玩家备注",__source:{fileName:O,lineNumber:167,columnNumber:29}})),h.a.createElement(m.a,{icon:h.a.createElement(i.a,{__source:{fileName:O,lineNumber:170,columnNumber:35}}),shape:"circle",status:"danger",onClick:function(){return a(r)},__source:{fileName:O,lineNumber:169,columnNumber:27}}))))})),h.a.createElement(d.a.Item,c()({},k,{__source:{fileName:O,lineNumber:180,columnNumber:17}}),h.a.createElement(m.a,{onClick:function(){n()},__source:{fileName:O,lineNumber:181,columnNumber:19}},"添加玩家")))})),h.a.createElement(v,c()({},k,{__source:{fileName:O,lineNumber:207,columnNumber:9}}),h.a.createElement(m.a,{onClick:t()(g.a.mark((function e(){var t,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.current){e.next=25;break}return e.prev=1,e.next=4,l.current.validate();case 4:if(null!==n){e.next=11;break}return console.log(l.current.getFields()),e.next=8,Object(y.e)(l.current.getFields());case 8:t=e.sent,e.next=17;break;case 11:return u=l.current.getFields(),console.log("param: ",u),u.store_code=n.store_code,e.next=16,Object(y.z)(u);case 16:t=e.sent;case 17:200===t.code&&(a.a.success("添加成功"),r()),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0),console.log(l.current.getFieldsError()),a.a.error("校验失败，请检查字段！");case 25:case"end":return e.stop()}}),e,null,[[1,20]])}))),type:"primary",style:{marginRight:24},__source:{fileName:O,lineNumber:208,columnNumber:11}},"提交"),h.a.createElement(m.a,{onClick:function(){l.current.resetFields()},__source:{fileName:O,lineNumber:239,columnNumber:11}},"重置"))))}},194:function(e,r,n){"use strict";n.r(r);n(634);var a=n(633),l=(n(607),n(608)),t=(n(150),n(79)),u=(n(310),n(231)),c=(n(149),n(53)),o=(n(622),n(623)),m=(n(605),n(606)),i=n(4),s=n.n(i),b=(n(77),n(30)),N=n(24),_=n.n(N),f=n(618),d=n.n(f),p=n(0),g=n.n(p),E=n(32),h=n(227),y=n(325),O=n(34),v=n(594),j=n.n(v),k=n(175),w="/Users/mrhh/Desktop/gbs-admin/src/pages/store-game/index.tsx";function T(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?T(Object(n),!0).forEach((function(r){s()(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}r.default=function(e){d()(e);var r=Object(O.a)(),n=Object(p.useState)(!1),i=_()(n,2),s=i[0],N=i[1],f=Object(p.useState)(null),v=_()(f,2),T=v[0],A=v[1],P=Object(p.useState)(null),S=_()(P,2),x=S[0],C=S[1],D=Object(p.useState)(null),q=_()(D,2),U=q[0],F=q[1],R=Object(p.useState)(null),z=_()(R,2),L=z[0],M=z[1],G=[{title:"店铺名称",dataIndex:"store_name"},{title:"店铺地址",dataIndex:"position_address"},{title:r["searchTable.columns.createdTime"],dataIndex:"created_time"},{title:"更新时间",dataIndex:"updated_time"},{title:r["searchTable.columns.operations"],render:function(e,n){return g.a.createElement(b.a,{onClick:function(){console.log(e,n),A(n),N(!0)},size:"small",__source:{fileName:w,lineNumber:54,columnNumber:9}},r["searchTable.columns.operations.update"])}}],V=Object(E.c)((function(e){return e.searchTable})),B=V.data,J=V.pagination,W=V.loading,K=V.formParams,H=Object(E.b)();function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(h.a)({page:e,page_size:r,store_code:x,gb_code:U,game_people:L});a.then((function(e){var r=e.data,a=e.paginator;H({type:y.UPDATE_LIST,payload:{data:r}}),H({type:y.UPDATE_PAGINATION,payload:{pagination:I(I({},J),{},{current:a.page,pageSize:a.page_size,total:a.total_count})}}),H({type:y.UPDATE_LOADING,payload:{loading:!1}}),H({type:y.UPDATE_FORM_PARAMS,payload:{params:n}})}))}return Object(p.useEffect)((function(){Q()}),[]),g.a.createElement("div",{className:j.a.container,__source:{fileName:w,lineNumber:109,columnNumber:5}},g.a.createElement(m.a,{title:null===T?"添加组局":"修改组局",footer:null,onCancel:function(){N(!1)},unmountOnExit:!0,style:{width:900,minWidth:900},visible:s,__source:{fileName:w,lineNumber:110,columnNumber:7}},g.a.createElement(k.default,{clickItem:T,closeModalAndReqTable:function(){N(!1),Q()},__source:{fileName:w,lineNumber:120,columnNumber:9}})),g.a.createElement(o.a,{style:{marginBottom:20},__source:{fileName:w,lineNumber:128,columnNumber:7}},g.a.createElement(o.a.Item,{__source:{fileName:w,lineNumber:129,columnNumber:9}},"店铺运营"),g.a.createElement(o.a.Item,{__source:{fileName:w,lineNumber:130,columnNumber:9}},"店铺组局")),g.a.createElement("div",{__source:{fileName:w,lineNumber:132,columnNumber:7}},g.a.createElement(l.a,{style:{marginBottom:20},__source:{fileName:w,lineNumber:133,columnNumber:9}},g.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},__source:{fileName:w,lineNumber:134,columnNumber:11}},g.a.createElement(b.a,{onClick:function(){N(!0),A(null)},type:"primary",__source:{fileName:w,lineNumber:135,columnNumber:13}},"添加组局"),g.a.createElement("div",{__source:{fileName:w,lineNumber:145,columnNumber:13}},g.a.createElement(t.a,{style:{marginLeft:20},wrap:!0,__source:{fileName:w,lineNumber:146,columnNumber:15}},g.a.createElement(c.a,{value:x,onChange:function(e){C(e)},placeholder:"请输入店铺编码",style:{width:200},__source:{fileName:w,lineNumber:147,columnNumber:17}}),g.a.createElement(c.a,{value:U,onChange:function(e){F(e)},placeholder:"请输入剧本编码",style:{width:200},__source:{fileName:w,lineNumber:155,columnNumber:17}}),g.a.createElement(u.a,{min:1,value:L,onChange:function(e){M(e)},placeholder:"请输入玩家人数",style:{width:200},__source:{fileName:w,lineNumber:163,columnNumber:17}}),g.a.createElement(b.a,{onClick:function(){},__source:{fileName:w,lineNumber:173,columnNumber:17}},"重置"),g.a.createElement(b.a,{onClick:function(){Q()},type:"primary",__source:{fileName:w,lineNumber:174,columnNumber:17}},"搜索")))))),g.a.createElement(l.a,{bordered:!1,__source:{fileName:w,lineNumber:187,columnNumber:7}},g.a.createElement(a.a,{rowKey:"user_account",loading:W,onChange:function(e){Q(e.current,e.pageSize,K)},pagination:J,columns:G,data:B,__source:{fileName:w,lineNumber:188,columnNumber:9}})))}},325:function(e,r,n){"use strict";n.r(r),n.d(r,"UPDATE_LIST",(function(){return a})),n.d(r,"UPDATE_LOADING",(function(){return l})),n.d(r,"UPDATE_PAGINATION",(function(){return t})),n.d(r,"UPDATE_FORM_PARAMS",(function(){return u}));var a="searchTable_update_list",l="searchTable_update_loading",t="searchTable_update_pagination",u="searchTable_update_formParams"},594:function(e,r,n){e.exports={container:"container-a393421ccd",toolbar:"toolbar-a31128d7de",operations:"operations-807e4a3204"}}}]);