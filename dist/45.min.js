(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[45],{

/***/ "./src/pages/stocks-drama/dmform/index.jsx":
/*!*************************************************!*\
  !*** ./src/pages/stocks-drama/dmform/index.jsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DmForm; });
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "./node_modules/_@babel_runtime@7.16.7@@babel/runtime/helpers/extends.js");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _arco_design_web_react_es_Button_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arco-design/web-react/es/Button/style */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Button/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arco-design/web-react/es/Button */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Button/index.js");
/* harmony import */ var _arco_design_web_react_es_Message_style__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arco-design/web-react/es/Message/style */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Message/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Message__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arco-design/web-react/es/Message */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Message/index.js");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/_@babel_runtime@7.16.7@@babel/runtime/helpers/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _arco_design_web_react_es_Select_style__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arco-design/web-react/es/Select/style */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Select/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Select__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arco-design/web-react/es/Select */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Select/index.js");
/* harmony import */ var _arco_design_web_react_es_Form_style__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arco-design/web-react/es/Form/style */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Form/style/index.js");
/* harmony import */ var _arco_design_web_react_es_Form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arco-design/web-react/es/Form */ "./node_modules/_@arco-design_web-react@2.28.0@@arco-design/web-react/es/Form/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/_@babel_runtime@7.16.7@@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ "./node_modules/_react@16.14.0@react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _api_drama_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../api/drama.js */ "./src/api/drama.js");










var _jsxFileName = "/Users/mrhh/Desktop/gbs-admin/src/pages/stocks-drama/dmform/index.jsx";



var FormItem = _arco_design_web_react_es_Form__WEBPACK_IMPORTED_MODULE_9__["default"].Item;
var formItemLayout = {
  labelCol: {
    span: 7
  },
  wrapperCol: {
    span: 17
  }
};
var noLabelLayout = {
  wrapperCol: {
    span: 17,
    offset: 7
  }
};
function DmForm(_ref) {
  var clickItem = _ref.clickItem,
      closeModalAndRequest = _ref.closeModalAndRequest,
      dmlist = _ref.dmlist;
  console.log('clickItem: ', clickItem);
  console.log('dmlist: ', dmlist);
  var formRef = Object(react__WEBPACK_IMPORTED_MODULE_11__["useRef"])();
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div", {
    __source: {
      fileName: _jsxFileName,
      lineNumber: 44,
      columnNumber: 5
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_arco_design_web_react_es_Form__WEBPACK_IMPORTED_MODULE_9__["default"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({
    ref: formRef
  }, formItemLayout, {
    __source: {
      fileName: _jsxFileName,
      lineNumber: 45,
      columnNumber: 7
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(FormItem, {
    label: "\u9009\u62E9DM",
    required: true,
    field: "dm_array",
    rules: [{
      required: true,
      minLength: 1,
      message: 'choice is required'
    }],
    __source: {
      fileName: _jsxFileName,
      lineNumber: 46,
      columnNumber: 9
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_arco_design_web_react_es_Select__WEBPACK_IMPORTED_MODULE_7__["default"], {
    mode: "multiple",
    allowCreate: true,
    placeholder: "\u8BF7\u9009\u62E9dm",
    __source: {
      fileName: _jsxFileName,
      lineNumber: 58,
      columnNumber: 11
    }
  }, dmlist === null || dmlist === void 0 ? void 0 : dmlist.map(function (item) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_arco_design_web_react_es_Select__WEBPACK_IMPORTED_MODULE_7__["default"].Option, {
      key: item.user_account,
      value: item.user_account,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 61,
        columnNumber: 17
      }
    }, item.user_nick);
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(FormItem, _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, noLabelLayout, {
    __source: {
      fileName: _jsxFileName,
      lineNumber: 68,
      columnNumber: 9
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_arco_design_web_react_es_Button__WEBPACK_IMPORTED_MODULE_2__["default"], {
    onClick: /*#__PURE__*/_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default.a.mark(function _callee() {
      var param, data;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              if (!formRef.current) {
                _context.next = 21;
                break;
              }

              _context.prev = 1;
              _context.next = 4;
              return formRef.current.validate();

            case 4:
              _context.next = 6;
              return formRef.current.validate();

            case 6:
              param = _context.sent;
              param.gb_code = clickItem.gb_code;
              param.dm_array = param.dm_array.map(function (item) {
                return {
                  user_account: item
                };
              });
              _context.next = 11;
              return Object(_api_drama_js__WEBPACK_IMPORTED_MODULE_12__["reqBindDm"])(param);

            case 11:
              data = _context.sent;

              if (data.code === 200) {}

              _arco_design_web_react_es_Message__WEBPACK_IMPORTED_MODULE_4__["default"].info('提交成功！');

              closeModalAndRequest();
              _context.next = 21;
              break;

            case 17:
              _context.prev = 17;
              _context.t0 = _context["catch"](1);
              console.log(formRef.current.getFieldsError());

              _arco_design_web_react_es_Message__WEBPACK_IMPORTED_MODULE_4__["default"].error('校验失败，请检查字段！');

            case 21:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[1, 17]]);
    })),
    type: "primary",
    style: {
      marginRight: 24
    },
    __source: {
      fileName: _jsxFileName,
      lineNumber: 69,
      columnNumber: 11
    }
  }, "\u63D0\u4EA4"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_arco_design_web_react_es_Button__WEBPACK_IMPORTED_MODULE_2__["default"], {
    onClick: function onClick() {
      formRef.current.resetFields();
    },
    __source: {
      fileName: _jsxFileName,
      lineNumber: 95,
      columnNumber: 11
    }
  }, "\u91CD\u7F6E"))));
}

/***/ })

}]);
//# sourceMappingURL=45.min.js.map